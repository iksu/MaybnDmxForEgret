var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},Dictionary=function(t){function e(){var e=t.call(this)||this;return e._risingChanged=!1,e._length=-1,e._gsKey=new egret.HashObject,e}return __extends(e,t),e.prototype.CreateGSS=function(t){var e=this;if(t)for(var i in t)this.CreateGS(i);else this.EachKey(function(t){e.CreateGS(t)}.bind(this))},e.prototype.CreateGS=function(t){this._gsKey[t]||(this._gsKey[t]=!0,this._xml||(this["_"+t]=this[t],delete this[t]),Object.defineProperty(this,t,{set:function(e){if(this._risingChanged=!1,this._xml)if(this.Exists(t)){var i=this._xml[t];(i!=e||null==e)&&(this._xml[t]=e,this.Changed(t,i,e),this.ResetLength())}else this._xml[t]=e,this.Changed(t,null,e),this.ResetLength();else if(this.Exists(t)){var i=this["_"+t];(i!=e||null==e)&&(this["_"+t]=e,this.Changed(t,i,e),this.ResetLength())}else this["_"+t]=e,this.Changed(t,null,e),this.ResetLength()},get:function(){var e=null;if(this._xml){if(e=this._xml[t],Strx.IsEmpty(e))return""}else{if(e=this["_"+t],e&&e instanceof Function)return e;if(Strx.IsEmpty(e))return""}return e}}))},e.prototype.s=function(t,e){this.Set(t,e)},e.prototype.Set=function(t,e){if(this._risingChanged=!1,t instanceof Function&&(t=Strx.Rnd(Number.MAX_VALUE).toString()),this.Exists(t)){var i=this.Get(t);(i!=e||null==e)&&(this[t]=e,this.Changed(t,i,e),this.ResetLength())}else this[t]=e,this.Changed(t,null,e),this.ResetLength()},e.prototype.g=function(t){return this.Get(t)},e.prototype.Get=function(t){return this._xml?this._xml[t]:this[t]},e.prototype.Remove=function(t){e.systemKeys.hasOwnProperty(t)||(delete this[t],delete this["_"+t],this.ResetLength())},e.prototype.Clear=function(){var t=this;this.EachKey(function(e){delete t[e],delete t["_"+e]}.bind(this)),this.ResetLength()},e.prototype.Exists=function(t){return this._xml?this._xml.hasOwnProperty(t):this.hasOwnProperty(t)},e.prototype.GetOrAdd=function(t,e){if(this.Exists(t))return this.g(t);var i=e();return this.s(t,i),i},e.prototype.GetName=function(t){var e=null,i=0;return this.EachKey(function(n){return i==t?(e=n,!0):void i++}),e},e.prototype.GetValue=function(t){var e=this.GetName(t);return this.g(e)},e.prototype.GetIndex=function(t){var e=-1,i=0;return this.EachKey(function(n){return n==t?(e=i,!0):void i++}),e},e.prototype.EachKey=function(t){if(this._xml){for(var i in this._xml)if(t(i))break}else for(var i in this)if(i.IsFull()&&!e.systemKeys.hasOwnProperty(i)&&"_"!=i.substr(0,1)&&t(i))break},e.prototype.Each=function(t){if(this._xml){for(var i in this._xml)if(i&&t(this._xml[i]))break}else for(var i in this)if(i&&!e.systemKeys.hasOwnProperty(i)&&t(this[i]))break},e.prototype.ResetLength=function(){this._length=-1},Object.defineProperty(e.prototype,"length",{get:function(){if(this._length<0)if(this._length=0,this._xml)for(var t in this._xml)this._length++;else for(var t in this)e.systemKeys.hasOwnProperty(t)||this._length++;return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Length",{get:function(){return this.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){var t=new Array;if(this._xml)for(var i in this._xml)t.push(i);else for(var i in this)e.systemKeys.hasOwnProperty(i)||t.push(i);return t},enumerable:!0,configurable:!0}),e.prototype.Dispose=function(){this._changedFuncList&&(this._changedFuncList.Clear(),this._changedFuncList=null)},Object.defineProperty(e.prototype,"changedFuncList",{get:function(){return null==this._changedFuncList&&(this._changedFuncList=new Arr),this._changedFuncList},enumerable:!0,configurable:!0}),e.prototype.Changed=function(t,e,i){var n=this;this._risingChanged||(this._risingChanged=!0,this._changedFuncList&&this._changedFuncList.length>0&&this._changedFuncList.Each(function(r){try{r?r(t,e,i,n):Js.Trace("Error:Changed func fi empty")}catch(o){Js.Trace(o)}}))},e.systemKeys={_xml:!0,$hashCode:!0,hashCode:!0,__class__:!0,__types__:!0,_gsKey:!0,Remove:!0,_length:!0,constructor:!0,CreateGS:!0,CreateGSS:!0,s:!0,Set:!0,g:!0,Get:!0,Clear:!0,Exists:!0,GetName:!0,GetValue:!0,GetIndex:!0,EachKey:!0,Each:!0,ResetLength:!0,length:!0,Length:!0,keys:!0,Dispose:!0,_changedFuncList:!0,changedFuncList:!0,Changed:!0,_staticData:!0,Listen:!0,ListenArray:!0,Text:!0,CopyTo:!0,GetPageSize:!0,GetPage:!0,Take:!0,Where:!0,Copy:!0,Count:!0,Any:!0,RemoveAll:!0,All:!0,FirstOrDefault:!0,Max:!0,Min:!0,MaxItem:!0,toString:!0,setProperty:!0,GetOrAdd:!0,_parent:!0,Parent:!0,_sortDesc:!0,_sortKey:!0,_names:!0,DoChanged:!0,ItemDoChanged:!0,OnAdd:!0,OnRemove:!0,OnChanged:!0,OnAddSplice:!0,OnRemoveSplice:!0,OnChangedSplice:!0,ListenEmpty:!0,Sum:!0,Select:!0,ToArray:!0,OrderBy:!0,GroupBy:!0,Add:!0,AddKey:!0,_risingChanged:!0,OnListAddList:!0,OnRemoveList:!0,undefined:!0,OnChangedList:!0,Reverse:!0},e}(egret.HashObject);__reflect(Dictionary.prototype,"Dictionary"),window.Dictionary=Dictionary;var Sx=function(t){function e(){var i=t.call(this)||this;i.that=i,i.showTop50=!1,i.base=!1,i.isLoaded=!1,i.guideX=0,i.guideY=0,i.guidePos=0,i.warn=!0,i.sxIndex=0,i.showTipWarn=!0,i.continueGuide=!1,i._depth=0,i.graphicsed=!1,i.checkEventAlpha=!1,i.autoDispose=!0,i._x=0,i._y=0,i._visible=!0,i.disposed=!1,i.__width=-1,i.__height=-1,i._mouseChildren=!0,i._mouseEnabled=!0,i._align=0,i._filters=null,e.index++,i.sxIndex=e.index,i.addEventListenerSx(egret.Event.REMOVED,e.OnRemove),i.touchEnabled=!1;try{i.warn&&Js&&Js.showTrace&&NForm.SetTimeout(100,function(){i.warn&&(i.disposed||null!=i.parent||(Js.Trace("Out Sx: "+i.sxIndex),Js.Trace(i)))})}catch(n){}return i}return __extends(e,t),e.prototype.SetAutoHide=function(t){void 0===t&&(t=!1),this.showTop50=t,NForm.AddHandleAutoHide(this)},Object.defineProperty(e.prototype,"depth",{get:function(){return this._depth},set:function(t){var e=this;if(this._depth=t,this.parent){var i=this.parent.$children.sort(function(t,e){var i=t,n=e;return i._depth-n._depth}),n=0;i.forEach(function(t){e.parent.setChildIndex(t,n),n++}.bind(this))}},enumerable:!0,configurable:!0}),e.prototype.HandleAutoHide_Hide=function(){this.visible=!1},e.prototype.HandleAutoHide_Show=function(){this.visible=!0},e.prototype.HandleAutoHide=function(){if(this.disposed)return!1;if(this.visible){var t=this.globalX;if(t<-e.autoHideOffset||t>NForm.width+e.autoHideOffset)return this.HandleAutoHide_Hide(),!1;var i=this.globalY;return i<-e.autoHideOffset||i>NForm.height+e.autoHideOffset?(this.HandleAutoHide_Hide(),!1):!0}var t=this.globalX,i=this.globalY;return t>=-e.autoHideOffset&&t<=NForm.width+e.autoHideOffset&&i>=-e.autoHideOffset&&i<=NForm.height+e.autoHideOffset?(this.HandleAutoHide_Show(),!0):!1},e.prototype.Add=function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),!this.disposed){if(null==t)return!1;var r=null;if(r="string"==typeof t?Assert.Img(t):t,0!=i&&(r.x=i),0!=n&&(r.y=n),r instanceof e&&r.disposed)return Js.TraceDmx("disposed obj added"),!1;if(this.addChild(r),r instanceof e){var o=r;if(o.depth!=Number.MIN_VALUE)for(var s=this.numChildren-1;s>=0;s--){var a=this.getChildAt(s);if(a instanceof e&&!a.disposed);}}return this.ResetWidthHeight(),1==r.align?r.PutCenter():2==r.align&&r.PutRight(),!0}return t instanceof e?t.Dispose():t instanceof Bx&&t.Dispose(),!1},e.prototype.LazyAdd=function(t){var e=this;NForm.LazyCall(function(){e.disposed||e.Add(t,0,0)})},e.prototype.Remove=function(t){if(t)try{t.RemoveMe()}catch(e){Js.Trace(e)}},e.prototype.RemoveDisplayObject=function(t){if(t)try{this.disposed||t&&t.parent&&t.parent.removeChild(t),t instanceof egret.Shape&&t.graphics.clear()}catch(e){Js.Trace(e)}},Object.defineProperty(e.prototype,"buttonMode",{set:function(t){this.touchEnabled=!0},enumerable:!0,configurable:!0}),e.prototype.Dispose=function(){if(!this.disposed){if(this.disposed=!0,this.graphicsed&&this.DrawClear(),this.clearEventListener(),this.listenerArr=null,this.onDisposeList){var t=this.onDisposeList;this.onDisposeList=null,t.Each(function(t){try{t()}catch(e){Js.Trace(e)}}),t.Clear()}this.OnLoadList&&(this.OnLoadList.Clear(),this.OnLoadList=null),this.onShowList&&(this.onShowList.Clear(),this.onShowList=null),this.onHideList&&(this.onHideList.Clear(),this.onHideList=null),this.OnPosList&&(this.OnPosList.Clear(),this.OnPosList=null),this.sxInfo&&this.sxInfo.Dispose(),this.that=null;for(var e=this.numChildren-1;e>=0;e--)try{var i=this.getChildAt(e);this.removeChild(i)}catch(n){}}},e.prototype.IsBG=function(){this.touchEnabled=!0},e.prototype.SetupGraphics=function(){null==this.graphics&&(this.graphicsed=!0,this.graphics=new egret.Shape,this.Add(this.graphics))},e.prototype.DrawRect=function(t,e,i,n,r,o){this.SetupGraphics(),this.graphics.graphics.beginFill(r,o),this.graphics.graphics.drawRect(t,e,i,n),this.graphics.graphics.endFill()},e.prototype.DrawRoundRect=function(t,e,i,n,r,o,s){if(this.SetupGraphics(),1==r.length)this.graphics.graphics.beginFill(r[0],o[0]);else{var a=new egret.Matrix;if(a.createGradientBox(i,n,.5*Math.PI,t,e),o.length<r.length)for(var l=0,h=r.length;h>l;l++)o[l]=1;this.graphics.graphics.beginGradientFill(egret.GradientType.LINEAR,r,o,[0,255],a)}this.graphics.graphics.drawRoundRect(t,e,i,n,s,s),this.graphics.graphics.endFill()},e.prototype.DrawLine=function(t,e,i,n,r,o,s){this.SetupGraphics(),this.graphics.graphics.lineStyle(r,o,s),this.graphics.graphics.moveTo(t,e),this.graphics.graphics.lineTo(i,n)},e.prototype.DrawArc=function(t,e,i,n,r,o,s){if(this.SetupGraphics(),1==o.length)this.graphics.graphics.beginFill(o[0],s[0]);else{var a=new egret.Matrix;if(a.createGradientBox(i,i,.5*Math.PI,t,e),s.length<o.length)for(var l=0,h=o.length;h>l;l++)s[l]=1;this.graphics.graphics.beginGradientFill(egret.GradientType.LINEAR,o,s,[0,255],a)}this.DrawFan(i,Math.PI*n/180,Math.PI*r/180),this.graphics.graphics.endFill()},e.prototype.DrawCircle=function(t,e,i,n,r){if(this.SetupGraphics(),1==n.length)this.graphics.graphics.beginFill(n[0],r[0]);else{var o=new egret.Matrix;if(o.createGradientBox(i,i,.5*Math.PI,t,e),r.length<n.length)for(var s=0,a=n.length;a>s;s++)r[s]=1;this.graphics.graphics.beginGradientFill(egret.GradientType.LINEAR,n,r,[0,255],o)}this.graphics.graphics.drawCircle(t,e,i),this.graphics.graphics.endFill()},e.prototype.DrawFan=function(t,e,i){var n,r,o=.12,s=Math.ceil((i-e)/o),a=e;for(this.graphics.graphics.lineStyle(1,16777215,1),this.graphics.graphics.moveTo(t,t),n=t*(1+Math.cos(e)),r=t*(1-Math.sin(e)),this.graphics.graphics.lineTo(n,r);s>0;)1!=s?(n=t*(1+Math.cos(a+o)),r=t*(1-Math.sin(a+o))):(n=t*(1+Math.cos(i)),r=t*(1-Math.sin(i))),this.graphics.graphics.lineTo(n,r),a+=o,s--;this.graphics.graphics.lineTo(t,t)},e.prototype.DrawSixth=function(t,e,i,n,r,o,s,a){if(this.SetupGraphics(),1==s.length)this.graphics.graphics.beginFill(s[0],a[0]);else{var l=new egret.Matrix;if(l.createGradientBox(i,i,.5*Math.PI,t,e),a.length<s.length)for(var h=0,c=s.length;c>h;h++)a[h]=1;this.graphics.graphics.beginGradientFill(egret.GradientType.LINEAR,s,a,[0,255],l)}var u,d;this.graphics.graphics.lineStyle(r,n,o);for(var h=0;6>=h;h++){var p=30+360*h/6;u=t+i*Math.cos(p*(3.1415926/180)),d=e+i*Math.sin(p*(3.1415926/180)),0==h?this.graphics.graphics.moveTo(u,d):this.graphics.graphics.lineTo(u,d)}this.graphics.graphics.endFill()},e.prototype.DrawClear=function(){this.graphics&&this.graphics.graphics.clear()},Object.defineProperty(e,"clickEvent",{get:function(){return e._clickEvent},enumerable:!0,configurable:!0}),e.prototype.Click=function(t){var e=this;this.addEventListenerSx(egret.TouchEvent.TOUCH_TAP,function(i){try{var n=new Date,r=n.getTime()-NForm.downDt.getTime();if(r>=1500)return;if(e.hitAreaRect){var o=i.stageX,s=i.stageY;NForm.NARROW?s+=NForm.stageHeightOffset/2:NForm.WIDE&&(s/=NForm.stageScale),o>=e.globalX+e.hitAreaRect.x&&o<=e.globalX+e.hitAreaRect.x+e.hitAreaRect.width&&s>=e.globalY+e.hitAreaRect.y&&s<=e.globalY+e.hitAreaRect.y+e.hitAreaRect.height&&t(i)}else try{t(i)}catch(a){Js.Trace(a)}}catch(a){Js.Trace(a)}})},e.prototype.DblClick=function(t){},e.prototype.Over=function(t){var e=this;this.addEventListenerSx(egret.TouchEvent.TOUCH_BEGIN,function(i){try{if(e.hitAreaRect){var n=i.stageX,r=i.stageY;NForm.NARROW?r+=NForm.stageHeightOffset/2:NForm.WIDE&&(r/=NForm.stageScale),n>=e.globalX+e.hitAreaRect.x&&n<=e.globalX+e.hitAreaRect.x+e.hitAreaRect.width&&r>=e.globalY+e.hitAreaRect.y&&r<=e.globalY+e.hitAreaRect.y+e.hitAreaRect.height&&t(i)}else try{t(i)}catch(o){Js.Trace(o)}}catch(o){Js.Trace(o)}})},e.prototype.OutAndUp=function(t){var e=this;this.addEventListenerSx(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,function(i){try{if(e.hitAreaRect){var n=i.stageX,r=i.stageY;NForm.NARROW?r+=NForm.stageHeightOffset/2:NForm.WIDE&&(r/=NForm.stageScale),n>=e.globalX+e.hitAreaRect.x&&n<=e.globalX+e.hitAreaRect.x+e.hitAreaRect.width&&r>=e.globalY+e.hitAreaRect.y&&r<=e.globalY+e.hitAreaRect.y+e.hitAreaRect.height&&t(i)}else try{t(i)}catch(o){Js.Trace(o)}}catch(o){Js.Trace(o)}})},e.prototype.Move=function(t){var e=this;this.addEventListenerSx(egret.TouchEvent.TOUCH_MOVE,function(i){try{if(e.hitAreaRect){var n=i.stageX,r=i.stageY;NForm.NARROW?r+=NForm.stageHeightOffset/2:NForm.WIDE&&(r/=NForm.stageScale),n>=e.globalX+e.hitAreaRect.x&&n<=e.globalX+e.hitAreaRect.x+e.hitAreaRect.width&&r>=e.globalY+e.hitAreaRect.y&&r<=e.globalY+e.hitAreaRect.y+e.hitAreaRect.height&&t(i)}else try{t(i)}catch(o){Js.Trace(o)}}catch(o){Js.Trace(o)}})},e.prototype.Down=function(t){var e=this;this.addEventListenerSx(egret.TouchEvent.TOUCH_BEGIN,function(i){try{if(e.hitAreaRect){var n=i.stageX,r=i.stageY;NForm.NARROW?r+=NForm.stageHeightOffset/2:NForm.WIDE&&(r/=NForm.stageScale),n>=e.globalX+e.hitAreaRect.x&&n<=e.globalX+e.hitAreaRect.x+e.hitAreaRect.width&&r>=e.globalY+e.hitAreaRect.y&&r<=e.globalY+e.hitAreaRect.y+e.hitAreaRect.height&&t(i)}else try{t(i)}catch(o){Js.Trace(o)}}catch(o){Js.Trace(o)}})},e.prototype.Up=function(t){var e=this;this.addEventListenerSx(egret.TouchEvent.TOUCH_END,function(i){try{if(e.hitAreaRect){var n=i.stageX,r=i.stageY;NForm.NARROW?r+=NForm.stageHeightOffset/2:NForm.WIDE&&(r/=NForm.stageScale),n>=e.globalX+e.hitAreaRect.x&&n<=e.globalX+e.hitAreaRect.x+e.hitAreaRect.width&&r>=e.globalY+e.hitAreaRect.y&&r<=e.globalY+e.hitAreaRect.y+e.hitAreaRect.height&&t(i)}else try{t(i)}catch(o){Js.Trace(o)}}catch(o){Js.Trace(o)}})},e.prototype.Flatten=function(){},e.prototype.UnFlatten=function(){},e.prototype.SetChildrenMouseDisabled=function(){return this.touchEnabled=!1,this.touchChildren=!1,this},e.prototype.SetChildrenMouseEnabled=function(){return this.touchEnabled=!0,this.touchChildren=!0,this},e.prototype.SetHitArea=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var n=new egret.Shape;return n.graphics.beginFill(0),n.graphics.drawRect(0,0,t.width,t.height),n.graphics.endFill(),n.alpha=0,this.Add(n,t.x,t.y),this.hitArea=n,i&&(this.hitAreaRect=t),e&&(n.alpha=.5),this},e.prototype.addEventListenerSx=function(t,e,i,n,r){void 0===i&&(i=!1),void 0===n&&(n=0),void 0===r&&(r=!1),this.addEventListener(t,e,this,i,n),null==this.listenerArr&&(this.listenerArr=new Arr);var o={type:t,listener:e};this.listenerArr.Add(o),t!=egret.Event.REMOVED&&(this.mouseEnabled=!0)},e.prototype.removeEventListenerSx=function(t,e,i){if(void 0===i&&(i=!1),this.removeEventListener(t,e,this),this.listenerArr){this.listenerArr.Clear();for(var n=0,r=this.listenerArr.length;r>n;n++){var o=this.listenerArr[n];if(o.type==t&&o.listener==e){this.listenerArr.removeItemAt(n);break}}}},e.prototype.onlyRemoveEventListener=function(e,i,n){void 0===n&&(n=!1),t.prototype.removeEventListener.call(this,e,i,this)},e.prototype.clearEventListener=function(){var t=this;this.listenerArr&&this.listenerArr.length>0&&(this.listenerArr.Each(function(e){t.onlyRemoveEventListener(e.type,e.listener)}),this.listenerArr.Clear())},Object.defineProperty(e.prototype,"globalX",{get:function(){return NForm.stageX>0?this.localToGlobal(0,0).x/NForm.stageScale-NForm.stageX/NForm.stageScale:this.localToGlobal(0,0).x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalY",{get:function(){return NForm.stageX>0?this.localToGlobal(0,0).y/NForm.stageScale:this.localToGlobal(0,0).y-NForm.stageY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{set:function(t){this.scaleX=.01*t.x,this.scaleY=.01*t.y,this.ResetWidthHeight()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){return this.visible},set:function(t){this.visible=t},enumerable:!0,configurable:!0}),e.prototype.Show=function(){(!this.followSx||this.followSx.visible)&&(this.visible=!0)},e.prototype.Hide=function(){this.visible=!1},Object.defineProperty(e.prototype,"tops",{get:function(){return this._top?this._top:this.parent&&this.parent instanceof e?this.parent.tops:this.parent&&this.parent.parent&&this.parent.parent instanceof e?this.parent.parent.tops:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this.SxSetX(t)},enumerable:!0,configurable:!0}),e.prototype.SxSetX=function(e){var i=this;this._x=e,t.prototype.$setX.call(this,e),this.OnPosList&&this.OnPosList.Each(function(t){try{t(i.x,i.y)}catch(e){Js.Trace(e)}}.bind(this))},Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this.SxSetY(t)},enumerable:!0,configurable:!0}),e.prototype.SxSetY=function(e){var i=this;this._y=e,t.prototype.$setY.call(this,e),this.OnPosList&&this.OnPosList.Each(function(t){t(i.x,i.y)}.bind(this))},Object.defineProperty(e.prototype,"position",{get:function(){return new Vector2(this._x,this._y)},set:function(t){this.Pos(t.x,t.y)},enumerable:!0,configurable:!0}),e.prototype.Pos=function(t,e){return null==this.parent?(this.x!=t&&(this.x=t),this.y!=e&&(this.y=e)):(this.x!=t||this.y!=e)&&(this.x=t,this.y=e),this},e.prototype.Scale=function(t,e){return this.scale=new Vector2(t,e),this},e.prototype.PutCenter=function(){t.prototype.$setX.call(this,this._x-this.width/2)},e.prototype.PutRight=function(){t.prototype.$setX.call(this,this._x-this.width)},e.prototype.OnPos=function(t){null==this.OnPosList&&(this.OnPosList=new Arr),this.OnPosList.Add(t)},e.prototype.OnPosSplice=function(t){this.OnPosList.Remove(t)},e.prototype.RemoveMe=function(){try{if(!this.disposed)if(this.parent){this.parent;this.parent.removeChild(this)}else this.autoDispose&&this.Dispose()}catch(t){Js.Trace(t)}},Object.defineProperty(e.prototype,"topVisible",{get:function(){return this.visible?this.parent&&this.parent instanceof e?this.parent.topVisible:this.parent&&this.parent.parent&&this.parent.parent instanceof e?this.parent.parent.topVisible:this.parent?this.parent instanceof egret.Stage?!0:this.parent.visible:!1:!1},enumerable:!0,configurable:!0}),e.prototype.OnDispose=function(t){null==this.onDisposeList&&(this.onDisposeList=new Arr),this.onDisposeList.Add(t)},e.OnRemove=function(t){t.currentTarget==t.target&&t.target instanceof e&&t.target.autoDispose&&t.target.Dispose()},e.prototype.OnShow=function(t){null==this.onShowList&&(this.onShowList=new Arr),this.onShowList.Add(t)},e.prototype.OnHide=function(t){null==this.onHideList&&(this.onHideList=new Arr),this.onHideList.Add(t)},e.prototype.OnShowSplice=function(t){this.onShowList.Remove(t)},e.prototype.OnHideSplice=function(t){this.onHideList.Remove(t)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e,t.prototype.$setVisible.call(this,e),e?this.onShowList&&this.onShowList.Each(function(t){try{t()}catch(e){Js.Trace(e)}}):this.onHideList&&this.onHideList.Each(function(t){try{t()}catch(e){Js.Trace(e)}})},enumerable:!0,configurable:!0}),e.prototype.To=function(t,e,i,n){return void 0===e&&(e=1e3),void 0===i&&(i=null),void 0===n&&(n=null),ActLite.To(this,t,e,i,n)},e.prototype.ToPath=function(t,e,i){var n=this;void 0===e&&(e=null),void 0===i&&(i=null);var r=0,o=function(){if(r>=t.length)o=null,e&&e();else{var s=t[r];r++;var a=s.time;delete s.time,n.To(s,a,function(){o()},i)}};o()},e.prototype.CallLoad=function(){this.disposed||this.OnLoadList&&this.OnLoadList.Each(function(t){try{t()}catch(e){Js.Trace(e)}})},e.prototype.OnLoaded=function(t){null==this.OnLoadList&&(this.OnLoadList=new Arr),this.OnLoadList.Add(t)},e.prototype.Follow=function(t,e,i,n,r,o){var s=this;void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=0),void 0===r&&(r=!0),void 0===o&&(o=!0),this.followSx=t,null==e&&(e=0),null==i&&(i=0),t.OnPos(function(t,r){n>0?NForm.SetTimeout(n,function(){e instanceof Function?s.x=e(t):s.x=t+e,i instanceof Function?s.y=i(r):s.y=r+i}):(e instanceof Function?s.x=e(t):s.x=t+e,i instanceof Function?s.y=i(r):s.y=r+i)}),e instanceof Function?this.x=e(t.x):this.x=t.x+e,i instanceof Function?this.y=i(t.y):this.y=t.y+i,r&&t.OnDispose(function(){s.Dispose()}),o&&(t.OnShow(function(){s.Show()}),t.OnHide(function(){s.Hide()}),t.visible?this.Show():this.Hide())},Object.defineProperty(e,"TipFunc",{get:function(){return this._tipFunc},set:function(t){this._tipFunc=t},enumerable:!0,configurable:!0}),e.prototype.Tip=function(t,i,n){var r=this;void 0===i&&(i=null),void 0===n&&(n=null),e.TipFunc&&NForm.LazyCall(function(){e.TipFunc(r,t,i,n)})},e.prototype.Width=function(){return this.__width<0&&(this.__width=t.prototype.$getWidth.call(this)),this.__width},Object.defineProperty(e.prototype,"width",{get:function(){return this.Width()},set:function(e){t.prototype.$setWidth.call(this,e),this.ResetWidthHeight()},enumerable:!0,configurable:!0}),e.prototype.Height=function(){return this.__height<0&&(this.__height=t.prototype.$getHeight.call(this)),this.__height},Object.defineProperty(e.prototype,"height",{get:function(){return this.Height()},set:function(e){t.prototype.$setHeight.call(this,e),this.ResetWidthHeight()},enumerable:!0,configurable:!0}),e.prototype.ResetWidthHeight=function(){this.__width=-1,this.__height=-1,this.parent&&this.parent.hasOwnProperty("ResetWidthHeight")&&Object(parent).ResetWidthHeight(),this.measure()},e.prototype.RemoveAll=function(){for(var t=this.numChildren-1;t>=0;t--)try{var i=this.getChildAt(t);if(i instanceof e&&!i.disposed&&i.base)continue;this.removeChildAt(t)}catch(n){}},Object.defineProperty(e.prototype,"mouseChildren",{get:function(){return this._mouseChildren},set:function(t){this._mouseChildren=t,this.touchChildren=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseEnabled",{get:function(){return this._mouseEnabled},set:function(t){this._mouseEnabled=t,this.touchEnabled=t,this.touchThrough=!t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){1==t?this.PutCenter():2==t&&this.PutRight(),this._align=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{set:function(t){this._filters=t;for(var e=0,i=this.numChildren;i>e;e++)this.getChildAt(e).filters=t},enumerable:!0,configurable:!0}),e.prototype.GetTemp=function(t){return null==this.sxInfo?0:this.sxInfo[t]},e.prototype.SetTemp=function(t,e){null==this.sxInfo&&(this.sxInfo=new Listx),this.sxInfo[t]=e},e.prototype.RegisterGuide=function(t,i){void 0===i&&(i=0),e.RegisterGuideFunc&&e.RegisterGuideFunc(this,t,i)},e.index=0,e.autoHideOffset=100,e._clickEvent=new egret.TouchEvent(egret.TouchEvent.TOUCH_TAP),e}(eui.Group);__reflect(Sx.prototype,"Sx",["Ix"]),window.Sx=Sx;var Observer=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.g=function(t){return this.Get(t)},e.prototype.Get=function(e){var i=null;return this.Exists(e)?i=t.prototype.Get.call(this,e):this._xml&&(i=this._xml[e]),i},e.prototype.setProperty=function(t,e){this.Set(t,e)},e.prototype.Dispose=function(){this._xml&&(this._xml=null),t.prototype.Dispose.call(this)},e}(Dictionary);__reflect(Observer.prototype,"Observer"),window.Observer=Observer;var NLabel=function(t){function e(i,n,r,o,s,a,l){void 0===i&&(i=""),void 0===n&&(n=-1),void 0===r&&(r=!1),void 0===o&&(o=-1),void 0===s&&(s=0),void 0===a&&(a=-1),void 0===l&&(l=!1);var h=t.call(this)||this;if(h._color=0,h._bold=!1,h._size=13,h._italic=!1,h._stroke=0,h._strokeColor=0,h._key="",h._val="",h.htmlCustom=!1,0>n&&(n=e.defaultColor),0>a&&(a=e.defaultColor),s>20)throw new Error("Error NLabel stroke");var c=0;return c=Parms.phone?e.phoneFontSize:e.fontSize,c>o&&(o=c),l&&(h.bg=new Sx,h.Add(h.bg)),h.textF=new egret.TextField,h.strokeColor=a,h.stroke=s,h.color=n,h.bold=r,h.size=o,h.textF.scaleX=.5,h.textF.scaleY=.5,Strx.IsFull(e.font)&&(h.textF.fontFamily=e.font),h.Add(h.textF),h.val=i,h.mouseChildren=!1,h}return __extends(e,t),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this.textF.textColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bold",{get:function(){return this._bold},set:function(t){this._bold=t,this.textF.bold=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){this._size=t,this.textF.size=2*t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"italic",{get:function(){return this._italic},set:function(t){this._italic=t,this.textF.italic=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(t){this._stroke=t,t>0&&(this.textF.stroke=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeColor",{get:function(){return this._strokeColor},set:function(t){this._strokeColor=t,t>0&&(this.textF.strokeColor=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this._key},set:function(t){return this._key=t,t.length>=3&&"@"==t.substr(0,1)?(null==this.keyNum&&(this.keyNum=new Sx,this.Add(this.keyNum)),this.keyNum.RemoveAll(),this.keyNum.Add(new NNum(t.substr(2,t.length-2),t.substr(1,1))),void(this.textF.x=this.keyNum.width+2)):(null==this.keyTextField&&(this.keyTextField=new NColorText(Lang.PT(this._key)+"：",this.bold,this.size,this.keyType),this.Add(this.keyTextField),this.keyTextField.size=this.size),Lang.type==LangType.Chs||Lang.type==LangType.Cht?this.keyTextField.val=Lang.PT(this._key)+"：":this.keyTextField.val=Lang.PT(this._key)+": ",void(this.textF.x=this.keyTextField.width))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"val",{get:function(){return this._val},set:function(t){if(!this.disposed){null==t&&(t=""),this._val=t;var e=t;this.textF.multiline||e.indexOf("</")>-1?(this.textF.textFlow=this.GetHtml(e),this.HandleHtmlCustom()):this.textF.text=Lang.PT(e),this.textF.multiline&&this.Add("gridlistempty",this.textF.width/2,this.textF.height/2),1==this.align?this.PutCenter():2==this.align&&this.PutRight()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"html",{set:function(t){if(!this.disposed){null==t&&(t=""),this._val=t;var e=t;this.textF.textFlow=this.GetHtml(e),this.HandleHtmlCustom(),this.textF.width=2*this.textF.textWidth+15,this.textF.height=2*this.textF.textHeight+5,1==this.align?this.PutCenter():2==this.align&&this.PutRight()}},enumerable:!0,configurable:!0}),e.prototype.GetHtml=function(t){var i=this;e.htmlTextParser||(e.htmlTextParser=new egret.HtmlTextParser),t=t.toString().replace(/<p>/g,"").replace(/<\/p>/g,"\n");var n=e.htmlTextParser.parser(Lang.PT(t)),r=0;return n.forEach(function(t){if(t.text.indexOf("[")>-1&&t.text.indexOf("]")>-1){for(var o=[],s=!1,a={text:[],name:null,atts:[]},l=0,h=t.text.length;h>l;l++){var c=t.text.charAt(l);if("["==c)s=!0;else if("]"==c){var u=a.text.join("");u.split(" ").forEach(function(t){if(t.IsFull()){var e=t.split("="),i=e[0],n="";e.length>1&&(n=e[1]),n.IsFull()?a.atts.push({name:i,val:n}):a.name=i}}),u.indexOf("/")>-1,s=!1}else s?a.text.push(c):o.push(c)}if("center/center"==a.name)t.style.size>0?t.text=e.HtmlAlignCenter(o.join(""),i.textF.width,t.style.size):t.text=e.HtmlAlignCenter(o.join(""),i.textF.width,i.size);else if("hr"==a.name||"hr/hr"==a.name){var d={text:"\n"};n.splice(r,0,d),r++,t.text="",i.htmlCustom=!0}else"bg"==a.name||"bg/bg"==a.name?(t.style={target:o.join("")},t.text="\f",i.htmlCustom=!0):"underline"==a.name||"underline/underline"==a.name?(t.style.underline=!0,t.text=o.join(""),i.htmlCustom=!0):t.text=o.join("")}r++}.bind(this)),n},e.prototype.HandleHtmlCustom=function(){var t=this;this.htmlCustom&&NForm.LazyCall(function(){if(!t.disposed)for(var e=t.textF.$renderNode.drawData,i=0,n=e.length-4;n>i;i+=4){var r=e[i],o=e[i+1],s=e[i+2],a=e[i+3];if("\n"==s||""==s){var l=new N9("line");l.alpha=.8,l.width=t.width,t.Add(l,r,o/2),e[i+3]=""}else if("\n\f"==s||"\f"==s){var h=a.target.split(":"),c=Assert.Img(h[0]),u=0,d=0;h.length>1&&(u=h[1].ToInt()),h.length>2&&(d=h[2].ToInt()),t.bg.Add(c,r+u,o/2-t.size/2+d),e[i+3]=""}}})},Object.defineProperty(e.prototype,"valInt",{get:function(){return this.val.ToInt()},set:function(t){this.val=t.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){t.prototype.SxSetX.call(this,e),1==this.align?this.PutCenter():2==this.align&&this.PutRight()},enumerable:!0,configurable:!0}),e.prototype.Bind=function(t,e,i){var n=this;return void 0===i&&(i=null),t?(this.bindEmptyP&&this.Remove(this.bindEmptyP),this.bindEmptyP=new Sx,this.Add(this.bindEmptyP),this.item=t,this.act=i,this.bindKey=e,void t.ListenArray(function(){null==i?n.val=n.item.g(n.bindKey):n.val=n.act(n.item.g(n.bindKey))}.bind(this),e.split(","),this.bindEmptyP)):void(i?this.val=i(""):this.val="")},e.prototype.OnClick=function(t){this.act=t,this.mouseEnabled=!0,this.buttonMode=!0,this.Click(function(){t()})},Object.defineProperty(e.prototype,"width",{get:function(){return this.disposed?0:this.textF.textWidth/2+5+(null==this.keyTextField?0:this.keyTextField.width)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.disposed?0:this.val.IsEmpty()?this.size:this.textF.textHeight/2},enumerable:!0,configurable:!0}),e.prototype.SetMultiline=function(t,e){void 0===e&&(e=5),this.textF.hasOwnProperty("leading")&&(this.textF.leading=e),this.textF.multiline=!0,this.textF.width=2*t,this.textF.lineSpacing=2*e},e.prototype.Dispose=function(){t.prototype.Dispose.call(this),this.act=null,this.keyTextField=null,this.textF=null,this.keyNum=null,this.bindEmptyP=null,this.item=null,this.faces=null},e.prototype.SetFaceVal=function(t){null==this.faces&&(this.faces=[]),this.faces.forEach(function(t){t.RemoveMe()}),this.faces.length=0;var e="　";t=t.replace(/　/g," ");var i=[],n=t.match(/\{f\d{1,2}\}/g);n&&(i=i.concat(n)),t=t.replace(/\{f\d{1,2}\}/g,"<font size='13'>"+e+"  </font>"),this.val=t;for(var r=this.textF.text,o=[],s=0;s<r.length;s++)r.charAt(s)==e&&o.push(s);for(var a=0;a<o.length;a++);},e.HtmlAlignCenter=function(t,e,i){return t=t.replace(/<\/?.+?\/?>/g,""),"".PaddingLeft(" ",(e-t.TrueLength()*i/2)/(i/2))+t},e.font="",e.defaultColor=5254423,e.fontSize=15,e.phoneFontSize=15,e}(Sx);__reflect(NLabel.prototype,"NLabel"),window.NLabel=NLabel;var Vector2=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.toString=function(){return this.x+"_"+this.y},t.prototype.Equals=function(t){return this.x==t.x&&this.y==t.y},t.prototype.Move=function(e,i){return new t(this.x+e,this.y+i)},t.prototype.Multi=function(e){return new t(this.x*e,this.y*e)},t.prototype.Distance=function(t){var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},t.New=function(e,i){return new t(e,i)},t}();__reflect(Vector2.prototype,"Vector2"),window.Vector2=Vector2;var NScrollPanel=function(t){function e(e,i,n){void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=50);var r=t.call(this)||this;return r.scrollerEndIndex=0,r._disableScroll=!1,r._disableMask=!1,r.view=new Sx,r.w=e,r.h=i,r.updateInterval=n,r.scroller=new eui.Scroller,r.scroller.width=e,r.scroller.height=i,r.scroller.viewport=r.view,r.Add(r.scroller),n>0&&(r.scrollerEnd=r.ScrollerEnd.bind(r),r.scroller.addEventListener(egret.Event.CHANGE,r.scrollerEnd,r),r.Up(r.scrollerEnd)),r
}return __extends(e,t),e.prototype.ScrollerEnd=function(t){var e=this;if(!this.disposed){this.scrollerEndIndex++;var i=this.scrollerEndIndex,n={scrollH:this.scroller.viewport.scrollH,scrollV:this.scroller.viewport.scrollV};NForm.SetTimeout(this.updateInterval,function(){e.disposed||(e.scrollerEndIndex==i||i%12==0)&&e.onScrollerEndList&&e.onScrollerEndList.forEach(function(t){t(n)})}.bind(this))}},e.prototype.OnScrollerEnd=function(t){this.onScrollerEndList||(this.onScrollerEndList=[]),this.onScrollerEndList.push(t)},e.prototype.ScrollerTouchEnd=function(t){},e.prototype.Add=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var r=null;r="string"==typeof e?Assert.Img(e):e;return null==this.view||this.view==r||r instanceof eui.Scroller?t.prototype.Add.call(this,r,i,n):(this.view.Add(r,i,n),!0)},e.prototype.RemoveAll=function(){if(null==this.view)return t.prototype.RemoveAll.call(this);for(var e=this.view.numChildren-1;e>=0;e--)try{var i=this.view.getChildAt(e);if(i instanceof Sx&&!i.disposed&&i.base)continue;this.view.removeChildAt(e)}catch(n){}},e.prototype.BaseAdd=function(e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),t.prototype.Add.call(this,e,i,n)},e.prototype.Resize=function(t,e){this.scroller.width=t,this.scroller.height=e},e.prototype.DisableScroll=function(){this.scroller.scrollPolicyV=eui.ScrollPolicy.OFF,this.scroller.scrollPolicyH=eui.ScrollPolicy.OFF,this._disableScroll=!0},e.prototype.DisableScrollX=function(){this.scroller.scrollPolicyH=eui.ScrollPolicy.OFF},e.prototype.DisableScrollY=function(){this.scroller.scrollPolicyV=eui.ScrollPolicy.OFF},e.prototype.EnableScroll=function(){this.scroller.scrollPolicyV=eui.ScrollPolicy.AUTO,this.scroller.scrollPolicyH=eui.ScrollPolicy.AUTO},e.prototype.EnableScrollX=function(){this.scroller.scrollPolicyH=eui.ScrollPolicy.AUTO},e.prototype.EnableScrollY=function(){this.scroller.scrollPolicyV=eui.ScrollPolicy.AUTO},e.prototype.DisableMask=function(){this.DisableScroll(),this.scroller.viewport.scrollEnabled=!1,this._disableMask=!0},Object.defineProperty(e.prototype,"tween",{set:function(t){t?this.scroller.throwSpeed=1:this.scroller.throwSpeed=0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounces",{set:function(t){this.scroller.bounces=t},enumerable:!0,configurable:!0}),e.prototype.visibleInScrollV=function(t,e){return t.y>=this.scroller.viewport.scrollV&&t.y<=this.scroller.viewport.scrollV+this.h||t.y+e>=this.scroller.viewport.scrollV&&t.y+e<=this.scroller.viewport.scrollV+this.h?!0:!1},e.prototype.visibleInScrollH=function(t,e){return t.x>=this.scroller.viewport.scrollH&&t.x<=this.scroller.viewport.scrollH+this.w||t.x+e>=this.scroller.viewport.scrollH&&t.x+e<=this.scroller.viewport.scrollH+this.w?!0:!1},e.prototype.Dispose=function(){this.scroller.removeEventListener(egret.Event.CHANGE,this.scrollerEnd,this),this.onScrollerEndList&&(this.onScrollerEndList.length=0),this.onScrollerEndList=null,this.view&&(this.view.RemoveMe(),this.view.Dispose()),t.prototype.Dispose.call(this)},e}(Sx);__reflect(NScrollPanel.prototype,"NScrollPanel"),window.NScrollPanel=NScrollPanel;var Bx=function(t){function e(i){var n=t.call(this)||this;return n["this"]=n,n.base=!1,n.loaded=!1,n.autoDispose=!0,n._x=0,n._y=0,n.disposed=!1,n._mouseChildren=!0,n._mouseEnabled=!0,n._align=0,n.depth=Number.MIN_VALUE,n.addEventListenerBx(egret.Event.REMOVED,e.OnRemove),i&&n.SetVal(i),n}return __extends(e,t),e.prototype.SetVal=function(t){if(t instanceof egret.Texture)throw new Error("Do not use system Texture");if(t instanceof Textures)this.SetBitmap(t);else if(t.length>=4&&"Res/"==t.substr(0,4))this.SetBitmap(t);else{var e=Assert.assertList[t];e?this.SetBitmap(Textures.GetTextures(e)):(e=RES.getRes(t),e?this.SetBitmap(Textures.GetTextures(e)):Js.showTrace&&Js.Trace("Error Assert Img: "+t))}this.name=t},e.prototype.InfoChanged=function(t,i,n,r,o){var s=this;if(null==a)this.disposed||NForm.SetTimeout(100,function(){s.InfoChanged(t,i,n,r,o)});else if("depth"==t){var a=this.parent;if(a){a.setChildIndex(this,a.numChildren-1);for(var l=a.numChildren-1;l>=0;l--){var h=a.getChildAt(l);if(h instanceof Sx||h instanceof e){var c=h;c.disposed||c.depth>n&&c!=this&&a.setChildIndex(this,l)}}}}},e.OnRemove=function(t){t.target instanceof e&&t.target.autoDispose&&t.target.Dispose()},e.prototype.SetBitmap=function(t){var e=this;if(!this.disposed){if(this.val=t,t instanceof egret.Texture)throw new Error("Do not use system Texture");t instanceof Textures?(t.UseTexture(this),this.loaded=!0,this.loadedFunc&&this.loadedFunc(),this.loadedFuncList&&this.loadedFuncList.Each(function(t){t()})):Src.Read(t,function(t){t?e.SetBitmap(t):(e.loaded=!0,e.loadedFunc&&e.loadedFunc(),e.loadedFuncList&&e.loadedFuncList.Each(function(t){t()}))}.bind(this))}},Object.defineProperty(e.prototype,"bitmapData",{set:function(t){this.disposed||(null==this.bitmapData?this.source=t:this.source!=t&&this.SetBitmap(t))},enumerable:!0,configurable:!0}),e.prototype.Dispose=function(){if(!this.disposed){if(this.disposed=!0,this.textures&&this.textures.UnUseTexture(),this.clearEventListener(),this.listenerArr=null,this.OnDisposeList){var t=this.OnDisposeList;this.OnDisposeList=null,t.Each(function(t){try{t()}catch(e){Js.Trace(e)}}),this.OnDisposeList.Clear()}this.onShowList&&(this.onShowList.Clear(),this.onShowList=null),this.onHideList&&(this.onHideList.Clear(),this.onHideList=null),this.onPosList&&(this.onPosList.Clear(),this.onPosList=null),this.loadedFuncList&&(this.loadedFuncList.Clear(),this.loadedFuncList=null),this.loadedFunc=null}},e.prototype.addEventListenerBx=function(t,e,i,n,r){void 0===i&&(i=!1),void 0===n&&(n=0),void 0===r&&(r=!1),this.addEventListener(t,e,this),null==this.listenerArr&&(this.listenerArr=new Arr);var o={type:t,listener:e};this.listenerArr.Add(o),t!=egret.Event.REMOVED&&(this.mouseEnabled=!0)},e.prototype.removeEventListenerBx=function(t,e,i){if(void 0===i&&(i=!1),this.removeEventListener(t,e,this),this.listenerArr)for(var n=0,r=this.listenerArr.length;r>n;n++){var o=this.listenerArr[n];if(o.type==t&&o.listener==e){this.listenerArr.removeItemAt(n);break}}},e.prototype.onlyRemoveEventListener=function(e,i,n){void 0===n&&(n=!1),t.prototype.removeEventListener.call(this,e,i,this)},e.prototype.clearEventListener=function(){var t=this;this.listenerArr&&this.listenerArr.length>0&&(this.listenerArr.Each(function(e){t.onlyRemoveEventListener(e.type,e.listener)}),this.listenerArr.Clear())},e.prototype.LocalX=function(t){return this.globalToLocal(t,0).x},e.prototype.LocalY=function(t){return this.globalToLocal(0,t).y},Object.defineProperty(e.prototype,"globalX",{get:function(){return this.localToGlobal(0,0).x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalY",{get:function(){return this.localToGlobal(0,0).y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{set:function(t){this.scaleX=.01*t.x,this.scaleY=.01*t.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){return this.visible},enumerable:!0,configurable:!0}),e.prototype.Show=function(){(!this.followSx||this.followSx.visible)&&(this.visible=!0)},e.prototype.Hide=function(){this.visible=!1},Object.defineProperty(e.prototype,"tops",{get:function(){return this._top?this._top:this.parent&&this.parent instanceof Sx?this.parent.tops:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){var i=this;this._x=e,t.prototype.$setX.call(this,e),this.onPosList&&this.onPosList.Each(function(t){t(i.x,i.y)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){var i=this;this._y=e,t.prototype.$setY.call(this,e),this.onPosList&&this.onPosList.Each(function(t){t(i.x,i.y)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return new Vector2(this._x,this._y)},set:function(t){null==this.parent?(this.x!=t.x&&(this.x=t.x),this.y!=t.y&&(this.y=t.y)):(this.x!=t.x||this.y!=t.y)&&(this.x=t.x,this.y=t.y,this._x=t.x,this._y=t.y)},enumerable:!0,configurable:!0}),e.prototype.Pos=function(t,e){return this.position=new Vector2(t,e),this},e.prototype.Scale=function(t,e){return this.scale=new Vector2(t,e),this},e.prototype.PutCenter=function(){t.prototype.$setX.call(this,this._x-this.width/2)},e.prototype.PutRight=function(){t.prototype.$setX.call(this,this._x-this.width)},e.prototype.OnPos=function(t){null==this.onPosList&&(this.onPosList=new Arr),this.onPosList.Add(t)},e.prototype.OnPosSplice=function(t){this.onPosList.Remove(t)},e.prototype.RemoveMe=function(){try{this.disposed||(this.parent?this.parent.removeChild(this):this.autoDispose&&this.Dispose())}catch(t){Js.Trace(t)}},Object.defineProperty(e.prototype,"topVisible",{get:function(){return this.visible?this.parent&&this.parent instanceof Sx?this.parent.topVisible:this.parent?this.parent.visible:!1:!1},enumerable:!0,configurable:!0}),e.prototype.OnDispose=function(t){null==this.OnDisposeList&&(this.OnDisposeList=new Arr),this.OnDisposeList.Add(t)},e.prototype.OnShow=function(t){null==this.onShowList&&(this.onShowList=new Arr),this.onShowList.Add(t)},e.prototype.OnHide=function(t){null==this.onHideList&&(this.onHideList=new Arr),this.onHideList.Add(t)},e.prototype.OnShowSplice=function(t){this.onShowList.Remove(t)},e.prototype.OnHideSplice=function(t){this.onHideList.Remove(t)},Object.defineProperty(e.prototype,"visible",{get:function(){return this.$visible},set:function(e){t.prototype.$setVisible.call(this,e),e?this.onShowList&&this.onShowList.Each(function(t){try{t()}catch(e){Js.Trace(e)}}):this.onHideList&&this.onHideList.Each(function(t){try{t()}catch(e){Js.Trace(e)}})},enumerable:!0,configurable:!0}),e.prototype.To=function(t,e,i,n){return void 0===e&&(e=1e3),void 0===i&&(i=null),void 0===n&&(n=null),ActLite.To(this,t,e,i,n)},e.prototype.ToPath=function(t,e,i){var n=this;void 0===e&&(e=null),void 0===i&&(i=null);var r=0,o=function(){if(r>=t.length)o=null,e&&e();else{var s=t[r];r++;var a=s.time;delete s.time,n.To(s,a,function(){o()},i)}};o()},e.prototype.OnLoaded=function(t){this.loaded?t():(null==this.loadedFuncList&&(this.loadedFuncList=new Arr),this.loadedFuncList.Add(t))},e.prototype.Follow=function(t,e,i,n,r,o){var s=this;void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=0),void 0===r&&(r=!0),void 0===o&&(o=!0),this.followSx=t,null==e&&(e=0),null==i&&(i=0),t.OnPos(function(t,r){n>0?NForm.SetTimeout(n,function(){e instanceof Function?s.x=e(t):s.x=t+e,i instanceof Function?s.y=i(r):s.y=r+i}):(e instanceof Function?s.x=e(t):s.x=t+e,i instanceof Function?s.y=i(r):s.y=r+i)}),e instanceof Function?this.x=e(t.x):this.x=t.x+e,i instanceof Function?this.y=i(t.y):this.y=t.y+i,r&&t.OnDispose(function(){s.Dispose()}),o&&(t.OnShow(function(){s.Show()}),t.OnHide(function(){s.Hide()}),t.visible?this.Show():this.Hide())},Object.defineProperty(e.prototype,"mouseChildren",{get:function(){return this._mouseChildren},set:function(t){this._mouseChildren=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseEnabled",{get:function(){return this._mouseEnabled},set:function(t){this._mouseEnabled=t,this.touchEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){1==t?this.PutCenter():2==t&&this.PutRight(),this._align=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){this._textures=t,this.texture=t.GetTexture()},enumerable:!0,configurable:!0}),e}(eui.Image);__reflect(Bx.prototype,"Bx",["Ix"]),window.Bx=Bx;var LangType=function(){function t(){}return t.Chs="chs",t.Cht="cht",t.Jp="jp",t.Test="test",t}();__reflect(LangType.prototype,"LangType"),window.LangType=LangType;var Arr=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e)||this}return __extends(e,t),Object.defineProperty(e.prototype,"Count",{get:function(){return this.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Length",{get:function(){return this.length},enumerable:!0,configurable:!0}),e.prototype.Add=function(t){this.addItem(t)},e.prototype.Remove=function(t){var e=this.getItemIndex(t);e>-1&&this.removeItemAt(e)},e.prototype.RemoveBy=function(t){for(var e=this.length,i=0;e>i;i++)if(t(this.getItemAt(i))){this.RemoveAt(i);break}},e.prototype.RemoveAt=function(t){this.removeItemAt(t)},e.prototype.InsertAt=function(t,e){this.addItemAt(t,e)},e.prototype.Contian=function(t){return this.getItemIndex(t)>-1},e.prototype.Clear=function(){this.removeAll()},e.prototype.Each=function(t){for(var e=this.length,i=0;e>i&&!t(this.getItemAt(i),i);i++);},e.prototype.EachDesc=function(t){for(var e=this.length,i=e-1;i>=0&&!t(this.getItemAt(i));i--);},e}(eui.ArrayCollection);__reflect(Arr.prototype,"Arr"),window.Arr=Arr;var NAniBase=function(t){function e(e){void 0===e&&(e=!0);var i=t.call(this)||this;return i.img=null,i.stopAtEnd=!1,i.load=!1,i._frameRate=12,i._stop=!1,i._stopAtEnd=!1,i._timerHandleIndex=0,i.addTime=1,i.stoped=!1,i.stopFrame=-1,i.overAndRemove=e,i}return __extends(e,t),e.prototype.Load=function(t){var e=this;null!=t&&0!=t.Count&&(this.arr=t,this.load||(Strx.IsString(t.getItemAt(0))?(this.img=new Bx(t.getItemAt(0)),this.Add(this.img)):(this.img=t.getItemAt(0),this.img!=this&&this.Add(this.img))),this.times=0,this.frameCount=t.Count,this.load||(t.Count>1&&NForm.LazyCall(function(){e.TimerHandle()}),this.disposed||NForm.LazyCall(function(){e.disposed||e.CallLoad()})),this.load=!0)},Object.defineProperty(e.prototype,"frameRate",{get:function(){return this._frameRate},set:function(t){0>=t&&(t=12),this._frameRate!=t&&(this._frameRate=t,this.TimerHandle())},enumerable:!0,configurable:!0}),e.prototype.TimerHandle=function(){var t=this;this._timerHandleIndex++;var e=this._timerHandleIndex;NForm.SetInterval(1e3/this.frameRate,function(){return t.disposed?!0:e!=t._timerHandleIndex?!0:(t._stop||t.TimerHandler(),!1)})},e.prototype.LateFrame=function(t,e){void 0===t&&(t=75),void 0===e&&(e=2)},e.prototype.ClearLateFrame=function(){this.lateFrameList=null},e.prototype.Stop=function(t){void 0===t&&(t=-1),this.stoped=!0,0>t&&(t=this.times),this.times=t,this.img&&this.arr},e.prototype.Play=function(t){void 0===t&&(t=-1),this.stoped=!1,t>=0&&(this.times=t),this.stopFrame=-1},e.prototype.PlayFrames=function(t,e){void 0===e&&(e=-1),this.stoped=!1,0==t.Count&&(t=null),this.frames=t,this.stopFrame=e,t&&(this.times=0)},e.prototype.TimerHandler=function(){var t=this;if(this.disposed)return!0;if(this.stoped)return!1;if(this.topVisible)if(null==this.frames){if(this.lateFrameList&&this.lateFrameList.Item2>0&&100*this.times/this.arr.Count>=this.lateFrameList.Item1)return this.lateFrameList.Item2--,!1;if(this.times<this.arr.Count&&(this.img,this.enterFrame&&this.enterFrame(this.times,this),this.enterFrame1&&this.enterFrame1(this.times,this)),this.times==this.stopFrame)return this.Stop(),!1;this.times+=this.addTime,this.times>=this.frameCount&&this.endAct&&this.endAct(),this.times>=this.frameCount&&(this.stopAtEnd?this.Stop(this.frameCount-1):this.overAndRemove?NForm.LazyCall(function(){t.RemoveMe()}):this.overAndRemove||(this.times=0))}else{if(this.lateFrameList&&this.lateFrameList.Item2>0&&100*this.times/this.frames.Count>=this.lateFrameList.Item1)return this.lateFrameList.Item2--,!1;this.times>=this.frames.Count&&this.endAct&&this.endAct(),this.times>=this.frames.Count&&(this.stopAtEnd?this.Stop(this.frames.Count-1):this.stopFrame>=0?this.Stop(this.stopFrame):this.times=0,this.lateFrameList&&this.origLateFrameList&&(this.lateFrameList.Item1=this.origLateFrameList.Item1,this.lateFrameList.Item2=this.origLateFrameList.Item2)),frames&&(this.img,this.enterFrame&&this.enterFrame(this.times),this.enterFrame1&&this.enterFrame1(this.times),this.times+=this.addTime)}return this.disposed},e.prototype.Dispose=function(){t.prototype.Dispose.call(this),this.arr&&(this.arr.Clear(),this.arr=null),this.img=null,this.enterFrame=null,this.enterFrame1=null,this.endAct=null,this.lateFrameList=null,this.origLateFrameList=null},e}(Sx);__reflect(NAniBase.prototype,"NAniBase"),window.NAniBase=NAniBase,String.prototype.ArrList||(String.prototype.ArrList=function(){return Listx.GetArrList(this)}),String.prototype.Xqt||(String.prototype.Xqt=function(){return Listx.GetXmlLinqT(this)});var Listx=function(t){function e(){var e=t.call(this)||this;return e._staticData=!1,e}return __extends(e,t),Object.defineProperty(e,"listenCount",{get:function(){return e._listenCount},set:function(t){e._listenCount=t},enumerable:!0,configurable:!0}),e.TraceListen=function(){e.listenTraced=!1},e.prototype.Listen=function(t,i,n){var r=this;if(this._staticData)throw new Error("Static Data Can Not be Binded");if(null==n)throw new Error("sx is null");i&&!this.Exists(i)&&(this[i]=""),e.listenCount++,e.TraceListen();var o=function(){r.changedFuncList.Remove(s),o=null,s=null,e.listenCount--,e.TraceListen()},s=function(e,n,r,s){null!=o&&(null==i?t(e):i==e&&t(n,r))};n.OnDispose(o),this.changedFuncList.Add(s),i&&t(),this.CreateGS(i)},e.prototype.ListenArray=function(t,i,n){var r=this;if(this._staticData)throw new Error("Static Data Can Not be Binded");e.listenCount++,e.TraceListen();var o=function(){r.changedFuncList.Remove(s),o=null,s=null,e.listenCount--,e.TraceListen()},s=function(e,n,r,o){for(var s=0,a=i.length;a>s;s++)if(i[s]==e){t();break}};n.OnDispose(o),this.changedFuncList.Add(s),t(),i.forEach(function(t){this.CreateGS(t)}.bind(this))},e.GetArrList=function(t){if(Strx.IsEmpty(t))return new Array;for(var i=new Array,n=t.split("*"),r=0,o=n.length;o>r;r++)i.push(e.GetArr(n[r]));return i},e.GetXmlLinqT=function(t){for(var i=e.GetArrList(t),n=new XmlLinqT,r=0;r<i.length;r++)n.Add(i[r]);return n},e.Arr=function(t){return e.GetArr(t)},e.ArrSmart=function(t){return e.GetArrSmart(t)},e.GetArr=function(t){if(Strx.IsEmpty(t))return new e;for(var i=new e,n=t.split(","),r=n.length,o=0;r>o;o++){var s=n[o].split("|");if(s.length>=2){var a=s[0];try{var l=s[1];l=l.replace(/#124;/g,"|").replace(/#42;/g,"*").replace(/#44;/g,",").replace(/#35;/g,"#"),i.s(a,l)}catch(h){Js.Trace(h)}}}return i},e.GetArrSmart=function(t){if(Strx.IsEmpty(t))return new e;for(var i=new e,n="",r=0,o=0,s=t.length;s>o;o++){var a=t[o];if("_"==a){r=o;break}n+=a}var l=n.ToInt();r++;for(var h=t.substr(r,l),c=h.split("_"),u=r+l,o=0,s=c.length;s>o;o++){var d=c[o].ToInt(),p=t.substr(u,d);u+=d,o++,d=c[o].ToInt();var f=t.substr(u,d);i[p]=f,u+=d}return i},e.prototype.Text=function(){var t=this,e=[];return this.EachKey(function(i){var n=t.Get(i);if(n){"boolean"==typeof n&&(n=n?1:0);var r=n.toString().split("#").join("#35;").split("|").join("#124;").split("*").join("#42;").split(",").join("#44;");e.push(i+"|"+r)}}),e.join(",")},e.GetArrText=function(t){var e=[];return t.forEach(function(t){e.push(t.Text())}),e.join("*")},e.prototype.CopyTo=function(t){var e=this;this.keys.length>0?this.keys.forEach(function(i){i.IsFull()&&("_"==i.substr(0,1)&&(i=i.substr(1,i.length-1)),t[i]=e[i])}):this.EachKey(function(i){t[i]=e[i]})},e.prototype.GetPageSize=function(t){var e=Math.ceil(this.Length/t);return 0>=e&&(e=1),e},e.prototype.Take=function(t,i){void 0===i&&(i=0);var n=new e,r=this,o=0;return this.EachKey(function(e){return o>=i&&i+t>o&&n.Set(e,r.Get(e)),o>=i+t?!0:(o++,!1)}),n},e.prototype.Where=function(t){var i=this,n=new e;return this.EachKey(function(e){t(e)&&n.Set(e,i.Get(e))}),n},e.prototype.Copy=function(){var t=new e;return this.CopyTo(t),t},e.prototype.Count=function(t){void 0===t&&(t=null);var e=0;return this.Each(function(i){t(i)&&e++}),e},e.prototype.Any=function(t){var e=!1;return this.EachKey(function(i){return t(i)?(e=!0,!0):void 0}),e},e.prototype.All=function(t){var e=!0;return this.EachKey(function(i){return t(i)?void 0:(e=!1,!0)}),e},e.prototype.FirstOrDefault=function(t){var e=null;return this.Each(function(i){return t(i)?(e=i,!0):void 0}),e},e.prototype.Max=function(t){var e=-999999999;return this.Each(function(i){e=Math.max(e,t(i))}),e},e.prototype.Min=function(t){var e=Number.MAX_VALUE;return this.Each(function(i){e=Math.min(e,t(i))}),e},e.prototype.MaxItem=function(t){if(0==this.Length)return null;var e=this.Max(t);return this.FirstOrDefault(function(i){return t(i)==e})},e.prototype.toString=function(){return this.Text()},e.prototype.Dispose=function(){this.Clear(),this._parent=null,t.prototype.Dispose.call(this)},e}(Observer);__reflect(Listx.prototype,"Listx"),window.Listx=Listx;var NColorText=function(t){function e(i,n,r,o,s){void 0===n&&(n=!1),void 0===r&&(r=-1),void 0===o&&(o=10),void 0===s&&(s=!0);var a=this,l=-0;return l=0==o?16777215:e.arr[o],null==i&&(i=""),i=i.replace(/<[^>]+>/g,""),a=t.call(this,i,l,n,r,2,5592405)||this}return __extends(e,t),e.prototype.ValMulti=function(t,e,i){void 0===i&&(i=5),this.SetMultiline(e,i),this.val=t},e.ExsistStyle=function(t){return!0},Object.defineProperty(e.prototype,"style",{set:function(t){Js.SupportWebGL?t>0&&(this.filters=e.arrFilter[t]):this.color=e.arr[t]},enumerable:!0,configurable:!0}),e.willEmbedFontsFunc=null,e.starlingOffsetSize=5,e}(NLabel);__reflect(NColorText.prototype,"NColorText"),window.NColorText=NColorText;var Music=function(){function t(t,e){void 0===e&&(e=1),this.disposed=!1,this.loopTimes=e;try{this.Load(t)}catch(i){Js.Trace(i)}}return t.prototype.Load=function(t){this.id=t;try{var e=Config.icoPath+"music/"+t+".mp3";this.sound=new egret.Sound,this.sound.once(egret.Event.COMPLETE,this.LoadComplete,this),this.sound.once(egret.IOErrorEvent.IO_ERROR,this.LoadError,this),this.sound.load(e)}catch(i){Js.Trace(i)}},t.prototype.LoadComplete=function(){this.loaded=!0,this.stoped||this.Play()},t.prototype.Play=function(){this.stoped=!1,this.loaded&&(this.channel=this.sound.play(0,this.loopTimes),this.channel.once(egret.Event.SOUND_COMPLETE,this.PlayEnd,this))},t.prototype.Stop=function(){this.stoped=!0,this.channel&&this.channel.stop()},t.prototype.LoadError=function(){Js.Trace("Sound Error: "+this.id)},t.prototype.PlayEnd=function(){},t.Play=function(e){try{if(!t.musicOn)return;if(t.mList.Exists(e))t.mList[e].Play();else{var i=new t(e);t.mList[e]=i}}catch(n){Js.Trace(n)}},t.Load=function(e){try{if(!t.musicOn)return;if(!t.mList.Exists(e)){var i=new t(e);t.mList[e]=i,i.stoped=!0}}catch(n){Js.Trace(n)}},t.Bg=function(e){try{if(Js.Trace("setBgMusic: "+e),t.bgId==e)return;if(t.preBgId=t.bgId,t.bgId=e,t._bg&&t._bg.Stop(),!t.musicBgOn)return;if(e.IsFull()){if(t.mList.Exists(e))t.mList[e].Play();else{var i=new t(e,-1);t.mList[e]=i,t._bg=i}t._bg=t.mList[e]}}catch(n){Js.Trace(n)}return t._bg},t.BgStop=function(){t._bg&&t._bg.Stop()},Object.defineProperty(t,"musicBgOn",{get:function(){return t._musicBgOn=Server.GetIO("musicBgOff").IsFull()?!1:!0,t._musicBgOn},set:function(e){if(t._musicBgOn!=e)if(t._musicBgOn=e,e?Server.SetIO("musicBgOff",""):Server.SetIO("musicBgOff","1"),e){var i=t.bgId;t.bgId="",t.Bg(i)}else t.BgStop()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"musicOn",{get:function(){return t._musicOn=Server.GetIO("musicOff").IsFull()?!1:!0,t._musicOn},set:function(e){t._musicOn!=e&&(t._musicOn=e,e?Server.SetIO("musicOff",""):Server.SetIO("musicOff","1"))},enumerable:!0,configurable:!0}),t.prototype.Dispose=function(){this.disposed||(this.disposed=!0,this.channel&&(this.channel.stop(),this.channel.removeEventListener(egret.Event.SOUND_COMPLETE,this.PlayEnd,this),this.channel=null),this.sound&&(this.sound.removeEventListener(egret.Event.COMPLETE,this.LoadComplete,this),this.sound.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.LoadError,this),this.sound.close(),this.sound=null))},t.mList=new Listx,t}();__reflect(Music.prototype,"Music"),window.Music=Music;var NForm=function(){function t(){}return t.Load=function(e){t.stage=e,t.Down(function(){t.downDt=new Date},t.main)},t.HideMain=function(){t.main.Hide()},t.ShowMain=function(){t.main.Show()},Object.defineProperty(t,"width",{get:function(){return t.stage.stageWidth+t.stageWidthOffset},enumerable:!0,configurable:!0}),Object.defineProperty(t,"height",{get:function(){return t.stage.stageHeight+t.stageHeightOffset},enumerable:!0,configurable:!0}),t.TopLeft=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),t.disposed||t.Pos(e,i)},t.TopLeftExtra=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),e.disposed||t.TopLeft(e,i,n)},t.Top=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),!e.disposed){var r=function(o){e.disposed?t.stage.removeEventListener(egret.Event.RESIZE,r,t.stage):e.Pos(t.width/2+i,n)};r(null),t.stage.addEventListener(egret.Event.RESIZE,r,t.stage)}},t.TopExtra=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),!e.disposed){var r=function(o){e.disposed?t.stage.removeEventListener(egret.Event.RESIZE,r,t.stage):e.Pos(t.width/2-e.width/2+i,n)};r(null),t.stage.addEventListener(egret.Event.RESIZE,r,t.stage)}},t.TopRight=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),!e.disposed){var r=function(o){e.disposed?t.stage.removeEventListener(egret.Event.RESIZE,r,t.stage):e.Pos(t.width+i,n)};r(null),t.stage.addEventListener(egret.Event.RESIZE,r,t.stage)}},t.TopRightExtra=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),e.disposed||t.TopRight(e,-e.width+i,n)},t.Left=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),!e.disposed){var r=function(o){e.disposed?t.stage.removeEventListener(egret.Event.RESIZE,r,t.stage):e.Pos(i,t.height/2+n)};r(null),t.stage.addEventListener(egret.Event.RESIZE,r,t.stage)}},t.LeftExtra=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),e.disposed||t.Left(e,i,-e.height/2+n)},t.Center=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),!e.disposed){var r=function(o){e.disposed?t.stage.removeEventListener(egret.Event.RESIZE,r,t.stage):e.Pos(t.width/2+i,t.height/2+n)};r(null),t.stage.addEventListener(egret.Event.RESIZE,r,t.stage)}},t.CenterExtra=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),!e.disposed){var r=function(o){e.disposed?t.stage.removeEventListener(egret.Event.RESIZE,r,t.stage):e.Pos(t.width/2-e.width/2+i,t.height/2-e.height/2+n)};r(null),t.stage.addEventListener(egret.Event.RESIZE,r,t.stage)}},t.Right=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),!e.disposed){var r=function(o){e.disposed?t.stage.removeEventListener(egret.Event.RESIZE,r,t.stage):e.Pos(t.width+i,t.height/2+n)};r(null),t.stage.addEventListener(egret.Event.RESIZE,r,t.stage)}},t.RightExtra=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),e.disposed||t.Right(e,-e.width+i,-e.height/2+n)},t.BottomLeft=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),!e.disposed){var r=function(o){e.disposed?t.stage.removeEventListener(egret.Event.RESIZE,r,t.stage):e.Pos(i,t.height+n)};r(null),t.stage.addEventListener(egret.Event.RESIZE,r,t.stage)}},t.BottomLeftExtra=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),e.disposed||t.BottomLeft(e,i,-e.height+n)},t.Bottom=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),!e.disposed){var r=function(o){e.disposed?t.stage.removeEventListener(egret.Event.RESIZE,r,t.stage):e.Pos(t.width/2+i,t.height+n)};r(null),t.stage.addEventListener(egret.Event.RESIZE,r,t.stage)}},t.BottomExtra=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),!e.disposed){var r=function(o){e.disposed?t.stage.removeEventListener(egret.Event.RESIZE,r,t.stage):e.Pos(t.width/2-e.width/2+i,t.height-e.height+n)};r(null),t.stage.addEventListener(egret.Event.RESIZE,r,t.stage)}},t.BottomRight=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),!e.disposed){var r=function(o){e.disposed?t.stage.removeEventListener(egret.Event.RESIZE,r,t.stage):e.Pos(t.width+i,t.height+n)};r(null),t.stage.addEventListener(egret.Event.RESIZE,r,t.stage)}},t.BottomRightExtra=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),e.disposed||t.BottomRight(e,-e.width+i,-e.height+n)},t.Full=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),!e.disposed){var r=function(r){e.width=t.width+i,e.height=t.height+n};r(null),t.stage.addEventListener(egret.Event.RESIZE,r,t.stage)}},t.FullAndStageZero=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),!e.disposed){var r=function(r){e.width=t.width+i,e.height=t.height+n,t.LazyCall(function(){t.LazyCall(function(){t.LazyCall(function(){e.parent!=t.stage?(e.x=-e.parent.globalX,e.y=-e.parent.globalY):(e.x=0,e.y=0)})})})};r(null),t.stage.addEventListener(egret.Event.RESIZE,r,t.stage)}},t.FullExtra=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),!e.disposed){var r=function(r){e.width=t.width+i,e.height=t.height+n};r(null),t.stage.addEventListener(egret.Event.RESIZE,r,t.stage)}},t.FullWidth=function(e,i){if(void 0===i&&(i=0),!e.disposed){var n=function(r){e.disposed?t.stage.removeEventListener(egret.Event.RESIZE,n,t.stage):e.width=t.width+i};n(null),t.stage.addEventListener(egret.Event.RESIZE,n,t.stage)}},t.FullHeight=function(e,i){if(void 0===i&&(i=0),!e.disposed){var n=function(r){e.disposed?t.stage.removeEventListener(egret.Event.RESIZE,n,t.stage):e.height=t.height+i};n(null),t.stage.addEventListener(egret.Event.RESIZE,n,t.stage)}},t.Click=function(e,i){t.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,e,t.stage),i.OnDispose(function(){t.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP,e,t.stage)})},t.Down=function(e,i){t.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e,t.stage),i.OnDispose(function(){t.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,e,t.stage)})},t.Up=function(e,i){t.stage.addEventListener(egret.TouchEvent.TOUCH_END,e,t.stage),i.OnDispose(function(){t.stage.removeEventListener(egret.TouchEvent.TOUCH_END,e,t.stage)})},t.Move=function(e,i){t.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,e,t.stage),i.OnDispose(function(){t.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,e,t.stage)})},t.Resize=function(e,i){t.stage.addEventListener(egret.Event.RESIZE,e,t.stage),i.OnDispose(function(){t.stage.removeEventListener(egret.Event.RESIZE,e,t.stage)})},Object.defineProperty(t,"mouseX",{get:function(){return t._mouseXYEvent||(t._mouseXYEvent=!0,t.Move(function(e){t._mouseX=e.stageX,t._mouseY=e.stageY},t.main)),t._mouseX<0?t.width/2:t._mouseX},enumerable:!0,configurable:!0}),Object.defineProperty(t,"mouseY",{get:function(){return t._mouseXYEvent||(t._mouseXYEvent=!0,t.Move(function(e){t._mouseX=e.stageX,t._mouseY=e.stageY},t.main)),t._mouseY<0?t.height/2:t._mouseY},enumerable:!0,configurable:!0}),t.EnterFrame=function(e){try{null!=t.toList&&t.toList.Length>0&&t.toList.Each(function(e){var i=e[5];if(null==i||i.disposed||(i.x=e[1].x-e[0].x*e[2],i.y=e[1].y-e[0].y*e[2]),e[2]<=0){if(null==i||i.disposed||(i.x=e[1].x,i.y=e[1].y),t.toList.Remove(e),null!=e[3])try{e[3]}catch(n){Js.Trace(n)}e=null}else e[2]--})}catch(i){Js.Trace(i)}try{null!=t.toTargetList&&t.toTargetList.Length>0&&t.toTargetList.Each(function(e){var i=e[6];if(null==i||i.disposed||(i.x=e[1].x+e[4].x-(e[1].x+e[4].x-e[0].x)*e[2]/e[3],i.y=e[1].y+e[4].y-(e[1].y+e[4].y-e[0].y)*e[2]/e[3]),e[2]<=0){if(null==i||i.disposed||(i.x=e[1].x+e[4].x,i.y=e[1].y+e[4].y),t.toTargetList.Remove(e),null!=e[5])try{e[5]()}catch(n){Js.Trace(n)}e=null}else e[2]--})}catch(i){Js.Trace(i)}try{null!=t.valuesToList&&t.valuesToList.Count>0&&t.valuesToList.Each(function(e){try{e[2]<=0?(e[3](e[1]),t.valuesToList.Remove(e),null!=e[4]&&e[4](),e=null):(e[3](e[1]-e[0]*e[2]),e[2]--)}catch(i){Js.Trace(i),t.valuesToList.Remove(e),e=null}})}catch(i){Js.Trace(i)}try{if(null!=t.setTimeoutList&&t.setTimeoutList.Count>0){var n=Server.Now;t.setTimeoutList.Each(function(e){try{e&&n.time>=e[0].time&&(t.setTimeoutList.Remove(e),e[1](),e=null)}catch(i){Js.Trace(i),t.setTimeoutList.Remove(e),e=null}})}}catch(i){Js.Trace(i)}try{if(null!=t.setIntervalList&&t.setIntervalList.Count>0){var n=Server.Now;t.setIntervalList.Each(function(e){try{e&&n.time>=e[0].time&&(e[2]()?(t.setIntervalList.Remove(e),e=null):e[0]=n.AddMilliseconds(e[1]))}catch(i){Js.Trace(i),t.setIntervalList.Remove(e),e=null}})}}catch(i){Js.Trace(i)}},t.To=function(e,i,n,r){if(void 0===n&&(n=20),void 0===r&&(r=null),null!=e&&!e.disposed){null==t.toList&&(t.toList=new Arr),null==t.toTargetList&&(t.toTargetList=new Arr),t.toList.RemoveBy(function(t){return t[5]==e
}),t.toTargetList.RemoveBy(function(t){return t[6]==e});var o=[new Vector2(.01*(100*(i.x-e.x)/n),.01*(100*(i.y-e.y)/n)),i,n,r,e];t.toList.Add(o)}},t.ToTarget=function(e,i,n,r,o){if(void 0===r&&(r=20),void 0===o&&(o=null),null!=e&&!e.disposed){null==t.toList&&(t.toList=new Arr),null==t.toTargetList&&(t.toTargetList=new Arr),t.toList.RemoveBy(function(t){return t[5]==e}),t.toTargetList.RemoveBy(function(t){return t[6]==e});var s=[new Vector2(e.x,e.y),i,r,r,n,o,e];t.toTargetList.Add(s)}},t.ValuesTo=function(e,i,n,r,o){void 0===o&&(o=null),null==t.valuesToList&&(t.valuesToList=new Arr);var s=[(i-e)/n,i,n,r,o];t.valuesToList.Add(s)},t.SetTimeout=function(e,i){null==t.setTimeoutList&&(t.setTimeoutList=new Arr);var n=[Server.Now.AddMilliseconds(e),i];t.setTimeoutList.Add(n)},t.SetInterval=function(e,i){null==t.setIntervalList&&(t.setIntervalList=new Arr);var n=[Server.Now.AddMilliseconds(e),e,i];t.setIntervalList.Add(n)},t.MainThread=function(e){t.SetTimeout(1,e)},t.LazyCall=function(e){t.SetTimeout(1,e)},t.AddHandleAutoHide=function(e){t.autoHideList.Add(e)},t.HandleAutoHide=function(){var e=0;t.autoHideList.Each(function(i){if(i.disposed)t.autoHideList.Remove(i),i=null;else if(i.showTop50&&e>=50)i.HandleAutoHide_Hide();else{var n=i.HandleAutoHide();n&&i.showTop50&&e++}})},t.NARROW=!1,t.WIDE=!1,t.moved=!1,t.styleSetupLoad=!1,t.stageScale=1,t.stageWidthOffset=0,t.stageHeightOffset=0,t.stageX=0,t.stageY=0,t._mouseXYEvent=!1,t._mouseX=-1,t._mouseY=-1,t.autoHideList=new Arr,t}();__reflect(NForm.prototype,"NForm"),window.NForm=NForm;var Filters=function(){function t(){}return Object.defineProperty(t,"borderFilter",{get:function(){return[new egret.GlowFilter(0,.6,3,3,5,1),new egret.DropShadowFilter(1,45,1903874,.5,1,1,10,2)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"deepBorderFilter",{get:function(){return[new egret.GlowFilter(5056e3,1,4,4,4,1),new egret.DropShadowFilter(2,45,5056e3,1,1,1,13,2)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"tabBorderFilter",{get:function(){return[new egret.GlowFilter(6565386,1,5,5,6,1)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"tabBorderFilterOff",{get:function(){return[new egret.GlowFilter(16777215,1,5,5,6,1)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"borderFilter0",{get:function(){return[new egret.GlowFilter(9852933,1,3,3,5,1),new egret.DropShadowFilter(1,45,1903874,.5,1,1,10,2)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"borderFilter1",{get:function(){return[new egret.GlowFilter(10591,1,3,3,5,1),new egret.DropShadowFilter(1,45,1903874,.5,1,1,10,2)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"borderFilter2",{get:function(){return[new egret.GlowFilter(9186852,1,3,3,5,1),new egret.DropShadowFilter(1,45,1903874,.5,1,1,10,2)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"borderFilter3",{get:function(){return[new egret.GlowFilter(8147249,1,3,3,5,1),new egret.DropShadowFilter(1,45,1903874,.5,1,1,10,2)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"borderFilter4",{get:function(){return[new egret.GlowFilter(28199,1,3,3,5,1),new egret.DropShadowFilter(1,45,1903874,.5,1,1,10,2)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"borderFilter5",{get:function(){return[new egret.GlowFilter(9199935,1,3,3,5,1),new egret.DropShadowFilter(1,45,1903874,.5,1,1,10,2)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"greenBorderFilter",{get:function(){return[new egret.GlowFilter(13056,.6,3,3,5,1),new egret.DropShadowFilter(1,45,1903874,.5,1,1,10,2)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"borderLightFilter",{get:function(){return[new egret.GlowFilter(0,.2,3,3,5,1),new egret.DropShadowFilter(1,45,1903874,.5,1,1,10,2)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"lightGlowFilter",{get:function(){return[new egret.GlowFilter(16777150,.55,4,4,5,1)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"glowFilter",{get:function(){return[new egret.GlowFilter(1313801,.35,8,8,3,1)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"blackLineFilter",{get:function(){return[new egret.DropShadowFilter(1,45,1903874,.9,3,2,20,2)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"blackLightLineFilter",{get:function(){return[new egret.DropShadowFilter(1,45,0,.9,1,1,3,2)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"knockoutGlowFilter",{get:function(){return[new egret.GlowFilter(8978312,.75,6,6,3,1,!0,!0),new egret.BlurFilter(3,3,1)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"knockoutWhiteGlowFilter",{get:function(){return[new egret.GlowFilter(16777215,.8,6,6,10,1,!0,!0),new egret.BlurFilter(3,3,1)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"knockoutRedGlowFilter",{get:function(){return[new egret.GlowFilter(16711680,.75,20,20,5,1,!0,!0),new egret.BlurFilter(3,3,1)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"knockoutGrayFilter",{get:function(){return[new egret.GlowFilter(8947848,.75,20,20,2,1,!0,!0)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"blackFilter",{get:function(){return[new egret.GlowFilter(0,1,2,2,5,1)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"redFilter",{get:function(){return[new egret.ColorMatrixFilter([.3086,.6094,.082,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0])]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"grayFilter",{get:function(){return[new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0])]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"lightGrayFilter",{get:function(){return[new egret.ColorMatrixFilter([.4,.7,.1,0,0,.4,.7,.1,0,0,.4,.7,.1,0,0,0,0,0,1,0])]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"brownGlowFilter",{get:function(){return[new egret.GlowFilter(6684672,.7,10,10,3,1)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"greenGlowFilter",{get:function(){return[new egret.GlowFilter(65280,.55,4,4,2,1)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"redGlowFilter",{get:function(){return[new egret.GlowFilter(16711680,.55,4,4,2,1)]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"highLightFilter",{get:function(){return[new egret.ColorMatrixFilter([1.5,0,0,0,0,0,1.5,0,0,0,0,0,1.5,0,0,0,0,0,1,0])]},enumerable:!0,configurable:!0}),t}();__reflect(Filters.prototype,"Filters"),window.Filters=Filters;var IOx=function(){function t(){}return t.ReadURL=function(t,e,i,n,r){void 0===i&&(i=null),void 0===n&&(n=""),void 0===r&&(r=egret.HttpMethod.POST);var o=new egret.HttpRequest;o.responseType=egret.HttpResponseType.TEXT,o.open(t,r),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(n),n.length>50?Js.Trace(t+"?"):Js.Trace(t+"?"+n),o.once(egret.Event.COMPLETE,function(t){switch(t.type){case egret.Event.COMPLETE:var i=t.currentTarget.response;Js.Trace(i),e(i);break;case egret.IOErrorEvent.IO_ERROR:Js.Trace("null"),e(null)}},null),o.once(egret.IOErrorEvent.IO_ERROR,function(t){e(null),i&&i(t)},null)},t.ReadURLContent=function(t,e,i,n){void 0===i&&(i=null),void 0===n&&(n="");var r=new egret.HttpRequest;r.responseType=egret.HttpResponseType.ARRAY_BUFFER,r.open(t,egret.HttpMethod.POST),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(n),r.once(egret.Event.COMPLETE,function(t){e(r.response)},null),i&&r.once(egret.IOErrorEvent.IO_ERROR,i,null)},t}();__reflect(IOx.prototype,"IOx"),window.IOx=IOx;var Js=function(_super){function Js(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Js,_super),Js.Call=function(str){try{return eval(str)}catch(ex){}return null},Js.FullScreen=function(){Js.Call("window.RequestFullScreen();")},Js.Trace=function(t){Js.TraceCmd&&Js.TraceCmd(t),Js.showTrace&&("string"==typeof t&&t.indexOf("rror")>0&&console.log("%c "+t+" ","color: #e40e0e"),console.log(t))},Js.TraceObj=function(t){for(var e in t)Js.Trace(e+":"+t[e])},Js.TraceDmx=function(t){Js.showTrace&&Js.TraceCmdDmx&&Js.TraceCmdDmx(t)},Js.GetParm=function(t,e){try{var i=t.split("?");if(i.length>1)for(var n=i[1],r=n.split("&"),o=0,s=r.length;s>o;o++)if(r[o].split("=")[0]==e)return r[o].split("=")[1]}catch(a){}return""},Js.GetUrlParm=function(t){try{var e=Js.Call("GetParm('"+t+"')");if(Strx.IsFull(e))return e}catch(i){}try{var n=window.location.toString();return Js.GetParm(n,t)}catch(i){}return""},Js.OpenWindow=function(t,e,i){void 0===e&&(e="_blank"),void 0===i&&(i="");try{var n=Js.GetBrowserName();Js.Trace(n),window.open(t,e,i)}catch(r){}},Js.GetBrowserName=function(){var t;try{var e=navigator.userAgent;Js.Trace(e),t=e&&e.indexOf("Firefox")>=0?"Firefox":e&&e.indexOf("Chrome")>=0?"Chrome":e&&e.indexOf("Safari")>=0?"Safari":e&&e.indexOf("MSIE")>=0?"IE":e&&e.indexOf("Opera")>=0?"Opera":"Undefined"}catch(i){}return t},Object.defineProperty(Js,"SupportWebGL",{get:function(){if(Js._supportWebGL<=0){try{var t=document.getElementById("supportWebGLCanvas");t||(t=document.createElement("canvas"),t.style.display=" none",t.id="supportWebGLCanvas");var e=t.getContext("webgl");return e?(Js._supportWebGL=1,!0):(Js._supportWebGL=2,!1)}catch(i){Js.Trace(i)}return Js._supportWebGL=1,!0}return 1==Js._supportWebGL?!0:!1},enumerable:!0,configurable:!0}),Js._supportWebGL=0,Js}(egret.HashObject);__reflect(Js.prototype,"Js"),window.Js=Js;var Lazy=function(){function t(t){}return t}();__reflect(Lazy.prototype,"Lazy");var ActLite=function(){function t(){}return t.To=function(t,e,i,n,r){void 0===i&&(i=1e3),void 0===n&&(n=null),void 0===r&&(r=null);var o=i/30,s={};for(var a in e)s[a]=t[a];var l={};for(var a in e)l[a]=(e[a]-s[a])/o;var h=Strx.Rnd(999999);t.actId=h;var c=0,u=function(){if(t.actId!=h)return!0;if(t instanceof Sx){if(t.disposed)return!0}else if(t instanceof Bx&&t.disposed)return!0;for(var i in e)r?t[i]=r(l[i]*c+s[i],t):t[i]=l[i]*c+s[i];if(c>=o){for(var i in e)t[i]=e[i];return n&&n(),!0}return c++,!1};NForm.SetInterval(30,u)},t.ToTarget=function(t,e,i,n,r,o){void 0===r&&(r=1e3),void 0===o&&(o=null);var s=r/30,a={};a.x=t.x,a.y=t.y;var l=Strx.Rnd(999999);t.SetTemp("actId",l);var h=0,c=function(){if(t.GetTemp("actId")!=l)return!0;if(t instanceof Sx){if(t.disposed)return!0}else if(t instanceof Bx&&t.disposed)return!0;var r=s-h+1;return 0>=r&&(r=1),t.x=t.x+(e.x+i-t.x)/r,t.y=t.y+(e.y+n-t.y)/r,h>=s?(t.x=e.x+i,t.y=e.y+n,o&&o(),!0):(h++,!1)};NForm.SetInterval(30,c)},t}();__reflect(ActLite.prototype,"ActLite"),window.ActLite=ActLite;var AStar=function(){function t(){}return t.Init=function(e){t.blocks=e,t.blocks&&(t._mapWalkDataMaxX=t.blocks.width-1,t._mapWalkDataMaxY=t.blocks.length-1)},t.Find=function(e,i,n){if(void 0===n&&(n=!0),t.blocks.ExistsPoint(i)){for(var r=36,o=2,s=null,a=1;r*o>a;a+=o){var l=new Vector2(i.x-a,i.y);if(l.x>0&&l.x<t.blocks.width&&l.y>0&&l.y<t.blocks.height&&!t.blocks.Exists(l.x,l.y)){s=l;break}if(l=new Vector2(i.x+a,i.y),l.x>0&&l.x<t.blocks.width&&l.y>0&&l.y<t.blocks.height&&!t.blocks.Exists(l.x,l.y)){s=l;break}if(l=new Vector2(i.x,i.y-a),l.x>0&&l.x<t.blocks.width&&l.y>0&&l.y<t.blocks.height&&!t.blocks.Exists(l.x,l.y)){s=l;break}if(l=new Vector2(i.x,i.y+a),l.x>0&&l.x<t.blocks.width&&l.y>0&&l.y<t.blocks.height&&!t.blocks.Exists(l.x,l.y)){s=l;break}if(l=new Vector2(i.x-a,i.y-a),l.x>0&&l.x<t.blocks.width&&l.y>0&&l.y<t.blocks.height&&!t.blocks.Exists(l.x,l.y)){s=l;break}if(l=new Vector2(i.x-a,i.y+a),l.x>0&&l.x<t.blocks.width&&l.y>0&&l.y<t.blocks.height&&!t.blocks.Exists(l.x,l.y)){s=l;break}if(l=new Vector2(i.x+a,i.y-a),l.x>0&&l.x<t.blocks.width&&l.y>0&&l.y<t.blocks.height&&!t.blocks.Exists(l.x,l.y)){s=l;break}if(l=new Vector2(i.x+a,i.y+a),l.x>0&&l.x<t.blocks.width&&l.y>0&&l.y<t.blocks.height&&!t.blocks.Exists(l.x,l.y)){s=l;break}}if(i=s,null==i)return null}var h,c,u,d,p,f;if(null==t.blocks)return null;t.InitLists(),t._openCount=0,t._openId=-1,t.OpenNote(e,0,0,0);for(var g;t._openCount>0;){if(++g,g>t.maxTry)return t.DestroyLists(),null;if(p=t._openList[0],t.CloseNote(p),f=t._nodeList[p],i.Equals(f))return h=t.GetPath(e,p,n);t.GetArounds(f).forEach(function(e){c=t._movementCostList[p]+(e.y==f.y)?t.COST_STRAIGHT:t.COST_DIAGONAL,u=c+(Math.abs(i.x-e.x)+Math.abs(i.y-e.y))*t.COST_STRAIGHT,t.IsOpen(e)?(d=t._noteMap[e.y][e.x][t.NOTE_ID],c<t._movementCostList[d]&&(t._movementCostList[d]=c,t._pathScoreList[d]=u,t._fatherList[d]=p,t.AheadNote(t._openList.indexOf(d)+1))):t.OpenNote(e,u,c,p)})}return t.DestroyLists(),null},t.IncisePath=function(t){for(var e,i,n=1,r=t[0];n<t.length;){if(e=t[n],i=r.Distance(e),i>8)return void t.splice(n,t.length-n);n++}},t.IsOpen=function(e){return null==t._noteMap[e.y]?!1:null==t._noteMap[e.y][e.x]?!1:t._noteMap[e.y][e.x][t.NOTE_OPEN]},t.AheadNote=function(e){for(var i,n;e>1&&(i=e/2,t.GetScore(e)<t.GetScore(i));)n=t._openList[e-1],t._openList[e-1]=t._openList[i-1],t._openList[i-1]=n,e=i},t.OpenNote=function(e,i,n,r){t._openCount++,t._openId++,null==t._noteMap[e.y]&&(t._noteMap[e.y]=[]),t._noteMap[e.y][e.x]=[],t._noteMap[e.y][e.x][t.NOTE_OPEN]=!0,t._noteMap[e.y][e.x][t.NOTE_ID]=t._openId,t._nodeList.push(e),t._pathScoreList.push(i),t._movementCostList.push(n),t._fatherList.push(r),t._openList.push(t._openId),t.AheadNote(t._openCount)},t.Optimize=function(e,i){void 0===i&&(i=0);var n,r,o,s,a,l,h,c,u,d;if(null!=e){var p=e.length-1;if(!(2>p)){for(var f=e[i],g=p;g>i;){for(n=e[g],r=n.x-f.x,o=n.y-f.y,s=Math.round(Math.sqrt(r*r+o*o)),a=r/s,l=o/s,h=a,c=l,u=1,d=!0;s>u;){if(0==t.CanPass(f.Move(Math.round(h),Math.round(c)))){d=!1;break}h+=a,c+=l,u++}if(d){e.splice(i+1,g-i-1);break}g--}i++,i<e.length-1&&t.Optimize(e,i)}}},t.Optimize2=function(e,i){void 0===i&&(i=0);var n,r,o,s,a,l,h,c,u,d;if(null!=e){var p=e.length-1;if(!(2>p)){for(var f=e[i],g=p;g>i;){for(n=e[g],r=Math.abs(n.x-f.x),o=Math.abs(n.y-f.y),s=r>o?r:o,a=!0,l=1;s>l;){if(h=n.x-f.x,c=n.y-f.y,u=Math.round(Math.abs(h)*l/s),0>h&&(u=-u),d=Math.round(Math.abs(c)*l/s),0>c&&(d=-d),0==t.CanPass(f.Move(u,d))){a=!1;break}l++}if(a){e.splice(i+1,g-i-1);break}g--}i++,i<e.length-1&&t.Optimize2(e,i)}}},t.CloseNote=function(e){t._openCount--;var i=t._nodeList[e];return t._noteMap[i.y][i.x][t.NOTE_OPEN]=!1,t._noteMap[i.y][i.x][t.NOTE_CLOSED]=!0,t._openCount<=0?(t._openCount=0,void(t._openList.length=0)):(t._openList[0]=t._openList.pop(),void t.BackNote())},t.GetScore=function(e){return t._pathScoreList[t._openList[e-1]]},t.GetArounds=function(e){var i,n=[];return t.AROUND_POINTS.forEach(function(r){i=e.Move(r.x,r.y),t.CanPass(i)&&(t.IsClosed(i)||n.push(i))}),n},t.CanPass=function(e){return e.x<0||e.x>t._mapWalkDataMaxX||e.y<0||e.y>t._mapWalkDataMaxY?!1:!t.blocks.ExistsPoint(e)},t.GetPath=function(e,i,n){for(var r=[],o=t._nodeList[i];!e.Equals(o);)r.push(o),i=t._fatherList[i],o=t._nodeList[i];return r.push(e),t.DestroyLists(),r.reverse(),n&&t.Optimize2(r),r},t.InitLists=function(){t._openList=[],t._nodeList=[],t._pathScoreList=[],t._movementCostList=[],t._fatherList=[],t._noteMap=new Array},t.IsClosed=function(e){return null==t._noteMap[e.y]?!1:null==t._noteMap[e.y][e.x]?!1:t._noteMap[e.y][e.x][t.NOTE_CLOSED]},t.DestroyLists=function(){t._openList=null,t._nodeList=null,t._pathScoreList=null,t._movementCostList=null,t._fatherList=null,t._noteMap=null},t.BackNote=function(){for(var e,i,n=1;;){if(i=n,2*i<=t._openCount&&(t.GetScore(n)>t.GetScore(2*i)&&(n=2*i),2*i+1<=t._openCount&&t.GetScore(n)>t.GetScore(2*i+1)&&(n=2*i+1)),i==n)break;e=t._openList[i-1],t._openList[i-1]=t._openList[n-1],t._openList[n-1]=e}},t.BLOCK_WAY=1,t.AROUND_POINTS=[new Vector2(1,0),new Vector2(0,1),new Vector2(-1,0),new Vector2(0,-1),new Vector2(1,1),new Vector2(-1,1),new Vector2(-1,-1),new Vector2(1,-1)],t.COST_DIAGONAL=14,t.COST_STRAIGHT=10,t.NOTE_OPEN=1,t.NOTE_ID=0,t.NOTE_CLOSED=2,t.maxTry=5e3,t}();__reflect(AStar.prototype,"AStar"),window.AStar=AStar;var Msg=function(){function t(){}return t.Call=function(e,i){try{if(t.list.Exists(e)){var n=t.list[e];n.Each(function(e){try{t.Fun(e,i)}catch(n){Js.Trace(n)}})}}catch(r){Js.Trace(r)}},t.Fun=function(t,e){NForm.LazyCall(function(){t&&t(e)})},t.Listen=function(e,i,n){t.list.Exists(e)||(t.list[e]=new Arr);var r=t.list[e];r.Add(i),n&&n.OnDispose(function(){r.Remove(i)})},t.list=new Listx,t}();__reflect(Msg.prototype,"Msg"),window.Msg=Msg,Number.prototype.ToInt||(Number.prototype.ToInt=function(){return parseInt(this)}),Number.prototype.Max||(Number.prototype.Max=function(t){return Math.max(this,t)}),Number.prototype.Min||(Number.prototype.Min=function(t){return Math.min(this,t)}),Number.prototype.Clamp||(Number.prototype.Clamp=function(t,e){return Math.min(Math.max(this,t),e)});var Point=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),e}(egret.Point);__reflect(Point.prototype,"Point"),window.Point=Point;var Prototype=function(){function t(){}return t}();__reflect(Prototype.prototype,"Prototype"),Array.prototype.Each=function(t){for(var e=this.length,i=0;e>i&&!t(this[i]);i++);};var Rectangle=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return __extends(e,t),e}(egret.Rectangle);__reflect(Rectangle.prototype,"Rectangle"),window.Rectangle=Rectangle;var Server=function(){function t(){}return t.SetFile=function(t,e){try{egret.localStorage.setItem(t,e)}catch(i){Js.Trace(i)}},t.GetFile=function(t){try{var e=egret.localStorage.getItem(t);return null==e&&(e=""),e}catch(i){Js.Trace(i)}return""},t.GetIO=function(e){return t.GetFile(e)},t.SetIO=function(e,i){t.SetFile(e,i)},t.GC=function(){},t.CreateClass=function(t){if(Js.showTrace){var e=new t;return e.OnDispose(function(){t.instance=null}),e}try{var e=new t;return e.OnDispose(function(){t.instance=null}),e}catch(i){}return null},Object.defineProperty(t,"Now",{get:function(){return Time.Now},enumerable:!0,configurable:!0}),t}();__reflect(Server.prototype,"Server"),window.Server=Server;var SHA1=function(){function t(){this.hexcase=0,this.b64pad=""}return t.GI=function(){return t._instance||(t._instance=new t),t._instance},t.prototype.hex_sha1=function(t){return this.rstr2hex(this.rstr_sha1(this.str2rstr_utf8(t)))},t.prototype.b64_sha1=function(t){return this.rstr2b64(this.rstr_sha1(this.str2rstr_utf8(t)))},t.prototype.any_sha1=function(t,e){return this.rstr2any(this.rstr_sha1(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_sha1=function(t,e){return this.rstr2hex(this.rstr_hmac_sha1(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_sha1=function(t,e){return this.rstr2b64(this.rstr_hmac_sha1(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_sha1=function(t,e,i){return this.rstr2any(this.rstr_hmac_sha1(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),i)},t.prototype.sha1_vm_test=function(){return"a9993e364706816aba3e25717850c26c9cd0d89d"==this.hex_sha1("abc").toLowerCase()},t.prototype.rstr_sha1=function(t){return this.binb2rstr(this.binb_sha1(this.rstr2binb(t),8*t.length))},t.prototype.rstr_hmac_sha1=function(t,e){var i=this.rstr2binb(t);i.length>16&&(i=this.binb_sha1(i,8*t.length));for(var n=Array(16),r=Array(16),o=0;16>o;o++)n[o]=909522486^i[o],r[o]=1549556828^i[o];var s=this.binb_sha1(n.concat(this.rstr2binb(e)),512+8*e.length);return this.binb2rstr(this.binb_sha1(r.concat(s),672))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var i,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",r="",o=0;o<t.length;o++)i=t.charCodeAt(o),r+=n.charAt(i>>>4&15)+n.charAt(15&i);return r},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",r=t.length,o=0;r>o;o+=3)for(var s=t.charCodeAt(o)<<16|(r>o+1?t.charCodeAt(o+1)<<8:0)|(r>o+2?t.charCodeAt(o+2):0),a=0;4>a;a++)n+=8*o+6*a>8*t.length?this.b64pad:i.charAt(s>>>6*(3-a)&63);return n},t.prototype.rstr2any=function(t,e){var i,n,r,o,s=e.length,a=Array(),l=Array(Math.ceil(t.length/2));for(i=0;i<l.length;i++)l[i]=t.charCodeAt(2*i)<<8|t.charCodeAt(2*i+1);for(;l.length>0;){for(o=Array(),r=0,i=0;i<l.length;i++)r=(r<<16)+l[i],n=Math.floor(r/s),r-=n*s,(o.length>0||n>0)&&(o[o.length]=n);a[a.length]=r,l=o}var h="";for(i=a.length-1;i>=0;i--)h+=e.charAt(a[i]);var c=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2)));for(i=h.length;c>i;i++)h=e[0]+h;return h},t.prototype.str2rstr_utf8=function(t){for(var e,i,n="",r=-1;++r<t.length;)e=t.charCodeAt(r),i=r+1<t.length?t.charCodeAt(r+1):0,e>=55296&&56319>=e&&i>=56320&&57343>=i&&(e=65536+((1023&e)<<10)+(1023&i),r++),127>=e?n+=String.fromCharCode(e):2047>=e?n+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?n+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(n+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return n},t.prototype.str2rstr_utf16le=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(255&t.charCodeAt(i),t.charCodeAt(i)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t.charCodeAt(i)>>>8&255,255&t.charCodeAt(i));return e},t.prototype.rstr2binb=function(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(var i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<24-i%32;return e},t.prototype.binb2rstr=function(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>24-i%32&255);return e},t.prototype.binb_sha1=function(t,e){t[e>>5]|=128<<24-e%32,t[(e+64>>9<<4)+15]=e;for(var i=Array(80),n=1732584193,r=-271733879,o=-1732584194,s=271733878,a=-1009589776,l=0;l<t.length;l+=16){for(var h=n,c=r,u=o,d=s,p=a,f=0;80>f;f++){16>f?i[f]=t[l+f]:i[f]=this.bit_rol(i[f-3]^i[f-8]^i[f-14]^i[f-16],1);var g=this.safe_add(this.safe_add(this.bit_rol(n,5),this.sha1_ft(f,r,o,s)),this.safe_add(this.safe_add(a,i[f]),this.sha1_kt(f)));a=s,s=o,o=this.bit_rol(r,30),r=n,n=g}n=this.safe_add(n,h),r=this.safe_add(r,c),o=this.safe_add(o,u),s=this.safe_add(s,d),a=this.safe_add(a,p)}return[n,r,o,s,a]},t.prototype.sha1_ft=function(t,e,i,n){return 20>t?e&i|~e&n:40>t?e^i^n:60>t?e&i|e&n|i&n:e^i^n},t.prototype.sha1_kt=function(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514},t.prototype.safe_add=function(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();__reflect(SHA1.prototype,"SHA1"),window.SHA1=SHA1;var SingleQueue=function(){function t(t,e){void 0===e&&(e=800),this.inHandle=!1,this.index=0,this.continueCount=0,this.act=t,this.timeout=e,this.handleQueue=new Array}return t.prototype.Push=function(t){if(this.inHandle)this.En(t);else try{this.Add(t)}catch(e){Js.Trace(e)}},t.prototype.Add=function(t){try{this.inHandle?this.handleQueue.push(t):(this.inHandle=!0,this.Handle(t))}catch(e){this.inHandle=!1,Js.Trace(e)}},t.prototype.En=function(t){this.handleQueue.push(t)},t.prototype.Handle=function(t){if(null==t)return this.inHandle=!1,void(this.index=0);try{this.act(t),this.index++}catch(e){Js.Trace(e)}if(this.index>=this.continueCount)return this.inHandle=!1,void(this.index=0);var i=this.handleQueue.splice(0,1);i.length>0&&this.Handle(i[0])},t.prototype.End=function(){for(this.inHandle=!0;;){var t=this.handleQueue.splice(0,1);if(0==t.length)return;try{this.act(t[0])}catch(e){Js.Trace(e)}}},t}();__reflect(SingleQueue.prototype,"SingleQueue"),window.SingleQueue=SingleQueue;var Sp=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(Bx);__reflect(Sp.prototype,"Sp"),window.Sp=Sp;var Src=function(){function t(){}return t.ReadByte=function(t,e,i){void 0===i&&(i=null);var n=t;t.StartWith("http")||(n="resource/"+t);var r=new egret.HttpRequest;r.responseType=egret.HttpResponseType.ARRAY_BUFFER;var o=function(t){switch(t.type){case egret.Event.COMPLETE:var i=t.currentTarget,n=i.response;e(n);break;case egret.IOErrorEvent.IO_ERROR:e(null)}};r.once(egret.Event.COMPLETE,o,null),r.once(egret.IOErrorEvent.IO_ERROR,o,null),r.open(n,egret.HttpMethod.GET),r.send()},t.Read=function(e,i){function n(e){s.urlLoaded(null),t.dataCacheList[s.path]=null,t.inreadingDataCacheList[s.path].forEach(function(t){t(null)}),t.inreadingDataCacheList.Remove(s.path),("ReadErrorUrl:"+s.path).WriteLog()}function r(e){var i=e.currentTarget.data,n=new egret.Texture;n._setBitmapData(i);var r=Textures.GetTextures(n,s.path);t.dataCacheList[s.path]=r,t.inreadingDataCacheList[s.path].forEach(function(t){t(r)}),t.inreadingDataCacheList.Remove(s.path)}if(null==e||e.IsEmpty())return void i(null);if(t.dataCacheList.Exists(e))if(t.dataCacheList[e]){var o=t.dataCacheList[e];i(o)}else i(null);else{if(t.inreadingDataCacheList.Exists(e))return void t.inreadingDataCacheList[e].push(i);t.inreadingDataCacheList[e]=[],t.inreadingDataCacheList[e].push(i);var s={path:e,urlLoaded:i},a=s.path;s.path.StartWith("http")||(a="resource/"+s.path);var l=new egret.ImageLoader;l.once(egret.Event.COMPLETE,r,null),l.once(egret.IOErrorEvent.IO_ERROR,n,null),l.load(a)}},t.ReadTxt=function(e,i,n){if(void 0===n&&(n=!0),null==e||e.IsEmpty())return void i(null);if(n&&t.textCacheList.Exists(e))return void i(t.textCacheList[e]);if(t.inreadingDataCacheList.Exists(e))return void t.inreadingDataCacheList[e].push(i);t.inreadingDataCacheList[e]=[],t.inreadingDataCacheList[e].push(i);var r=e;e.StartWith("http")||(r="resource/"+e);var o=new egret.HttpRequest,s=function(i){switch(i.type){case egret.Event.COMPLETE:var n=i.currentTarget;t.textCacheList[e]=n.response,t.inreadingDataCacheList[e].forEach(function(t){t(n.response)}),t.inreadingDataCacheList.Remove(e);break;case egret.IOErrorEvent.IO_ERROR:t.inreadingDataCacheList[e].forEach(function(t){t("")}),t.inreadingDataCacheList.Remove(e),("ReadErrorUrl:"+e).WriteLog()}};o.once(egret.Event.COMPLETE,s,null),o.once(egret.IOErrorEvent.IO_ERROR,s,null),o.open(r,egret.HttpMethod.GET),o.send()},t.ReadXml=function(e,i,n){void 0===n&&(n=!0),t.ReadTxt(e,function(t){console.log(t),i(t.IsEmpty()?null:new Xml(t))},n)},t.Load=function(e){var i=RES.getRes("ModelFlexAttribute_txt");if(i){var n=Strx.Decompress(new Uint8Array(i)),r=UTF8.decode(n);t.modelFlexList=Listx.Arr(r),t.modelFlexList.EachKey(function(e){Js.Trace(e+":"+t.modelFlexList[e].length)})}e()},t.dataCacheList=new Listx,t.inreadingDataCacheList=new Listx,t.textCacheList=new Listx,t}();__reflect(Src.prototype,"Src"),window.Src=Src;var Config=function(){function t(){}return Object.defineProperty(t,"shareIco",{get:function(){return t.shareIcos[Strx.Rnd(t.shareIcos.length)]},enumerable:!0,configurable:!0}),t.LoadConfig=function(e,i){console.log("Begin Load Config");var n=e.nodes;t.dic=n[0];var r=t.dic.redirect;if(r)return void Src.ReadXml(r,function(n){null==n?NForm.SetTimeout(800,function(){t.LoadConfig(e,i)}):t.LoadConfig(n,i)});t.showTrace=t.dic.showTrace,Js.showTrace="1"==t.showTrace,t.test=t.dic.test,t.qq=t.dic.qq,t.qqq=t.dic.qqq,t.allShopGoods=t.dic.allShopGoods,t.dic.url&&(t.urls=t.dic.url.split(","),t.urls=t.urls.sort(function(t,e){return Strx.Rnd(10)})),t.gameUrl=t.dic.gameUrl,t.payUrl=t.dic.payUrl,t.shareUrl=t.dic.shareUrl,t.src=t.dic.src,t.version=t.dic.version,t.icoPath=t.dic.icoPath,t.srcPath=t.dic.srcPath,t.game=t.dic.game,t.isLW="Longwen"==t.game,t.cardMode="1"==t.dic.cardMode,t.app=t.dic.app,t.shareApp=t.dic.shareApp,t.serverIp=t.dic.serverIp,t.port=t.dic.port,t.portHttp=t.dic.portHttp,t.serverName=t.dic.serverName,t.serverBegin=t.dic.serverBegin,t.serverFrom=t.dic.serverFrom,t.ps="1"==t.dic.ps,t.closeChat="1"==t.dic.closeChat,t.serverId=t.dic.serverId,t.newServerMode="1"==t.dic.newServerMode,t.wss=t.dic.wss,t.gonggao=t.dic.gonggao,t.isBattleCard="1"==t.dic.isBattleCard,t.isStyleCard="1"==t.dic.isStyleCard,t.btServer="1"==t.dic.btServer,t.dic.mainCenter&&(t.mainCenter=t.dic.mainCenter.ToInt()),t.dic.gameType&&(t.gameType=t.dic.gameType.ToInt()),t.ads=t.dic.ads,t.banner=t.dic.banner,t.banner2=t.dic.banner2,t.dic.bannery&&(t.bannery=t.dic.bannery.ToInt()),t.outAds="1"==t.dic.outAds,t.openAds="1"==t.dic.openAds,t.appMode="1"==t.dic.appMode,t.inExam="1"==t.dic.inExam,t.autoCreateRole="1"==t.dic.autoCreateRole,t.dic.bbs&&(t.bbs=t.dic.bbs),t.dic.alert&&(t.alert=t.dic.alert),t.dic.alertOld&&(t.alertOld=t.dic.alertOld);var o=t.dic.servers;if(o){var s=o.split(","),a=s[Strx.Rnd(s.length)],l=a.split(":");t.serverIp=l[0],t.port=l[1].ToInt()}var h=t.dic.serversTls13;if(h){var s=h.split(","),a=s[Strx.Rnd(s.length)],l=h.split(":");t.serverIpTls13=l[0],t.portTls13=l[1].ToInt()}t.share=t.dic.share,t.share||(t.share="我正在种菜，缺少辣椒，请求帮助！"),t.dic.shareIco?t.shareIcos=t.dic.shareIco.split(","):t.shareIcos=["share/shares.jpg"],t.tujian=t.dic.tujian;var c=t.dic.business,u=Js.GetUrlParm("business");u&&""!=u&&(c=u),t.businessType=c,console.log("End Load Config"),i()},t.isLW=!1,t.cardMode=!1,t.outAds=!1,t.alert="",t.alertOld="",t.appMode=!1,t.inExam=!1,t.autoCreateRole=!1,t.bbs="",t}();__reflect(Config.prototype,"Config"),window.Config=Config;var TaskQueue=function(){function t(t,e){void 0===t&&(t=100),void 0===e&&(e=null),this.timeout=100,this.queue=new Array,this.inHandle=!1,this.disposed=!1,this.timeout=t,this.onIdle=e}return t.prototype.AddQueue=function(t){this.inHandle?this.queue.push(t):this.Handle(t)},t.prototype.Handle=function(t){var e=this;if(void 0===t&&(t=null),this.inHandle=!0,null==t&&(this.queue.length>0?t=this.queue.splice(0,1)[0]:(this.inHandle=!1,this.onIdle&&this.onIdle())),t)try{"function"==typeof t?t()&&NForm.SetTimeout(this.timeout,function(){e.Next()}):t.hasOwnProperty("func")&&t.func()&&NForm.SetTimeout(this.timeout,function(){e.Next()})}catch(i){Js.Trace(i)}},t.prototype.Next=function(){this.Handle()},t.prototype.Dispose=function(){this.disposed||(this.disposed=!0)},t}();__reflect(TaskQueue.prototype,"TaskQueue"),window.TaskQueue=TaskQueue;var Textures=function(){function t(t,e){void 0===e&&(e=""),this.disposed=!1,this.tick=0,this.texture=t,this.path=e}return Object.defineProperty(t.prototype,"bitmapWidth",{get:function(){return this.texture.$bitmapWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bitmapHeight",{get:function(){return this.texture.$bitmapHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bitmapData",{get:function(){return this.texture.$bitmapData},enumerable:!0,configurable:!0}),t.prototype.GetTexture=function(){return this.texture},t.prototype.UseTexture=function(t){return t.textures&&t.textures.tick--,this.tick++,t.textures=this,this},t.prototype.UnUseTexture=function(){this.tick--},t.prototype.Keep=function(){this.tick++},t.prototype.Release=function(){this.tick--},t.prototype.Dispose=function(){this.disposed||(this.disposed=!0,this.texture.disposeBitmapData=!0,this.texture.dispose())},t.GetTextures=function(e,i){void 0===i&&(i="");var n=e.hashCode.toString();if(i.IsFull()){null==t.textures&&(t.textures=new Listx,NForm.SetInterval(6e4,function(){t.GC()})),t.textures.Exists(i)||(t.textures[i]=new Listx);var r=t.textures[i];if(r.gc=0,r.Exists(n))return r[n];var o=new t(e,i);return r[n]=o,o}if(t.texturesStatic.Exists(n))return t.texturesStatic[n];var o=new t(e,i);return t.texturesStatic[n]=o,o},t.GC=function(){var e=!1;try{t.textures&&t.textures.EachKey(function(i){if(!Src.inreadingDataCacheList.Exists(i)){var n=t.textures[i],r=!0;n.EachKey(function(t){if("gc"==t);else if(n[t].tick>0)return r=!1,!0}),r&&n.gc++,n.gc>=2&&(t.DoGC(i),e=!0)}}),e&&Msg.Call("GC",null)}catch(i){Js.Trace(i)}},t.DoGC=function(e){if(!Src.inreadingDataCacheList.Exists(e)){Js.Trace("GC:"+e);var i=t.textures[e];i.EachKey(function(t){if("gc"==t);else{var e=i[t];e.Dispose()}}),i.Clear(),t.textures.Remove(e),Src.dataCacheList.Remove(e)}},t.texturesStatic=new Listx,t.textures=null,t}();__reflect(Textures.prototype,"Textures"),window.Textures=Textures;var Time=function(){function t(){}return t.ParseTime=function(t){var e=t.split(" "),i=e[0].split("-"),n=e[1].split(":");return new Date(i[0].ToInt(),i[1].ToInt()-1,i[2].ToInt(),n[0].ToInt(),n[1].ToInt(),n[2].ToInt())},t.ParseString=function(t){return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},t.ParseStringWithMilliseconds=function(t){return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+"."+t.getMilliseconds()},t.GetTimeSpan=function(t){var e=Math.floor(t/86400);
t-=86400*e;var i=Math.floor(t/3600);t-=3600*i;var n=Math.floor(t/60);return t-=60*n,0==e?Strx.PaddingLeft(i.toString(),2,"0")+":"+Strx.PaddingLeft(n.toString(),2,"0")+":"+Strx.PaddingLeft(t.toString(),2,"0"):Lang.type==LangType.Chs||Lang.type==LangType.Cht?e+"."+Strx.PaddingLeft(i.toString(),2,"0")+":"+Strx.PaddingLeft(n.toString(),2,"0")+":"+Strx.PaddingLeft(t.toString(),2,"0"):e+"d"+Strx.PaddingLeft(i.toString(),2,"0")+":"+Strx.PaddingLeft(n.toString(),2,"0")+":"+Strx.PaddingLeft(t.toString(),2,"0")},Object.defineProperty(t,"Now",{get:function(){return new DateTime(new Date)},enumerable:!0,configurable:!0}),t}();__reflect(Time.prototype,"Time"),window.Time=Time;var TimeSpan=function(){function t(t){this.tick=t}return Object.defineProperty(t.prototype,"TotalDay",{get:function(){return this.tick/864e5},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalHour",{get:function(){return this.tick/36e5},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalMinutes",{get:function(){return this.tick/6e4},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalSeconds",{get:function(){return this.tick/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalMilliseconds",{get:function(){return this.tick},enumerable:!0,configurable:!0}),t}();__reflect(TimeSpan.prototype,"TimeSpan"),window.TimeSpan=TimeSpan;var UTF8=function(){function t(){this.EOF_byte=-1,this.EOF_code_point=-1}return t.encode=function(e){return(new t).encode(e)},t.decode=function(e){return(new t).decode(e)},t.prototype.encoderError=function(t){console.error("UTF8 encoderError",t)},t.prototype.decoderError=function(t,e){return t&&console.error("UTF8 decoderError",e),e||65533},t.prototype.inRange=function(t,e,i){return t>=e&&i>=t},t.prototype.div=function(t,e){return Math.floor(t/e)},t.prototype.stringToCodePoints=function(t){for(var e=[],i=0,n=t.length;i<t.length;){var r=t.charCodeAt(i);if(this.inRange(r,55296,57343))if(this.inRange(r,56320,57343))e.push(65533);else if(i==n-1)e.push(65533);else{var o=t.charCodeAt(i+1);if(this.inRange(o,56320,57343)){var s=1023&r,a=1023&o;i+=1,e.push(65536+(s<<10)+a)}else e.push(65533)}else e.push(r);i+=1}return e},t.prototype.encode=function(t){for(var e=0,i=this.stringToCodePoints(t),n=[];i.length>e;){var r=i[e++];if(this.inRange(r,55296,57343))this.encoderError(r);else if(this.inRange(r,0,127))n.push(r);else{var o=0,s=0;for(this.inRange(r,128,2047)?(o=1,s=192):this.inRange(r,2048,65535)?(o=2,s=224):this.inRange(r,65536,1114111)&&(o=3,s=240),n.push(this.div(r,Math.pow(64,o))+s);o>0;){var a=this.div(r,Math.pow(64,o-1));n.push(128+a%64),o-=1}}}return new Uint8Array(n)},t.prototype.decode=function(t){for(var e,i=!1,n=0,r="",o=0,s=0,a=0,l=0;t.length>n;){var h=t[n++];if(h==this.EOF_byte)e=0!=s?this.decoderError(i):this.EOF_code_point;else if(0==s)this.inRange(h,0,127)?e=h:(this.inRange(h,194,223)?(s=1,l=128,o=h-192):this.inRange(h,224,239)?(s=2,l=2048,o=h-224):this.inRange(h,240,244)?(s=3,l=65536,o=h-240):this.decoderError(i),o*=Math.pow(64,s),e=null);else if(this.inRange(h,128,191))if(a+=1,o+=(h-128)*Math.pow(64,s-a),a!==s)e=null;else{var c=o,u=l;o=0,s=0,a=0,l=0,e=this.inRange(c,u,1114111)&&!this.inRange(c,55296,57343)?c:this.decoderError(i,h)}else o=0,s=0,a=0,l=0,n--,e=this.decoderError(i,h);null!==e&&e!==this.EOF_code_point&&(65535>=e?e>0&&(r+=String.fromCharCode(e)):(e-=65536,r+=String.fromCharCode(55296+(e>>10&1023)),r+=String.fromCharCode(56320+(1023&e))))}return r},t}();__reflect(UTF8.prototype,"UTF8"),window.UTF8=UTF8;var Caches=function(){function t(){}return t.GetDic=function(e){return t.dic[e]||(t.dic[e]=new Listx),t.dic[e]},t.GetListx=function(e){return t.dic[e]||(t.dic[e]=new Listx),t.dic[e]},t.GetArr=function(e){return t.dic[e]||(t.dic[e]=[]),t.dic[e]},t.GetObj=function(e){return t.dic[e]},t.SetObj=function(e,i){t.dic[e]=i},t.dic=new Listx,t}();__reflect(Caches.prototype,"Caches"),window.Caches=Caches;var Vector2Hash=function(){function t(t,e,i){void 0===i&&(i=""),this.width=t,this.height=e,this.v=[];for(var n=0;e>n;n++){var r=[];this.v[n]=r}var o=i.length;for(n=0;o>n;n++){var s=i.charAt(n);s.ToInt()&&this.Set(n%t,n/t)}}return t.prototype.Set=function(t,e){this.v[e][t]=1},t.prototype.Delete=function(t,e){this.v[e][t]=0},t.prototype.Exists=function(t,e){return this.v[e][t]},t.prototype.ExistsPoint=function(t){return this.v[t.y][t.x]},t.prototype.Clear=function(){for(var t=0;t<this.height;t++)for(var e=0;e<this.width;e++)this.v[t][e]=0},Object.defineProperty(t.prototype,"length",{get:function(){return this.height},enumerable:!0,configurable:!0}),t}();__reflect(Vector2Hash.prototype,"Vector2Hash"),window.Vector2Hash=Vector2Hash;var Xml=function(){function t(t){if(this.nodes=[],this.keys={},null!=t&&!t.IsEmpty())for(var e,i,n={beginNode:1,endNode:2,text:3,att:4},r=this.nodes,o=this.keys,s=null,a=function(t){if(t.type==n.beginNode){if(i=t.val.join(""),"root"==i||"TextureAtlas"==i);else if("ox"==i||"SubTexture"==i)e={},r.push(e),s=null;else if("oxs"==i){s||(s=e),s[i]||(s[i]=[]);var a={};s[i].push(a),e=a}}else if(t.type==n.endNode);else if(t.type==n.text)e&&i&&(e[i]=t.val.join("").replace(/&amp;/g,"&").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'"),o[i]||(o[i]=!0));else if(t.type==n.att&&e){var l=t.node.join("");e[l]=t.val.join(""),o[l]||(o[l]=!0)}},l=!1,h=!1,c=[],u=[],d=0,p=!1,f=0,g=0,y=t.length;y>g;g++){var v=t.charAt(g);l?"/"==v?(h=!0,d-=2):">"==v?(a(h?{type:n.endNode,val:c}:{type:n.beginNode,val:c}),l=!1,h=!1,u.length=0,p=!1,c.length=0):c&&" "==v?(a({type:n.beginNode,val:c}),l=!1,h=!1,u.length=0,p=!0,c.length=0):c.push(v):p?f>=2?'"'==v?(f=0,a({type:n.att,node:c,val:u}),u.length=0,c.length=0):u.push(v):"="==v||'"'==v?f++:">"==v?(p=!1,f=0,u.length=0,c.length=0):" "!=v&&c.push(v):"<"==v?(l=!0,c.length=0,3==d&&(a({type:n.text,val:u}),u.length=0),d++):u.push(v)}}return t}();__reflect(Xml.prototype,"Xml"),window.Xml=Xml;var XmlLinqT=function(t){function e(){var e=t.call(this)||this;return e._staticData=!1,e._names=new Arr,e.changedFuncList.Add(e.DoChanged.bind(e)),e}return __extends(e,t),e.prototype.DoChanged=function(t,e,i){"undefined"!=typeof t&&(this._names.Remove(t),this._names.Add(t),this.OnListAddList&&this.OnListAddList.Each(function(t){t(i)}),i.changedFuncList.Add(this.ItemDoChanged.bind(this)),i._parent=this)},e.prototype.ItemDoChanged=function(t,e,i,n){if(this.OnChangedList)for(var r in this.OnChangedList.source)if("Each"!=r){var o=this.OnChangedList.source[r];o(t,e,i,n)}},e.prototype.Remove=function(e){var i=this;if(this.Exists(e)){this.OnRemoveList&&this.OnRemoveList.EachDesc(function(t){try{t&&t(e,i[e])}catch(n){Js.Trace(n)}}.bind(this));try{this._names.Remove(e),this[e].changedFuncList.Remove(this.ItemDoChanged),t.prototype.Remove.call(this,e)}catch(n){Js.Trace(n)}}},e.prototype.GetName=function(t){return this._names.length>t?this._names.getItemAt(t):""},e.prototype.GetValue=function(t){var e=this.GetName(t);return Strx.IsFull(e)?this.g(e):null},e.prototype.Exists=function(e){return t.prototype.Exists.call(this,e)},Object.defineProperty(e.prototype,"Length",{get:function(){return this._names.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._names.length},enumerable:!0,configurable:!0}),e.prototype.OnAdd=function(t,e){var i=this;null==this.OnListAddList&&(this.OnListAddList=new Arr),this.OnListAddList.Add(t),e.OnDispose(function(){i.OnListAddList&&i.OnListAddList.Remove(t)})},e.prototype.OnRemove=function(t,e){var i=this;null==this.OnRemoveList&&(this.OnRemoveList=new Arr),this.OnRemoveList.Add(t),e.OnDispose(function(){i.OnRemoveList&&i.OnRemoveList.Remove(t)})},e.prototype.OnChanged=function(t,e){var i=this;null==this.OnChangedList&&(this.OnChangedList=new Arr),this.OnChangedList.Add(t),e.OnDispose(function(){i.OnChangedList&&i.OnChangedList.Remove(t)})},e.prototype.OnAddSplice=function(t){this.OnListAddList&&this.OnListAddList.Remove(t)},e.prototype.OnRemoveSplice=function(t){this.OnRemoveList&&this.OnRemoveList.Remove(t)},e.prototype.OnChangedSplice=function(t){this.OnChangedList&&this.OnChangedList.Remove(t)},e.prototype.ListenEmpty=function(t,e,i,n){var r=this;if(this._staticData)throw new Error("Static Data Can Not be Binded");var o;this.Exists(e)?(o=this.g(e),o.Listen(function(){t(o[i])},i,n)):t("");var s=function(r){var s=r.id;e==s&&(o=r,o.Listen(function(){t(o[i])},i,n))};this.OnAdd(s,n);var a=function(i){e==i&&t("")};this.OnRemove(a,n);var l=function(){r.OnAddSplice(s),r.OnRemoveSplice(a),s=null,a=null,l=null};n.OnDispose(l)},e.prototype.GetPageSize=function(t){var e=Math.ceil(this.Length/t);return 0>=e&&(e=1),e},e.prototype.GetPage=function(t,i){for(var n=new e,r=t*i,o=t*i+t;o>r;r++)try{var s=this.GetName(r);if(Strx.IsFull(s)){var a=this.g(s);a&&n.Add(a)}}catch(l){Js.Trace(l)}return n},e.prototype.Each=function(t){var e=this;this.EachKey(function(i){try{var n=e.g(i);return t(n)?!0:!1}catch(r){Js.Trace(r)}})},e.prototype.Take=function(t,i){void 0===i&&(i=0);var n=new e,r=0;return this.Each(function(e){try{if(r>=i&&i+t>r&&n.Add(e),r>=i+t)return!0;r++}catch(o){Js.Trace(o)}return!1}),n},e.prototype.s=function(t,e){throw new Error("XmlLinqT: please use Add instead.")},e.prototype.Where=function(t){var i=new e;return this.Each(function(e){try{t(e)&&i.Add(e)}catch(n){Js.Trace(n)}return!1}),i},e.prototype.Reverse=function(){var t=new e,i=this.ToArray();return i.reverse().forEach(function(e){e&&t.Add(e)}.bind(this)),t},e.prototype.Copy=function(){var t=new e;return this.Each(function(e){try{t.Add(e)}catch(i){Js.Trace(i)}return!1}),t},e.prototype.Count=function(t){var e=0;return this.Each(function(i){return t(i)&&e++,!1}),e},e.prototype.All=function(t){var e=!0;return this.Each(function(i){try{if(!t(i))return e=!1,!0}catch(n){Js.Trace(n)}return!1}),e},e.prototype.Any=function(t){var e=!1;return this.Each(function(i){try{if(t(i))return e=!0,!0}catch(n){Js.Trace(n)}return!1}),e},e.prototype.FirstOrDefault=function(t){var e;return this.Each(function(i){try{if(t(i))return e=i,!0}catch(n){Js.Trace(n)}return!1}),e},e.prototype.Max=function(t){var e=-Number.MAX_VALUE;return this.Each(function(i){try{return e=Math.max(e,t(i)),!1}catch(n){Js.Trace(n)}return!1}),e},e.prototype.Min=function(t){var e=Number.MAX_VALUE;return this.Each(function(i){try{return e=Math.min(e,t(i)),!1}catch(n){Js.Trace(n)}return!1}),e},e.prototype.MaxItem=function(t){if(0==this.Length)return null;var e=this.Max(t);return this.FirstOrDefault(function(i){try{return t(i)==e}catch(n){Js.Trace(n)}return!1})},e.prototype.Sum=function(t){var e=0;return this.Each(function(i){try{return e+=t(i),!1}catch(n){Js.Trace(n)}return!1}),e},e.prototype.Select=function(t){var e=[];return this.Each(function(i){try{e.push(t(i))}catch(n){Js.Trace(n)}}),e},e.prototype.ToArray=function(){return this.Select(function(t){try{return t}catch(e){Js.Trace(e)}})},e.prototype.RemoveAll=function(t){var i=new e;return this.Each(function(e){t(e)||i.Add(e)}),i},e.prototype.OrderBy=function(t){if(null==t)return this;var i=new e;if(t instanceof Function){var n=this.ToArray().sort(function(e,i){try{return t(e)-t(i)}catch(n){Js.Trace(n)}return 0});n.forEach(function(t){i.Add(t)})}else{var n=this.ToArray().sort(function(e,i){try{return e[t].ToInt()-i[t].ToInt()}catch(n){Js.Trace(n)}return 0});n.forEach(function(t){i.Add(t)})}return i},e.prototype.GroupBy=function(t){var i=new Listx;return this.Each(function(n){var r=t(n);i.Exists(r)||(i[r]=new e),i[r].Add(n)}),i},e.prototype.Add=function(e,i){void 0===i&&(i=null),e.CreateGSS(i);var n=e.id;t.prototype.s.call(this,n,e)},e.prototype.AddKey=function(e,i){t.prototype.s.call(this,e,i)},e.prototype.Text=function(){return Listx.GetArrText(this.ToArray())},e.prototype.Clear=function(){var e=this;t.prototype.Clear.call(this),this._names.Each(function(t){delete e[t],delete e["_"+t]}),this._names.Clear(),this.ResetLength()},e.prototype.Dispose=function(){this.OnListAddList&&(this.OnListAddList.Clear(),this.OnListAddList=null),this.OnRemoveList&&(this.OnRemoveList.Clear(),this.OnRemoveList=null),this.OnChangedList&&(this.OnChangedList.Clear(),this.OnChangedList=null);for(var e in this)delete this[e];t.prototype.Dispose.call(this)},e}(Observer);__reflect(XmlLinqT.prototype,"XmlLinqT"),window.XmlLinqT=XmlLinqT;var Assert=function(){function t(){}return t.Load=function(e,i){if(t.finished)return void i();t.process=e,t.loaded=i;var n=RES.config.config.groups.preload;n.forEach(function(e){var i=e.split("_");i.length>1&&("png"==i[1]||"jpg"==i[1]?t.assertList[e]=RES.getRes(e):"xml"==i[1]&&t.classes.Add(i[0]))}),t.Next()},t.Next=function(){if(t.index++,t.classes.length>t.index){var e=t.classes.getItemAt(t.index);t.Process(e,t.Next)}else t.loaded&&(t.loaded(),t.loaded=null),t.process=null,t.classes.Clear(),t.classes=null,t.index=-1,t.Next1()},t.Next1=function(){if(t.index++,t.classes1&&t.classes1.Length>t.index){var e=t.classes1.getItemAt(t.index);NForm.SetTimeout(100,function(){t.Process(e,t.Next1)})}else t.loaded&&(t.loaded(),t.loaded=null),t.process=null,t.classes1.Clear(),t.classes1=null,t.finished=!0},t.Process=function(e,i){t.processAtlasName=e,t.process&&t.process(e,0,1),Js.Trace("Load Atlas:"+e);var n=RES.getRes(e+"_png"),r=RES.getRes(e+"_xml"),o=new Xml(r);o.nodes.forEach(function(e){var i=new egret.Texture;i.$bitmapData=n.$bitmapData,"undefined"==typeof e.frameX&&(e.frameX=0),"undefined"==typeof e.frameY&&(e.frameY=0),e.sourceWidth?i.$initData(e.x,e.y,e.width,e.height,-e.frameX,-e.frameY,e.sourceWidth,e.sourceHeight,n.textureWidth,n.textureHeight,e.rotated):e.frameWidth?i.$initData(e.x,e.y,e.width,e.height,-e.frameX,-e.frameY,e.frameWidth,e.frameHeight,n.textureWidth,n.textureHeight,e.rotated):i.$initData(e.x,e.y,e.width,e.height,-e.frameX,-e.frameY,e.width,e.height,n.textureWidth,n.textureHeight,e.rotated);var r=i;t.assertList.Exists(e.name)&&Js.Trace("Exists Texture:"+e.name),e.name.indexOf("_")>-1&&(t.aniAssertList[e.name]=r),t.assertList[e.name]=r}),i&&i()},t.Img=function(t){if(t.indexOf(".")>-1){if(t.StartWith("http")){var e=new NSprite(t,-1,-1);return e}if(-1==t.indexOf("/")){var i=new NSprite(Config.src+"ui/"+t,-1,-1);return i}if(t.indexOf("lang")>-1){var n=new NSprite(Config.src+t.replace("lang","lang/"+Lang.type),-1,-1);return n}var r=new NSprite(Config.src+t,-1,-1);return r}if(t.indexOf("/")>-1){var r=new Sp(t.split("/")[1]);return r}var r=new Sp(t);return r},t.Trace=function(){t.process},t.assertList=new Listx,t.aniAssertList=new Listx,t.classes=new Arr,t.classes1=new Arr,t.finished=!1,t.index=-1,t.processAtlasName="",t}();__reflect(Assert.prototype,"Assert"),window.Assert=Assert,String.prototype.format||(String.prototype.format=function(t){var e=t;return this.replace(/{(\d+)}/g,function(t,i){return"undefined"!=typeof e[i]?e[i]:t})});var Lang=function(){function t(){}return t.Setup=function(e){t.list=e},t.Get=function(e){if(!t.list)return"";if(t.list.hasOwnProperty(e)){var i=t.list[e];return i.indexOf("&lt;")>-1&&i.indexOf("&gt;")>-1&&(i=i.replace(/&lt;/g,"<").replace(/&gt;/g,">")),i.indexOf(" ")>-1&&(i=i.replace(/ /g," ")),i}return""},t.Exists=function(e){return t.list.hasOwnProperty(e)},t.PT=function(e){null==e&&(e="");try{var i=e.split("|");if(1==i.length)return t.GetLangText(e);var n=t.GetLangText(i[0]);i.shift();var r=n.format(i);return r}catch(o){return e}},t.GetLangText=function(e){if(Strx.IsEmpty(e))return"";if(null==t.Get)return e;if(t.Get(e)){var i=t.Get(e);Strx.IsFull(i)&&(e=i,Js.showTrace)}else if(e.indexOf(">")>-1&&e.indexOf("<")>-1){for(var n=e.split("<"),r=0,o=n.length;o>r;r++){for(var s=n[r].split(">"),a=0,l=s.length;l>a;a++)s[a]=t.GetLangText(s[a]);n[r]=s.join(">")}e=n.join("<")}else Js.showTrace;return e},t.AddTransList=function(e){Js.showTrace&&(t.transList[e]=!0)},t.type=LangType.Chs,t}();__reflect(Lang.prototype,"Lang"),window.Lang=Lang;var Color=function(){function t(t){void 0===t&&(t=0),this.color=0,this.Set(t)}return t.prototype.Set=function(t){void 0===t&&(t=0),this.color=t},Object.defineProperty(t.prototype,"a",{get:function(){return this.color>>24&255},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"r",{get:function(){return this.color>>16&255},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"g",{get:function(){return this.color>>8&255},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return 255&this.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rgb",{get:function(){return"#"+Strx.PaddingRight(this.r.toString(16),2,"0")+Strx.PaddingRight(this.g.toString(16),2,"0")+Strx.PaddingRight(this.b.toString(16),2,"0")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Green",{get:function(){return 8649503},enumerable:!0,configurable:!0}),Object.defineProperty(t,"GreenGame",{get:function(){return"#83fb1f"},enumerable:!0,configurable:!0}),t.Parse=function(e){return new t(e.replace("#","0x").ToInt())},t}();__reflect(Color.prototype,"Color"),window.Color=Color;var Parms=function(){function t(){}return t.phone=!1,t}();__reflect(Parms.prototype,"Parms"),window.Parms=Parms;var BCenter=function(t){function e(e,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0);var o=t.call(this)||this;return null==e?o:(o.b=e,e.OnLoaded&&0==e.width?e.OnLoaded(function(){o.disposed||(e.x=-e.width/2+n,0==i?e.y=-e.height/2+r:1==i&&(e.y=-e.height+r))}):(e.x=-e.width/2+n,0==i?e.y=-e.height/2+r:1==i&&(e.y=-e.height+r)),o.Add(e),o)}return __extends(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this.b.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.b.height},enumerable:!0,configurable:!0}),e}(Sx);__reflect(BCenter.prototype,"BCenter"),window.BCenter=BCenter;var N9=function(t){function e(e,i){void 0===i&&(i=null);var n=t.call(this)||this;return n.img=Assert.Img(e),n.img.OnLoaded(function(){n.img.fillMode=egret.BitmapFillMode.SCALE,null==i?n.img.scale9Grid=new Rectangle(n.img.texture.$bitmapWidth/2,n.img.texture.$bitmapHeight/2,1,1):n.img.scale9Grid=i}),n.Add(n.img),n}return __extends(e,t),e.prototype.OnLoaded=function(t){this.img.OnLoaded(function(){t()})},Object.defineProperty(e.prototype,"width",{get:function(){return this.img.width},set:function(t){this.img.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.img.height},set:function(t){this.img.height=t},enumerable:!0,configurable:!0}),e}(Sx);__reflect(N9.prototype,"N9"),window.N9=N9;var ColorChange=function(){function t(e){void 0===e&&(e=null),this.data=[],e=this.fixMatrix(e),this.copyMatrix(e.length==t.LENGTH?e:t.IDENTITY_MATRIX)}return t.prototype.reset=function(){for(var e=0;e<t.LENGTH;e++)this.data[e]=t.IDENTITY_MATRIX[e]},t.prototype.adjustColor=function(t,e,i,n){this.adjustHue(n),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},t.prototype.adjustBrightness=function(t){t=this.cleanValue(t,100),0==t||isNaN(t)||this.multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])},t.prototype.adjustContrast=function(e){if(e=this.cleanValue(e,100),0!=e&&!isNaN(e)){var i;0>e?i=127+e/100*127:(i=e%1,i=0==i?t.DELTA_INDEX[e]:t.DELTA_INDEX[e<<0]*(1-i)+t.DELTA_INDEX[(e<<0)+1]*i,i=127*i+127),this.multiplyMatrix([i/127,0,0,0,.5*(127-i),0,i/127,0,0,.5*(127-i),0,0,i/127,0,.5*(127-i),0,0,0,1,0,0,0,0,0,1])}},t.prototype.adjustSaturation=function(t){if(t=this.cleanValue(t,100),0!=t&&!isNaN(t)){var e=1+(t>0?3*t/100:t/100),i=.3086,n=.6094,r=.082;this.multiplyMatrix([i*(1-e)+e,n*(1-e),r*(1-e),0,0,i*(1-e),n*(1-e)+e,r*(1-e),0,0,i*(1-e),n*(1-e),r*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1])}},t.prototype.adjustHue=function(t){if(t=this.cleanValue(t,180)/180*Math.PI,0!=t&&!isNaN(t)){var e=Math.cos(t),i=Math.sin(t),n=.213,r=.715,o=.072;this.multiplyMatrix([n+e*(1-n)+i*-n,r+e*-r+i*-r,o+e*-o+i*(1-o),0,0,n+e*-n+.143*i,r+e*(1-r)+.14*i,o+e*-o+i*-.283,0,0,n+e*-n+i*-(1-n),r+e*-r+i*r,o+e*(1-o)+i*o,0,0,0,0,0,1,0,0,0,0,0,1])}},t.prototype.concat=function(e){e=this.fixMatrix(e),e.length==t.LENGTH&&this.multiplyMatrix(e)},t.prototype.toString=function(){return"ColorChange [ "+this.data.join(" , ")+" ]"},t.prototype.toArray=function(){return this.data.slice(0,20)},t.prototype.copyMatrix=function(e){for(var i=t.LENGTH,n=0;i>n;n++)this.data[n]=e[n]},t.prototype.multiplyMatrix=function(t){for(var e=[],i=0;5>i;i++){for(var n=0;5>n;n++)e[n]=this.data[n+5*i];for(var n=0;5>n;n++){for(var r=0,o=0;5>o;o++)r+=t[n+5*o]*e[o];this.data[n+5*i]=r}}},t.prototype.cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},t.prototype.fixMatrix=function(e){return void 0===e&&(e=null),null==e?t.IDENTITY_MATRIX:(e instanceof t&&(e=e.slice(0)),e.length<t.LENGTH?e=e.slice(0,e.length).concat(t.IDENTITY_MATRIX.slice(e.length,t.LENGTH)):e.length>t.LENGTH&&(e=e.slice(0,t.LENGTH)),e)},t.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],t.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],t.LENGTH=t.IDENTITY_MATRIX.length,t}();__reflect(ColorChange.prototype,"ColorChange"),window.ColorChange=ColorChange;var NAniBx=function(t){function e(e,i,n){void 0===i&&(i=!0),void 0===n&&(n=6);var r=t.call(this,i)||this;return r.Setup(e,n),r}return __extends(e,t),e.prototype.Setup=function(t,e){var i=this;void 0===e&&(e=9);var n=null;if("string"==typeof t){n=new Arr;var r=Assert.aniAssertList;r.EachKey(function(e){e.StartWith(t+"_")&&n.Add(e)})}n&&(t=n);var o=t;this.enterFrame=function(t){i.img.SetVal(o.getItemAt(t))},this.frameRate=e,this.Load(o)},e}(NAniBase);__reflect(NAniBx.prototype,"NAniBx"),window.NAniBx=NAniBx;var NAniSdp=function(t){function e(e,i,n,r,o){void 0===n&&(n=null),void 0===r&&(r=!0),void 0===o&&(o=12);var s=t.call(this)||this;return s.totalFrame=0,s.frames=[],s._stop=!1,s._stopAtEnd=!1,s._timerHandleIndex=0,s._frame=0,s._frameRate=12,s.overAndRemove=r,s.actPath=i,NAniXml.Load(e,function(t){NForm.LazyCall(function(){null!=t&&(s.actList=t,s.LoadAct(i))})},!1),s}return __extends(e,t),e.prototype.LoadAct=function(t,e,i,n){var r=this;void 0===e&&(e=null),void 0===i&&(i=!0),void 0===n&&(n=12),this.disposed||Src.ReadTxt(Config.icoPath+t+".xml",function(t){if(!r.disposed&&null!=t&&0!=t.length){r.frameRate=n;var i=new Xml(t),o=i.nodes;r.skeletonTrees=[],r.skeletonActions=[],r.skeletonSkins=[],o.forEach(function(t){"SkeletonTree"==t.type?r.skeletonTrees.push(t):"SkeletonAction"==t.type?r.skeletonActions.push(t):"SkeletonSkin"==t.type&&r.skeletonSkins.push(t)}),r.skeletonActions=r.skeletonActions.sort(function(t,e){return t.Tag.ToInt()-e.Tag.ToInt()}),r.skeletonSkins=r.skeletonSkins.sort(function(t,e){return t.Tag.ToInt()-e.Tag.ToInt()}),r.totalFrame=r.skeletonActions[0].TotalFrame,r.frameRate=n,r.ani=new Sx,r.Add(r.ani),r.TimerHandle(),e&&e()}})},e.prototype.Play=function(t,e){void 0===e&&(e=null),this.ani&&(t.IsEmpty()&&this.actList.length>0&&(t=this.actList.GetName(0)),this.name=t,this._frame=0,this.playEndFunc=e)},e.prototype.TimerHandle=function(){var t=this;if(this.ani){this._timerHandleIndex++;var e=this._timerHandleIndex;NForm.SetInterval(1e3/this.frameRate,function(){if(t.disposed)return!0;if(e!=t._timerHandleIndex)return!0;if(!t._stop&&t.totalFrame>0){if(t._frame>=t.totalFrame){if(t.playEndFunc&&(t.playEndFunc(),t.playEndFunc=null),t.overAndRemove)return t.Dispose(),!0;t._stopAtEnd&&t.Stop(),t._frame=0;for(var i=0,n=t.skeletonSkins.length;n>i;i++){var r=t.skeletonSkins[i];r.img="",r.bx&&(r.bx.RemoveMe(),r.bx=null)}}for(var o=function(e,i){var n=t.skeletonSkins[e];if(n.oxs)for(var r=0,o=n.oxs.length;o>r;r++){var s=n.oxs[r];if(t._frame==s.Frame.ToInt()){if(n.img!=s.Name)if(n.img=s.Name,n.bx&&n.bx.RemoveMe(),0==t.actList.length){var a=Assert.Img(Config.icoPath+t.actPath.substr(0,t.actPath.lastIndexOf("/"))+"/"+n.img);t.ani.Add(a),n.bx=a}else if(t.actList[n.img]){var a=new Bx(t.actList[n.img][0].texture);t.ani.Add(a),n.bx=a}else n.first||(Js.Trace("Mis Img: "+n.img),n.first=!0);break}}var l=t.skeletonActions[e];if(l.oxs){for(var h=!1,r=0,o=l.oxs.length;o>r;r++){var s=l.oxs[r];if(t._frame==s.Frame.ToInt()&&(l.data=s,h=!0),h){l.nextData=s;break}}n.bx&&l.data&&n.bx.OnLoaded(function(){n.bx.anchorOffsetX=n.bx.width*parseFloat(l.AnchorX),n.bx.anchorOffsetY=n.bx.height*parseFloat(l.AnchorY),n.bx.x=-t.GetFrameVal(l.data,l.nextData,"PosX"),n.bx.y=-t.GetFrameVal(l.data,l.nextData,"PosY"),n.bx.scaleX=t.GetFrameValTween(l.data,l.nextData,"ScaleX"),n.bx.scaleY=t.GetFrameValTween(l.data,l.nextData,"ScaleY"),n.bx.skewX=t.GetFrameValTween(l.data,l.nextData,"SkewX"),n.bx.skewY=t.GetFrameValTween(l.data,l.nextData,"SkewY"),n.bx.alpha=t.GetFrameValTween(l.data,l.nextData,"Opacity")/255,n.bx.rotation=t.GetFrameValTween(l.data,l.nextData,"Rot"),"1"==l.data.Visible?n.bx.Show():n.bx.Hide()})}},i=0,n=t.skeletonSkins.length;n>i;i++)o(i,n);t._frame++}return!1})}},e.prototype.GetFrameVal=function(t,e,i){return parseFloat(t[i])},e.prototype.GetFrameValTween=function(t,e,i){return e?t.Frame==t.Frame?parseFloat(t[i]):(parseFloat(e[i])-parseFloat(t[i]))*(this._frame-t.Frame)/(e.Frame-t.Frame)+parseFloat(t[i]):parseFloat(t[i])},e.prototype.StopAtEnd=function(){this._stopAtEnd=!0},e.prototype.Stop=function(){this._stop=!0},e.prototype.Continue=function(){this._stop=!1},e.prototype.End=function(t){this.overAndRemove&&this.Dispose()},Object.defineProperty(e.prototype,"frameRate",{get:function(){return this._frameRate},set:function(t){0>=t&&(t=12),this._frameRate!=t&&(this._frameRate=t,this.TimerHandle())},enumerable:!0,configurable:!0}),e}(Sx);__reflect(NAniSdp.prototype,"NAniSdp"),window.NAniSdp=NAniSdp;var NAniSx=function(t){function e(e,i,n,r,o,s,a){void 0===o&&(o=!1),void 0===s&&(s=null),void 0===a&&(a=!0);var l=t.call(this,a)||this;return l.Setup(e,i,n,r,o,s),l}return __extends(e,t),e.prototype.Setup=function(e,i,n,r,o,s){var a=this;void 0===o&&(o=!1),void 0===s&&(s=null),this.backForth=o,this.intervalObj={},this.framesCount=r,this.finishFunc=s,this.dis=e,t.prototype.Add.call(this,e);var l=new Arr;if(o)for(var h=0;2*r>h;h++)l.Add(this);else for(var h=0;r>h;h++)l.Add(this);for(var c in i)this.intervalObj[c]=(n[c]-i[c])/this.framesCount;this.enterFrame=function(t){if(o){var l=t;if(l>=r){for(var h in i)e[h]=n[h]-(l-r+1)*a.intervalObj[h];l==2*r-1&&s&&s()}else for(var h in i)e[h]=i[h]+l*a.intervalObj[h]}else{var l=t;for(var h in i)e[h]=i[h]+l*a.intervalObj[h];l==r-1&&s&&s()}},this.Load(l)},Object.defineProperty(e.prototype,"width",{get:function(){return this.dis.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.dis.height},enumerable:!0,configurable:!0}),e}(NAniBase);__reflect(NAniSx.prototype,"NAniSx"),window.NAniSx=NAniSx;var NAniXml=function(t){function e(i,n,r,o){void 0===r&&(r=!0),void 0===o&&(o=12);var s=t.call(this)||this;return s._stop=!1,s._stopAtEnd=!1,s._timerHandleIndex=0,s._frame=0,s._frameRate=12,s.overAndRemove=r,s.path=i,e.Load(i,function(t){NForm.LazyCall(function(){if(null==t)return Js.Trace("NAniXml actList null: "+i),s.RemoveMe(),void s.Dispose();if(!s.disposed){try{s.actList=t,s.frameRate=o,s.ani=new Bx(null),s.info=s.actList.GetValue(0)[0],s.info&&s.info.texture.Keep(),s.Add(s.ani),s.Play(n),s.TimerHandle()}catch(e){Js.Trace(e)}s.loadedFuncList&&s.loadedFuncList.Each(function(t){t()})}})}),s}return __extends(e,t),e.LoadOne=function(t,i,n,r){if(void 0===n&&(n=!0),null==e.oneActList&&(e.oneActList=new Listx),e.oneActList.Exists(t))try{var o=e.oneActList[t];if(!o.GetValue(0)[0].texture.disposed)return void NForm.LazyCall(function(){r(o)})}catch(s){Js.Trace(s)}Src.ReadTxt(Config.icoPath+t+".xml",function(o){Src.Read(Config.icoPath+t+".png",function(s){NForm.LazyCall(function(){if(e.oneActList.Exists(t))try{var a=e.oneActList[t];if(!a.GetValue(0)[0].texture.disposed)return void r(a)}catch(l){Js.Trace(l)}if(null==o||0==o.length||null==s)return void r(null);Js.Trace(t);var h=new Xml(o),c=0;h.nodes.forEach(function(r){var o=r.name,a=r.name.split("_");c++,o=e.getNameFunc?e.getNameFunc(a,t):t.split("/")[1],e.getIndexFunc&&(c=e.getIndexFunc(a,t)),r.index=c,i.Exists(o)||(i[o]=[]),i[o].push(r);var l=new egret.Texture;l.$bitmapData=s.bitmapData,n?("undefined"==typeof r.frameX&&(r.frameX=0),"undefined"==typeof r.frameY&&(r.frameY=0),r.sourceWidth?l.$initData(r.x,r.y,r.width,r.height,-r.frameX,-r.frameY,r.sourceWidth,r.sourceHeight,s.bitmapWidth,s.bitmapHeight,r.rotated):r.frameWidth?l.$initData(r.x,r.y,r.width,r.height,-r.frameX,-r.frameY,r.frameWidth,r.frameHeight,s.bitmapWidth,s.bitmapHeight,r.rotated):l.$initData(r.x,r.y,r.width,r.height,-r.frameX,-r.frameY,r.width,r.height,s.bitmapWidth,s.bitmapHeight,r.rotated)):l.$initData(r.x,r.y,r.width,r.height,0,0,r.width,r.height,s.bitmapWidth,s.bitmapHeight,r.rotated),r.texture=Textures.GetTextures(l,s.path)}),i.EachKey(function(t){i[t]=i[t].sort(function(t,e){return t.index-e.index})}),e.oneActList[t]=i,r(i)})})})},e.Load=function(t,i,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=null),null==r&&(r=new Listx),-1==t)i&&i(r);else{var o=null;if("string"==typeof t?(o=[],o.push(t)):o=t,0==o.length)i&&i(r);else{var s=o.splice(0,1)[0];e.LoadOne(s,r,n,function(t){e.Load(o,i,n,t)})}}},e.prototype.Play=function(t,e){void 0===e&&(e=null),this.ani&&(this.name=t,this._frame=0,e&&(this.playEndFunc=e))},e.prototype.TimerHandle=function(){var t=this;if(this.ani){this._timerHandleIndex++;var e=this._timerHandleIndex;NForm.SetInterval(1e3/this.frameRate,function(){t.path;if(t.disposed)return!0;if(e!=t._timerHandleIndex)return!0;if(t.topVisible){if(!t._stop||null==t.ani.$bitmapData)if(t.name.IsFull()){var i=t.actList[t.name];if((null==i||0==i.length)&&Js.showTrace)throw new Error("Error nanixml: "+t.path+" name:"+t.name);if(i&&i.length>0){if(t._frame>=i.length){if(t.playEndFunc&&(t.playEndFunc(),t.playEndFunc=null),t.playEndFunc2&&(t.playEndFunc2(),t.playEndFunc2=null),t.overAndRemove)return t.Dispose(),!0;t._stopAtEnd&&t.Stop(),t._frame=0}t.ani&&t.ani.SetBitmap(i[t._frame].texture),t._frame++}}else{var i=t.actList;if((null==i||0==i.length||1==i.length)&&Js.showTrace)throw new Error("Error nanixml: "+t.path+" name:"+t.name);if(i&&i.length>0){if(t._frame>=i.length){if(t.playEndFunc&&(t.playEndFunc(),t.playEndFunc=null),t.playEndFunc2&&(t.playEndFunc2(),t.playEndFunc2=null),t.overAndRemove)return t.Dispose(),!0;t._stopAtEnd&&t.Stop(),t._frame=0}t.ani.SetBitmap(i.GetValue(t._frame)[0].texture),t._frame++}}return!1}})}},Object.defineProperty(e.prototype,"width",{get:function(){return this.info?this.info.frameWidth:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.info?this.info.frameHeight:0},enumerable:!0,configurable:!0}),e.prototype.StopAtEnd=function(){this._stopAtEnd=!0},e.prototype.Stop=function(){this._stop=!0},e.prototype.Continue=function(){this._stop=!1},e.prototype.End=function(t){this.overAndRemove&&this.Dispose()},Object.defineProperty(e.prototype,"frameRate",{get:function(){return this._frameRate},set:function(t){0>=t&&(t=12),this._frameRate!=t&&(this._frameRate=t,this.TimerHandle())},enumerable:!0,configurable:!0}),e.prototype.OnLoaded=function(t){null==this.loadedFuncList&&(this.loadedFuncList=new Arr),this.loadedFuncList.Add(t)},e.prototype.Dispose=function(){this.playEndFunc=null,this.playEndFunc2=null,this.actList=null,this.info&&this.info.texture.Release(),this.info=null,this.ani=null,t.prototype.Dispose.call(this)},e}(Sx);__reflect(NAniXml.prototype,"NAniXml"),window.NAniXml=NAniXml;var Csv=function(){function t(t){var e=this;if(this.nodes=[],this.keys={},this.keyArr=[],null!=t&&!t.IsEmpty())for(var i=0,n=[],r=!1,o=!1,s=[],a=function(a,h){var c=t.charAt(a);if(","==c)if(r)s.push(c);else{var u=s.join("");n.push(u),s.length=0,r=!1}else if("\n"==c||"\r"==c){if(n.length>0){var u=s.join("");
if(n.push(u),s.length=0,r=!1,0==i)n.forEach(function(t){e.keyArr.push(t),e.keys[t]=!0});else{var d={},p=0;l.keyArr.forEach(function(t){d[t]=n[p],p++}),l.nodes.push(d)}n.length=0}else s.length=0,r=!1;i++}else 0==s.length&&'"'==c?r=!0:r?o||"\\"!=c?('"'==c?r=!1:s.push(c),o=!1):o=!0:s.push(c)},l=this,h=0,c=t.length;c>h;h++)a(h,c)}return t}();__reflect(Csv.prototype,"Csv"),window.Csv=Csv;var DateTime=function(){function t(t){void 0===t&&(t=null),null==t?t=new Date:t instanceof Date?this.d=t:Strx.IsString(t)?this.d=Time.ParseTime(t.toString()):t=new Date}return Object.defineProperty(t.prototype,"time",{get:function(){return this.d.getTime()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tick",{get:function(){return this.time},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Year",{get:function(){return this.d.getFullYear().ToInt()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Month",{get:function(){return this.d.getMonth().ToInt()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DayOfWeek",{get:function(){return this.d.getDay().ToInt()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Day",{get:function(){return this.d.getDate().ToInt()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Hour",{get:function(){return this.d.getHours().ToInt()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Minute",{get:function(){return this.d.getMinutes().ToInt()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Second",{get:function(){return this.d.getSeconds().ToInt()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Millisecond",{get:function(){return this.d.getMilliseconds().ToInt()},enumerable:!0,configurable:!0}),t.prototype.Add=function(e){var i=new t(new Date(this.d.getTime()));return i.d.setTime(i.d.getTime()+e.TotalMilliseconds),i},t.prototype.AddDays=function(e){var i=new t(new Date(this.d.getTime()));return i.d.setTime(i.d.getTime()+24*e*60*60*1e3),i},t.prototype.AddHours=function(e){var i=new t(new Date(this.d.getTime()));return i.d.setTime(i.d.getTime()+60*e*60*1e3),i},t.prototype.AddMinutes=function(e){var i=new t(new Date(this.d.getTime()));return i.d.setTime(i.d.getTime()+60*e*1e3),i},t.prototype.AddSeconds=function(e){var i=new t(new Date(this.d.getTime()));return i.d.setTime(i.d.getTime()+1e3*e),i},t.prototype.AddMilliseconds=function(e){var i=new t(new Date(this.d.getTime()));return i.d.setTime(i.d.getTime()+e),i},t.prototype.toString=function(t){return void 0===t&&(t=!1),t?Time.ParseStringWithMilliseconds(this.d):Time.ParseString(this.d)},t}();__reflect(DateTime.prototype,"DateTime"),window.DateTime=DateTime;var NBColorText=function(t){function e(e,i,n,r,o,s){void 0===i&&(i=""),void 0===n&&(n=!1),void 0===r&&(r=13),void 0===o&&(o=0),void 0===s&&(s=null);var a=t.call(this,"",n,r,o)||this;return a.Bind(e,i,s),a}return __extends(e,t),e.prototype.ChangeBind=function(t){this.item!=t&&this.Bind(t,this.bindKey,this.act)},e}(NColorText);__reflect(NBColorText.prototype,"NBColorText"),window.NBColorText=NBColorText;var NBKLabel=function(t){function e(e,i,n,r,o,s,a,l){void 0===n&&(n=""),void 0===r&&(r=17),void 0===o&&(o=-1),void 0===s&&(s=!1),void 0===a&&(a=-1),void 0===l&&(l=null);var h=t.call(this,"",o,s,a)||this;return h.keyType=r,Strx.IsFull(e)&&(h.key=e),h.Bind(i,n,l),h}return __extends(e,t),e.prototype.ChangeBind=function(t){this.item!=t&&this.Bind(t,this.bindKey,this.act)},e}(NLabel);__reflect(NBKLabel.prototype,"NBKLabel"),window.NBKLabel=NBKLabel;var NBLabel=function(t){function e(e,i,n,r,o,s,a,l){void 0===i&&(i=""),void 0===n&&(n=-1),void 0===r&&(r=!1),void 0===o&&(o=-1),void 0===s&&(s=null),void 0===a&&(a=0),void 0===l&&(l=-1);var h=t.call(this,"",n,r,o,a,l)||this;return h.Bind(e,i,s),h}return __extends(e,t),e.prototype.ChangeBind=function(t){this.item!=t&&this.Bind(t,this.bindKey,this.act)},e}(NLabel);__reflect(NBLabel.prototype,"NBLabel"),window.NBLabel=NBLabel;var NButton=function(t){function e(i,n,r,o){void 0===n&&(n=-1),void 0===r&&(r=!0),void 0===o&&(o=-1);var s=t.call(this)||this;s.filterDoubleClickTime=-1,s._filterDoubleClick=!1,s._val=i,s.filterDoubleClickTime=o,s.bg=e.bgRender(n);var a=new Sx;if(a.Add(s.bg),i.indexOf("/")>-1)s.l=Assert.Img(i),s.l.OnLoaded(function(){s.l.Pos((s.w-s.l.width)/2,(s.h-s.l.height)/2)}.bind(s)),s.l.mouseEnabled=!1,a.Add(s.l);else if(i.indexOf(".")>-1)s.l=Assert.Img("lang/"+i),s.l.OnLoaded(function(){s.l.Pos((s.w-s.l.width)/2,(s.h-s.l.height)/2)}.bind(s)),s.l.mouseEnabled=!1,a.Add(s.l);else{var l=i;l=Lang.PT(l),s.l=e.lRender(n,l,s.bg.width,s.bg.height),s.l.mouseEnabled=!1,a.Add(s.l)}s.bgOn=e.bgOnRender(n);var h=null;if(s.bgOn)if(h=new Sx,h.Add(s.bgOn),i.indexOf(".")>-1)s.lOn=Assert.Img("lang/"+i),s.lOn.OnLoaded(function(){s.lOn.Pos((s.w-s.lOn.width)/2,(s.h-s.lOn.height)/2)}.bind(s)),s.lOn.mouseEnabled=!1,h.Add(s.lOn);else{var l=i;l=Lang.PT(l),s.lOn=e.lOnRender(n,l,s.bg.width,s.bg.height),null==s.lOn&&(s.lOn=e.lRender(n,l,s.bg.width,s.bg.height)),s.lOn.mouseEnabled=!1,h.Add(s.lOn)}s.buttonMode=!0,s.b=new NSButton(a,h,NSButton.musicBG,r,o),s.Add(s.b);return s}return __extends(e,t),Object.defineProperty(e.prototype,"val",{get:function(){return this._val},set:function(t){this.l&&(this.l.val=t),this.lOn&&(this.lOn.val=t),this._val=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.bg.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.bg.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"w",{get:function(){return this.bg.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"h",{get:function(){return this.bg.height},enumerable:!0,configurable:!0}),e.prototype.On=function(){this.b.On()},e.prototype.Off=function(){this.b.Off()},e}(Sx);__reflect(NButton.prototype,"NButton"),window.NButton=NButton;var NCheck=function(t){function e(i,n,r,o,s){void 0===s&&(s=16776148);var a=t.call(this)||this;if(a.val=i,a.act=o,a.b=new Sx,a.Add(a.b),null==o){var l=e.offStyle();a.b.Add(l),a.fg=e.onStyle(),a.fg.Hide(),a.b.Add(a.fg),i.length>2&&"i:"==i.substr(0,2)?(a.l=Assert.Img(i.substr(2,i.length-2)),a.Add(a.l,l.width+3,(l.height-a.l.height)/2)):(a.l=new NLabel(i,16776148,!1,e.fontSize),a.Add(a.l,l.width+2,(l.height-a.l.height)/2))}else{a.p=new NPanel(n,r),o(a.p,i);var h=new NSButton(a.p);a.b.Add(h,0,0)}if(null==o){var c=new Sx;a.Add(c),c.Hide()}return a}return __extends(e,t),Object.defineProperty(e.prototype,"check",{get:function(){return this._check},set:function(t){this._check=t,this.p?t||(this.p.filters=null):this.fg.visible=t},enumerable:!0,configurable:!0}),e}(Sx);__reflect(NCheck.prototype,"NCheck"),window.NCheck=NCheck;var NCountDown=function(t){function e(e,i,n,r,o){void 0===e&&(e=!0),void 0===i&&(i=""),void 0===n&&(n=-1),void 0===r&&(r=16777215),void 0===o&&(o=null);var s=t.call(this)||this;return s.tick=-1,s.stop=0,s._defaultVal="",s.item=new Listx,s.func=o,s.isTime=e,s.item.index=0,i.IsFull()?s.l=new NNum("",i,!1,n):s.l=new NLabel("",r,!1,n),s.item.Listen(function(){e?s.item.index.ToInt()<=0&&s.defaultVal.IsFull()?o?s.l.val=o(s.defaultVal):s.l.val=s.defaultVal:o?s.l.val=o(Time.GetTimeSpan(s.item.index)):s.l.val=Time.GetTimeSpan(s.item.index):0==s.item.index.ToInt()&&s.defaultVal.IsFull()?o?s.l.val=o(s.defaultVal):s.l.val=s.defaultVal:o?s.l.val=o(s.item.index):s.l.val=s.item.index},"index",s.l),s.Add(s.l),s}return __extends(e,t),Object.defineProperty(e.prototype,"align",{get:function(){return this.l.align},set:function(t){this.l.align=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultVal",{get:function(){return this._defaultVal},set:function(t){this._defaultVal=t,0==this.item.index.ToInt()&&(this.l.val=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"val",{get:function(){return this.item.index.ToInt()},enumerable:!0,configurable:!0}),e.prototype.Start=function(t,e,i){var n=this;void 0===e&&(e=null),void 0===i&&(i=null),this.Stop(),this.stop++;var r=this.stop;this.allTime=t,this.item.s("index",t),this.startTime=(new Date).getTime(),NForm.SetInterval(500,function(){if(r!=n.stop)return r!=n.stop;var o=(new Date).getTime(),s=(o-n.startTime)/1e3,a=Math.floor(t+s*n.tick);return 0>a&&(a=0),n.item.index=a,n.leftTime=a,i&&i(),0>=a&&(n.Stop(),e&&e()),r!=n.stop})},e.prototype.Stop=function(){this.stop++,this.item.index=0},e.prototype.StopAt=function(t){this.stop++,this.item.index=t},e.prototype.Dispose=function(){this.Stop(),this.func=null,t.prototype.Dispose.call(this)},e}(Sx);__reflect(NCountDown.prototype,"NCountDown"),window.NCountDown=NCountDown,String.prototype.IsFull||(String.prototype.IsFull=function(){return Strx.IsFull(this)}),String.prototype.IsEmpty||(String.prototype.IsEmpty=function(){return Strx.IsEmpty(this)}),String.prototype.ToInt||(String.prototype.ToInt=function(){if(null==this||""==this)return 0;var t=parseInt(this);return isNaN(t)?0:t}),String.prototype.WriteLog||(String.prototype.WriteLog=function(){return Js.Trace(this)}),String.prototype.TrueLength||(String.prototype.TrueLength=function(){return Strx.TrueLength(this)}),String.prototype.PaddingLeft||(String.prototype.PaddingLeft=function(t,e){return Strx.PaddingLeft(this,e,t)}),String.prototype.PaddingRight||(String.prototype.PaddingRight=function(t,e){return Strx.PaddingRight(this,e,t)}),String.prototype.Trim||(String.prototype.Trim=function(){return Strx.Trim(this)}),String.prototype.StartWith||(String.prototype.StartWith=function(t){return this.length>=t.length&&this.substr(0,t.length)==t?!0:!1});var Strx=function(){function t(){}return t.Setup=function(){},t.Rnd=function(t){return t=t,Math.floor(Math.random()*t)},t.Int=function(t){var e=0;try{e=parseInt(t)}catch(i){e=0}return e},t.IsEmpty=function(t){return null==t||void 0==t||0==t.length?!0:!1},t.IsFull=function(e){return!t.IsEmpty(e)},t.PaddingLeft=function(t,e,i){if(t.length>=e)return t.substr(0,e);for(var n=e-t.length,r=0;n>r;r++)t=i+t;return t},t.PaddingRight=function(t,e,i){if(t.length>=e)return t.substr(0,e);for(var n=e-t.length,r=0;n>r;r++)t+=i;return t},t.Trim=function(t){for(;" "==t.substr(0,1);)t=t.substr(1);for(;" "==t.substr(-1,1);)t=t.substr(0,t.length-1);return t},t.GetSmaNum=function(t){var e="";if(e=Lang.type==LangType.Cht?"萬":"万",1e4>t)return t.toString();var i=(t/1e4).ToInt(),n=t-1e4*i;return 0==n?i+e:i+"."+n.toString().substring(0,1)+e},t.TrueLength=function(e){if(t.IsEmpty(e))return 0;for(var i=0,n=0,r=e.length;r>n;n++){var o=e.charCodeAt(n);0>o||o>127?i+=2:i++}return i},t.Num2Str=function(e,i){void 0===i&&(i=1);var n=e.toString();if(n.indexOf(".")>-1){var r=n.split(".");return r[1].length>=i?r[0]+"."+r[1].substr(0,i):r[0]+"."+t.PaddingRight(r[1],i,"0")}return n+"."+t.PaddingRight("",i,"0")},t.Decompress=function(t){var e=new Zlib.Inflate(t),i=e.decompress();return i},t.Encompress=function(t){var e=new Zlib.Deflate(t),i=e.compress();return i},t.CalulateXYAnagle=function(t,e,i,n){var r=180*Math.atan(Math.abs((n-e)/(i-t)))/Math.PI;return i>=t&&n>=e?-r:i>t&&e>n?r:t>i&&n>e?r-180:180-r},t.GetInnerText=function(t,e,i,n){void 0===n&&(n=1);try{var r="";if(i.IsFull()){for(var o=1;n>o;o++){var s=t.indexOf(e);t=t.substr(s+e.length,t.length-s-e.length)}var a=t.substr(0,t.indexOf(e)+e.length),l=t.substr(a.length,t.length-a.length);if(-1==l.indexOf(i))return l;if(-1==t.indexOf(e))return r;try{return l.substr(0,l.indexOf(i))}catch(h){return l}}var c=t.substr(0,t.indexOf(e)+e.length);return t.substr(c.length,t.length-c.length)}catch(h){return""}},t.IsString=function(t){return null==t?!1:"string"==egret.getQualifiedClassName(t)},t.NUMS=["0","1","2","3","4","5","6","7","8","9"],t.CHARS=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t}();__reflect(Strx.prototype,"Strx"),window.Strx=Strx;var NGridList=function(t){function e(i,n,r,o){void 0===o&&(o=0);var s=t.call(this,i,n)||this;return s.column=1,s._emptyToCount=0,s.animation=!1,s.freeStyle=!1,s.autoHide=!1,s.baseChildren=new Arr,s.rowCount=0,null==e.empty&&(e.empty=Listx.Arr("id|")),s.w=i,s.h=n,s.column=r,0>=r?s.scroller.scrollPolicyV=eui.ScrollPolicy.OFF:(s.scroller.scrollPolicyH=eui.ScrollPolicy.OFF,s.cellWidth=i/r),s.autoHide=!0,s.emptyToCount=o,s.sxList=new Listx,s.emptyList=new Arr,s.OnAdd=function(t){if(s.data&&!s.disposed){s.scroller.viewport.scrollV;s.AddOne(t),s.LoadEmpty(),s.LoadPosition(),NForm.LazyCall(function(){s.HandleScrollHide()})}},s.OnRemove=function(t){if(s.data&&!s.disposed&&s.sxList.Exists(t)){s.scroller.viewport.scrollV;s.sxList[t].Dispose(),s.sxList.Remove(t),s.LoadEmpty(),s.LoadPosition(),NForm.LazyCall(function(){s.HandleScrollHide()})}},s.OnScrollerEnd(function(t){s.HandleScrollHide()}),s}return __extends(e,t),Object.defineProperty(e.prototype,"emptyToCount",{get:function(){return this._emptyToCount},set:function(t){this._emptyToCount=t},enumerable:!0,configurable:!0}),e.prototype.HandleScrollHide=function(){var t=this;this.freeStyle||this._disableScroll||this._disableMask||this.sxList&&this.sxList.Each(function(e){t.LoadOne(e)}.bind(this))},Object.defineProperty(e.prototype,"whereFunc",{get:function(){return this._whereFunc},set:function(t){this._whereFunc=t,this.sxList&&this.sxList.Each(function(t){t.SetTemp("hide",0)})},enumerable:!0,configurable:!0}),e.prototype.AddBase=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=0),this.disposed?this:(0==e&&0==i||(t.x=e,t.y=i),this.baseChildren.Add(t),this.Add(t),this)},e.prototype.RemoveAllBase=function(){this.disposed||this.baseChildren.Each(function(t){t.RemoveMe()})},e.prototype.SetData=function(t,e,i,n,r){void 0===n&&(n=!1),void 0===r&&(r=0),this.disposed||(this.data&&(this.data.OnAddSplice(this.OnAdd),this.data.OnRemoveSplice(this.OnRemove)),this.column<=0&&(this.cellWidth=e),this.cellHeight=e,this.column<=0&&(this.cellWidth=e),this.func=i,this.margin=r,null!=t&&(this.data=t,this.Reload(),n&&(t.OnAdd(this.OnAdd,this),t.OnRemove(this.OnRemove,this))))},e.prototype.Reload=function(){var t=this;if(!this.disposed){this.sxList.Clear(),this.emptyList.Clear(),this.RemoveAllBase();Math.max(this.emptyToCount,this.data.Length);this.data.Each(function(e){t.AddOne(e)}.bind(this)),this.LoadEmpty(),this.LoadPosition()}},e.prototype.AddOne=function(t){if(!this.disposed){var e=new Sx,i=new N9("gridlistempty");i.width=this.cellWidth,i.height=this.cellHeight;var n=new NSButton(i);e.Add(n),e.SetTemp("shape",n),this.AddBase(e),e.SetTemp("list",t),this.sxList.s(t.id,e)}},e.prototype.LoadEmpty=function(){if(!this.disposed){var t=this.sxList.Length,e=this.emptyToCount-t;if(e>this.emptyList.length)for(var i=this.emptyList.Count;e>i;i++){var n=new Sx,r=new N9("gridlistempty");r.width=this.cellWidth,r.height=this.cellHeight,n.Add(r),n.SetTemp("empty","1"),n.SetTemp("shape",r),this.emptyList.Add(n),this.AddBase(n)}else if(e<this.emptyList.Count)for(var i=e;i<this.emptyList.Count;i++)this.emptyList.Count>0&&(this.emptyList.getItemAt(0).Dispose(),this.emptyList.RemoveAt(0))}},e.prototype.LoadPosition=function(){var t=this;if(!this.disposed&&this.data){var e=0,i=0,n=(Math.max(this.emptyToCount,this.data.Length),0);if(this.cellHeight<=0){var r=0;this.sxList.Each(function(e){return t.whereFunc&&!t.whereFunc(e.GetTemp("list"))?(e.SetTemp("hide",1),e.Hide(),void e.Pos(0,-1e3)):(e.Show(),e.y=r,void(r+=e.height+t.margin))}),i=1}else{var o=this.sxList;if(this.orderByFunc){var s=o.keys.sort(function(e,i){try{var n=o[e].GetTemp("list"),r=o[i].GetTemp("list");return t.orderByFunc(n)-t.orderByFunc(r)}catch(s){Js.Trace(s)}return 0});s.forEach(function(r){var s=o[r];t.PutOne(s,e,i)&&(t.column<=0||e<t.column-1?e++:(e=0,i++),n++)}.bind(this))}else o.Each(function(r){t.PutOne(r,e,i)&&(t.column<=0||e<t.column-1?e++:(e=0,i++),n++)});this.emptyList&&this.emptyList.Each(function(r){t.PutOne(r,e,i)&&(t.freeStyle||(t.animation?r.To(e*t.cellWidth+e*t.margin,i*t.cellHeight):r.Pos(e*t.cellWidth+e*t.margin,i*t.cellHeight)),t.column<=0||e<t.column-1?e++:(e=0,i++),n++)})}this.rowCount=i,this.sxList&&(0==this.sxList.Count(function(t){return t.visible})?this.defaultFunc&&(this.defaultPanel||(this.defaultPanel=new Sx,this.defaultFunc(this.defaultPanel),this.AddBase(this.defaultPanel)),this.defaultPanel.Show()):this.defaultPanel&&this.defaultPanel.Hide())}},e.prototype.PutOne=function(t,e,i){if(this.whereFunc){var n=t.GetTemp("list");if(n&&!this.whereFunc(n))return t.SetTemp("hide",1),t.Hide(),t.Pos(0,-1e3),!1}return t.Show(),this.freeStyle||(this.animation?t.To(e*this.cellWidth+e*this.margin,i*this.cellHeight):t.Pos(e*this.cellWidth+e*this.margin,i*this.cellHeight)),this.LoadOne(t),!0},e.prototype.LoadOne=function(t){if(1==t.GetTemp("hide"))return void t.Hide();if(t.isLoaded)this.freeStyle||!this.autoHide||this.column<=0&&this.visibleInScrollH(t,this.cellWidth)||this.column>0&&this.visibleInScrollV(t,this.cellHeight)?t.Show():t.Hide();else if(this.freeStyle||!this.autoHide||this.column<=0&&this.visibleInScrollH(t,this.cellWidth)||this.column>0&&this.visibleInScrollV(t,this.cellHeight)){var i=t.GetTemp("list");if(t.isLoaded=!0,i)try{this.func(t,i)}catch(n){Js.Trace(n)}else try{this.func(t,e.empty)}catch(n){Js.Trace(n)}}},Object.defineProperty(e.prototype,"width",{get:function(){return this.w},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.h},enumerable:!0,configurable:!0}),e.prototype.Dispose=function(){this.disposed=!0,this.sxList.Clear(),this.sxList=null,this.emptyList.Clear(),this.emptyList=null,this.data&&(this.data.OnAddSplice(this.OnAdd),this.data.OnRemoveSplice(this.OnRemove)),this.data=null,this.OnAdd=null,this.OnRemove=null,this.baseChildren&&(this.baseChildren.Each(function(t){t.autoDispose?t.Dispose():(t.ui.SetParent(NForm.stage),t.ui.gameObject.SetActive(!1))}),this.baseChildren.Clear(),this.baseChildren=null),t.prototype.Dispose.call(this)},e.empty=new Listx,e}(NScrollPanel);__reflect(NGridList.prototype,"NGridList"),window.NGridList=NGridList;var NGridListPageSide=function(t){function e(e,i,n,r,o){void 0===o&&(o=0);var s=t.call(this)||this;s.column=1,s.pageSize=1,s.page=-1,s.column=n,s.pageSize=r,s.w=e,s.h=i,s.g=new NGridList(e,i,n,o),s.g.DisableScroll(),s.g.DisableMask(),s.Add(s.g);var a=new NSButton("page1");s.Add(a,-10-a.width,4*(i-a.height)/9),a.Click(function(){s.SetPage(s.page-1)});var l=new NSButton("page2");return s.Add(l,e+10,4*(i-l.height)/9),l.Click(function(){var t=s.page+1;s.canSetPageFunc?s.canSetPageFunc(t)&&s.SetPage(s.page+1):s.SetPage(s.page+1)}),s}return __extends(e,t),e.prototype.SetData=function(t,e,i,n){var r=this;if(void 0===n&&(n=0),this.data=new Array,this.orderByFunc){var o=t.keys.sort(function(e,i){try{var n=t[e],o=t[i];return r.orderByFunc(n)-r.orderByFunc(o)}catch(s){Js.Trace(s)}return 0});o.forEach(function(e){var i=t[e];r.data.push(i)}.bind(this))}else t.Each(function(t){r.data.push(t)});this.g.orderByFunc=this.orderByFunc,this.xqt=t,this.func=i,this.cellHeight=e,this.margin=n},e.prototype.SetPage=function(t){if(t=Math.max(t,0),t=Math.min(t,this.xqt.GetPageSize(this.pageSize)-1),this.page!=t){this.page=t;var e=this.GetPageData(t);this.g.SetData(e,this.cellHeight,this.func,!1,this.margin)}},e.prototype.GetPageData=function(t){t=Math.max(t,0),t=Math.min(t,this.xqt.GetPageSize(this.pageSize)-1);for(var e=new XmlLinqT,i=t*this.pageSize,n=(t+1)*this.pageSize;n>i;i++)this.data.length>i&&e.Add(this.data[i]);return e},e.prototype.Reload=function(){this.page=-1,this.SetPage(0)},e}(Sx);__reflect(NGridListPageSide.prototype,"NGridListPageSide"),window.NGridListPageSide=NGridListPageSide;var NKLabel=function(t){function e(e,i,n,r,o,s){void 0===e&&(e=""),void 0===i&&(i=""),void 0===n&&(n=17),void 0===r&&(r=-1),void 0===o&&(o=!1),void 0===s&&(s=-1);var a=t.call(this,i,r,o,s)||this;return a.keyType=n,a.key=e,a}return __extends(e,t),e}(NLabel);__reflect(NKLabel.prototype,"NKLabel"),window.NKLabel=NKLabel;var NMouseTail3=function(t){function e(){var e=t.call(this)||this;e.frameRage=25,e.maxLen=16,e.lenPerFrame=2,e.scaleOffset=1,e.tails=[],e.poss=[],e.prePos=null,e.pos={x:0,y:0},e.Hide(),e.y=NForm.stageHeightOffset/2;for(var i=0;i<e.maxLen-1;i++){var n=Assert.Img("tail");e.tails.push(n),e.Add(n,-100,-100)}return NForm.Move(function(t){e.pos={x:t.stageX,y:t.stageY}},e),NForm.Up(function(t){e.Hide(),e.tails.forEach(function(t){t.Pos(-100,-100)})},e),NForm.Down(function(t){NForm.LazyCall(function(){e.parent.visible&&(e.poss.length=0,e.pos={x:t.stageX,y:t.stageY},e.prePos=e.pos,e.Show())})},e),NForm.SetInterval(e.frameRage,function(){if(e.visible){try{for(var t=e.lenPerFrame,i=0;t>i;i++){var n={x:(e.pos.x-e.prePos.x)*i/t+e.prePos.x,y:(e.pos.y-e.prePos.y)*i/t+e.prePos.y};e.poss.push(n)}e.prePos=e.pos,e.poss.length>e.maxLen&&e.poss.splice(0,e.lenPerFrame)}catch(r){Js.Trace(r)}try{if(e.poss.length>2)for(var n=e.poss[e.poss.length-1],o=n,s=10,a=e.poss.length-2,l=3*a/4,h=e.poss.length-2;h>=0;h--){n=e.poss[h],h>=l?s+=e.scaleOffset:s-=e.scaleOffset-.15;var c=e.tails[h],u=Math.pow((n.x-o.x)*(n.x-o.x)+(n.y-o.y)*(n.y-o.y),.5);if(c.height=u+3,c.scaleX=s/15,c.Pos(n.x,n.y),o.x!=n.x||o.y!=n.y){var d=e.GetAngle(o.x,o.y,n.x,n.y);c.rotation=d}else c.rotation=0;o=n}}catch(r){Js.Trace(r)}}return e.disposed}),e.mouseEnabled=!1,e.mouseChildren=!1,e}return __extends(e,t),e.prototype.GetAngle=function(t,e,i,n){var r=Math.abs(t-i),o=Math.abs(e-n),s=Math.sqrt(Math.pow(r,2)+Math.pow(o,2)),a=o/s,l=Math.acos(a),h=Math.floor(180/(Math.PI/l));return i>t&&n>e&&(h=180-h),i==t&&n>e&&(h=180),i>t&&n==e&&(h=90),t>i&&n>e&&(h=180+h),t>i&&n==e&&(h=270),t>i&&e>n&&(h=360-h),h},e}(Sx);__reflect(NMouseTail3.prototype,"NMouseTail3"),window.NMouseTail3=NMouseTail3;var NMovePanel=function(t){function e(e,i,n,r,o,s,a){void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=-1),void 0===s&&(s=-1),void 0===a&&(a=-1);var l=t.call(this,e,i,0)||this;return l._disableScroll=!1,l.tween=!1,l.bounces=!1,e==NForm.width&&i==NForm.height&&NForm.Resize(function(){l.Resize(e,i),l.Adjust()},l),l.Resize(e,i),l.moveFunc=n,l.movedFunc=r,n&&l.scroller.addEventListener(eui.UIEvent.CHANGE,n,l.scroller),r&&l.scroller.addEventListener(eui.UIEvent.CHANGE_END,r,l.scroller),l}return __extends(e,t),e.prototype.Resize=function(e,i){t.prototype.Resize.call(this,e,i),this.SetRect(new Rectangle(0,0,e,i)),this.Adjust()},e.prototype.Add=function(e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),this.disposed?void 0:(t.prototype.Add.call(this,e,i,n),this.Adjust(),!0)},e.prototype.Remove=function(e){t.prototype.Remove.call(this,e),this.Adjust()},e.prototype.Adjust=function(){!this.disposed},e.prototype.MoveTo=function(t,e){this.scrollH=t,this.scrollV=e},Object.defineProperty(e.prototype,"contentX",{get:function(){return this.scroller.viewport.scrollH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentY",{get:function(){return this.scroller.viewport.scrollV},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollH",{set:function(t){this.scroller.viewport.scrollH=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollV",{set:function(t){this.scroller.viewport.scrollV=t},enumerable:!0,configurable:!0}),e.prototype.RemoveAll=function(){},Object.defineProperty(e.prototype,"contentWidth",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentHeight",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.SetRect=function(t){void 0===t&&(t=null)},e.prototype.DisableScroll=function(){this.scroller.scrollPolicyV=eui.ScrollPolicy.OFF,this.scroller.scrollPolicyH=eui.ScrollPolicy.OFF,this._disableScroll=!0},e.prototype.DisableScrollX=function(){this.scroller.scrollPolicyH=eui.ScrollPolicy.OFF},e.prototype.DisableScrollY=function(){this.scroller.scrollPolicyV=eui.ScrollPolicy.OFF},e.prototype.EnableScroll=function(){this.scroller.scrollPolicyV=eui.ScrollPolicy.AUTO,this.scroller.scrollPolicyH=eui.ScrollPolicy.AUTO},e.prototype.EnableScrollX=function(){this.scroller.scrollPolicyH=eui.ScrollPolicy.AUTO},e.prototype.EnableScrollY=function(){this.scroller.scrollPolicyV=eui.ScrollPolicy.AUTO},e.prototype.Lock=function(){this.DisableScroll()},e.prototype.UnLock=function(){this.EnableScroll()},e.prototype.Dispose=function(){this.moveFunc&&this.scroller.addEventListener(eui.UIEvent.CHANGE,this.moveFunc,this.scroller),this.movedFunc&&this.scroller.addEventListener(eui.UIEvent.CHANGE_END,this.movedFunc,this.scroller),t.prototype.Dispose.call(this),this.movedFunc=null,this.view=null},e}(NScrollPanel);__reflect(NMovePanel.prototype,"NMovePanel"),window.NMovePanel=NMovePanel;var NNoPage=function(){function t(t){var e=this;if(this.max=0,this.page=0,this.inPaging=!1,this.g=t,t._disableScroll)throw new Error("NGridList need sed _disableScroll=true");var i=!0;this.g.OnScrollerEnd(function(t){var n=t.scrollV;e.g.disposed||(-5>n||n>5?i&&(i=!1,t.scrollV<0?e.page>0&&(e.page--,e.inPaging=!0,e.func(e.page)):t.scrollV>0&&e.page<e.max-1&&(e.page++,e.inPaging=!0,e.func(e.page))):i=!0)}),this.page1=Assert.Img("comboboxdown"),this.page1.align=1,this.page2=Assert.Img("comboboxdown"),this.page2.align=1,this.page1.scaleY=-1,this.g.Add(this.page1,this.g.w/2,this.page1.height),this.g.Add(this.page2,this.g.w/2,this.g.h-this.page2.height),t.OnDispose(function(){e.g=null,e.func=null,e.page1.Dispose(),e.page2.Dispose(),e.page1=null,e.page2=null})}return t.prototype.Set=function(t,e,i){var n=this;this.func=i,t>=0&&(this.page=t),this.max=e,0>=t?this.page1.Hide():this.page1.Show(),t>=e-1?this.page2.Hide():this.page2.Show(),NForm.SetTimeout(1e3,function(){n.inPaging=!1})},t}();__reflect(NNoPage.prototype,"NNoPage"),window.NNoPage=NNoPage;var NNum=function(t){function e(i,n,r,o){void 0===n&&(n="z"),void 0===r&&(r=!1),void 0===o&&(o=0);var s=t.call(this)||this;return s.type="z",s.offset=o+e.extraOffset,s.type=n,s.Set(i,n,r),s}return __extends(e,t),e.prototype.Set=function(t,e,i){void 0===e&&(e="z"),void 0===i&&(i=!1),t=t.toString(),this.num=t,this.RemoveAll(),this.type=e,this.leftOffset=0;try{null==t&&(t="");for(var n=0,r=t.length;r>n;n++){var o=t.charAt(n);if(" "==o)this.leftOffset+=5;else{"-"==o?o="j":"+"==o?o="i":"/"==o?o="p":"."==o?o="d":":"==o&&(o="m");try{var s=new Bx(e+o);s.x=this.leftOffset,this.leftOffset+=s.width+this.offset,this.Add(s),i&&(s.rotation=Strx.Rnd(40)-20)}catch(a){Js.Trace("Error Num:"+e+o+" orig: "+t)}}}}catch(a){Js.Trace("Error Num:"+t)}1==this.align?this.PutCenter():2==this.align&&this.PutRight()},Object.defineProperty(e.prototype,"val",{get:function(){return this.num},set:function(t){this.Set(t,this.type)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valNum",{get:function(){return this.num.ToInt()},set:function(t){this.Set(t.toString(),this.type)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.leftOffset},enumerable:!0,configurable:!0}),e.extraOffset=0,e}(Sx);__reflect(NNum.prototype,"NNum"),window.NNum=NNum;var NPanel=function(t){function e(i,n,r){void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=-1);var o=t.call(this)||this;if(o.visiableInStage=!0,o.showBG=r>-1,o.showBG&&e.bgFunc){o.bg=e.bgFunc(r),o.bg.OnLoaded(function(){o.bg.width=i,o.bg.height=n}.bind(o));var s=new Sx;s.base=!0,s.Add(o.bg),o.Add(s)}return o.w=i,o.h=n,o}return __extends(e,t),e.prototype.Resize=function(t,e){this.showBG&&this.bg&&(this.bg.width=t,this.bg.height=e),this.w=t,this.h=e},Object.defineProperty(e.prototype,"width",{get:function(){return this.showBG?this.w:t.prototype.Width.call(this)},set:function(t){this.w=t,this.showBG&&(this.bg.width=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.showBG?this.h:t.prototype.Height.call(this)},set:function(t){this.showBG&&(this.h=t,this.bg.height=t)},enumerable:!0,configurable:!0}),e.prototype.InShow=function(){this.visiableInStage=!0;for(var t=0;t<this.numChildren;t++){var i=this.getChildAt(t);i instanceof e&&i.InShow(),i instanceof NSButton&&i.Show(),i instanceof NProcess&&i.Show(),i instanceof Bx&&i.Show()}},e.prototype.InHide=function(){this.visiableInStage=!1;for(var t=0;t<this.numChildren;t++){var i=this.getChildAt(t);i instanceof e?i.InHide():i instanceof NSButton?i.Hide():i instanceof NProcess?i.Hide():i instanceof Bx&&i.Hide()}},e.prototype.Show=function(){this.InShow(),t.prototype.Show.call(this)},e.prototype.Hide=function(){this.InHide(),t.prototype.Hide.call(this)},e.prototype.Add=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),null==e)return!1;var r=null;r="string"==typeof e?Assert.Img(e):e,this.disposed||r.hasOwnProperty("hasReLoad")&&r.hasOwnProperty("loaded")&&(r.loaded||(r.Reload(),r.loaded=!0));var o=t.prototype.Add.call(this,r,i,n);return o},e}(Sx);__reflect(NPanel.prototype,"NPanel"),window.NPanel=NPanel;var NProcess=function(t){function e(e,i,n,r,o,s,a){void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=-1),void 0===o&&(o=!1),void 0===s&&(s=null),void 0===a&&(a=!1);var l=t.call(this)||this;return l._val=0,l.fgWidth=0,l.fgHeight=0,l.tweenTime=100,l.scrollType=0,l.isheight=a,null==n?n=new NLabel("",16777215,!1,20):""==n.val&&(n.val=" "),"string"==typeof e&&(e=Assert.Img(e),l._fgName=e),"string"==typeof i&&(i=Assert.Img(i)),l._bg=i,l.l=n,l.scroll=o,l.fgWidth=e.width,l.fgHeight=e.height,l.processFunc=s,0>=r?i?(l._width=i.width,l._height=i.height):(l._width=e.width,l._height=e.height):a?(l._height=r,i&&(i.height=r),e.height=r):(l._width=r,i&&(i.width=r),e.width=r),i&&l.Add(i),l.pFg=new Sx,l.Add(l.pFg),l.fg=e,l.SetVal(0),n.align=1,l.Add(n,l._width/2,(e.height-n.height)/2),l}return __extends(e,t),Object.defineProperty(e.prototype,"fgName",{set:function(t){this._fgName!=t&&(this._fgName=t,this.fg=Assert.Img(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fg",{get:function(){return this._fg},set:function(t){if(this._fg=t,this.pFg.RemoveAll(),this.pFg.Add(this._fg),this.scroll&&!this.scrollDis){var e=new egret.Shape;e.graphics.beginFill(0,1),e.graphics.drawRect(0,0,t.width,t.height),e.graphics.endFill(),this.Add(e),this._fg.mask=e,this.scrollDis=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"val",{get:function(){return this._val},set:function(t){this.SetVal(t),this._val=t},enumerable:!0,configurable:!0}),e.prototype.SetVal=function(t,e){if(void 0===t&&(t=100),void 0===e&&(e=0),!this.disposed){if(e>0)return void ActLite.To(this,{val:t},e,function(){});if(t>100&&(t=100),t=t.ToInt(),0>=t)return this.scrollDis&&this.isheight&&ActLite.To(this.scrollDis,{scaleY:0},500),void this.fg.Hide();this.fg.Show(),this._val=t;try{0>t&&(t=0),this.scroll?(this.height>0&&(1==this.scrollType?(this.scrollDis.scaleY=t/100,this.scrollDis.y=this.height*(100-t)/100):this.fg.scrollRect=new Rectangle(0,0,this._width*t/100,this.height)),this.processFunc&&this.processFunc()):(this.fg.width=this._width*t/100,this.processFunc&&this.processFunc())}catch(i){Js.Trace(i)}}},e.prototype.SetText=function(t){this.l.val=t},Object.defineProperty(e.prototype,"width",{get:function(){return this._fg instanceof NSprite?this._bg&&this._bg.$bitmapData?this._bg.$bitmapData.width:this._fg.$bitmapData?this._fg.$bitmapData.width:0:this._bg?this._bg.width:this._fg.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._fg instanceof NSprite?this._bg&&this._bg.$bitmapData?this._bg.$bitmapData.height:this._fg.$bitmapData?this._fg.$bitmapData.height:0:this._bg?this._bg.height:this._fg.height},enumerable:!0,configurable:!0}),e.textStyle=201,e}(Sx);__reflect(NProcess.prototype,"NProcess"),window.NProcess=NProcess;var NPs=function(t){function e(e){return t.call(this)||this}return __extends(e,t),e.prototype.Play=function(t,e){void 0===e&&(e=null)},e.prototype.Stop=function(){},e.prototype.StopAtEnd=function(){},e.prototype.StopAtEndWhenPlayOnEnd=function(){},e.prototype.Continue=function(){},e.prototype.End=function(t){},e.prototype.PlayOnEnd=function(t){},e.prototype.Dispose=function(){!this.disposed,t.prototype.Dispose.call(this)
},e}(Sx);__reflect(NPs.prototype,"NPs"),window.NPs=NPs;var NRadio=function(t){function e(e,i,n,r,o,s,a){void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=9999),void 0===a&&(a=0);var l=t.call(this)||this;l.mode=0,l.checkList=new Listx,l.data=e,l.act=r,l.onChanged=o,l.rowCount=s,l.mode=a,l.w=i,l.h=n;for(var h=0;h<e.length;h++)l.AddCheck(e[h],i,n,h);return l.selectIndex=0,l}return __extends(e,t),e.prototype.AddCheck=function(t,e,i,n){var r=this,o=new NCheck(t,e,i,this.act),s=0,a=0;0==this.mode&&(s=e*(n%this.rowCount),a=i*Math.floor(n.ToInt()/this.rowCount)),this.Add(o,s,a),this.checkList.s(t,o),o.check=!1,o.Click(function(){r.selectIndex=n})},Object.defineProperty(e.prototype,"selectIndex",{get:function(){return this._selectIndex},set:function(t){var e=this;this.checkedCheck&&(this.checkedCheck.check=!1),this.checkedCheck=this.checkList.GetValue(t),this.checkedCheck.check=!0,this._selectIndex=t,this.onChanged&&NForm.LazyCall(function(){e.onChanged(t)}),this.PutPos()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectItem",{get:function(){return this.checkList.GetValue(this._selectIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"select",{get:function(){return this.data[this.selectIndex]},set:function(t){for(var e=0,i=this.data.length;i>e;e++)if(this.data[e]==t)return this.selectIndex=e,void this.PutPos()},enumerable:!0,configurable:!0}),e.prototype.PutPos=function(){var t,e,i;if(1==this.mode);else if(2==this.mode){for(var n=0,r=this.selectIndex;r>n;n++){t=this.checkList.GetValue(n),t.depth=-Math.abs(this.selectIndex-n);var o=this.w/3*(10%this.rowCount)+this.w;t.To({x:o},200),t.scaleX=.7,t.scaleY=.7}for(t=this.checkList.GetValue(this.selectIndex),t.depth=999,t.To({x:0},200),t.scaleX=1,t.scaleY=1,e=this.selectIndex+1,i=this.checkList.Length;i>e;e++)t=this.checkList.GetValue(e),t.depth=-Math.abs(this.selectIndex-e),o=this.w/3*((e-this.selectIndex)%this.rowCount)+2*this.w/3,t.To({x:o},200),t.scaleX=.7,t.scaleY=.7}},e.Ani=function(t){this.aniIco!=t&&(this.aniIco&&(this.aniIco.filters=null),this.aniIco!=t&&(this.aniIco=t,this.DoAni(this.aniIco)))},e.DoAni=function(t){var e=this;if(t.topVisible)return this.aniIco!=t?void t.To({y:0},500):void t.To({y:10},500,function(){return e.aniIco!=t?void t.To({y:0},500):void t.To({y:-10},500,function(){e.DoAni(t)})})},e}(Sx);__reflect(NRadio.prototype,"NRadio"),window.NRadio=NRadio;var NSButton=function(t){function e(i,n,r,o,s){void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=!0),void 0===s&&(s=-1);var a=t.call(this)||this;if(a.music=null,a.filterDoubleClickTime=-1,a._filterDoubleClick=!1,a.b=i,a.bOn=n,null==r&&(r=e.musicBG),a.music=r,a.filterDoubleClickTime=s,"string"==typeof i){i=Assert.Img(i);var l=new egret.Shape;l.graphics.beginFill(0,0),l.graphics.drawRect(0,0,100,40),l.graphics.endFill(),a.Add(l),i.OnLoaded(function(){a.RemoveDisplayObject(l)}.bind(a))}"string"==typeof n&&(n=Assert.Img(n)),i instanceof Bx&&i.OnLoaded(function(){(i.width<=50||i.height<=50)&&(i.width<=50&&i.height<=50?a.SetHitArea(new Rectangle(-16,-12,i.width+32,i.height+24),!1):i.width<=50?a.SetHitArea(new Rectangle(-16,-12,i.width+32,i.height),!1):a.SetHitArea(new Rectangle(-16,-12,i.width,i.height+24),!1))}),n&&(n.Hide(),a.Add(n)),a.Add(i),a.obj=i,a.buttonMode=!0,o&&(n?(a.Down(function(){n.Show(),i.alpha=0}),a.OutAndUp(function(){n.Hide(),i.alpha=1}),a.Up(function(){n.Hide(),i.alpha=1})):(a.Down(function(){i.filters=Filters.highLightFilter}),a.OutAndUp(function(){i.filters=null}),a.Up(function(){i.filters=null})));return s>0&&a.Click(function(t){s>0&&(a._filterDoubleClick?t.stopImmediatePropagation():(a._filterDoubleClick=!0,a.filters=Filters.grayFilter,NForm.SetTimeout(s,function(){a.filters=null,a._filterDoubleClick=!1})))}),Strx.IsFull(r)&&a.Click(function(){Strx.IsFull(r)&&Music.Play(r)}),a.ResetWidthHeight(),a}return __extends(e,t),e.prototype.Dispose=function(){this.obj=null,t.prototype.Dispose.call(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.obj&&this.obj instanceof N9?this.obj.width:t.prototype.Width.call(this)>0?t.prototype.Width.call(this):this.obj&&this.obj.width>0?this.obj.width:t.prototype.Width.call(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.obj&&this.obj instanceof N9?this.obj.height:t.prototype.Height.call(this)>0?t.prototype.Height.call(this):this.obj&&this.obj.height>0?this.obj.height:t.prototype.Height.call(this)},enumerable:!0,configurable:!0}),e.prototype.On=function(){this.bOn&&(this.b.Hide(),this.bOn.Show())},e.prototype.Off=function(){this.bOn&&(this.b.Show(),this.bOn.Hide())},e.musicBG=null,e}(Sx);__reflect(NSButton.prototype,"NSButton"),window.NSButton=NSButton;var NSprite=function(t){function e(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var r=t.call(this,null)||this;return r.loadedFunc=function(){i>0?r.width=i:r.width<=0&&(r.width=r.$bitmapWidth),n>0?r.height=n:r.height<=0&&(r.height=r.$bitmapHeight),1==r.align?r.PutCenter():2==r.align&&r.PutRight()},e.length>=4&&(e.StartWith(Config.src)||e.StartWith("http"))?r.SetBitmap(e):r.SetBitmap(RES.getRes(e)),r}return __extends(e,t),e}(Bx);__reflect(NSprite.prototype,"NSprite"),window.NSprite=NSprite;var NTabPanel=function(t){function e(i,n,r,o,s,a){void 0===r&&(r=10),void 0===o&&(o=null),void 0===s&&(s=0),void 0===a&&(a=-9999);var l=t.call(this)||this;l.list=new Listx,l.bList=new Listx,l._offset=0,-9999==a&&(a=e.defaultPanelType),l.mode=s,l.w=i,l.h=n,l.style=r,l.OnTabChange=o,l.panelType=a,l.tempButton=new NButton("",r),l.tempButton.Hide(),l.Add(l.tempButton);var h=1;if(h=4,1==s){var c=new NScrollPanel(l.w,l.h+32);l.Add(c),l.allP=new Sx,c.Add(l.allP),c.Pos(0,h)}else l.allP=new Sx,l.Add(l.allP,0,31+h);return l.tabPanel=new NPanel(i,l.tempButton.height-10),l.tabPanel.Pos(0,h-(l.tempButton.height-31)),l.Add(l.tabPanel),l.midPanel=new NPanel(i,l.tempButton.height-10),l.tabPanel.Add(l.midPanel),l}return __extends(e,t),e.prototype.AddTab=function(t,e,i){var n=this;void 0===e&&(e=0),void 0===i&&(i=0),this._offset+=e,0==this.list.Length&&(this.selectKey=t);var r=new NButton(t,this.style);r.b.music="",this.tabPanel.Add(r),r.Click(function(){Music.Play("tab"),n.SelectKey(t)}.bind(this)),0==i?r.Pos(25+this.list.Length*(this.tempButton.width+6)+this._offset,0):2==i?r.Pos(this.w,60+this.list.Length*(this.tempButton.height+6)+this._offset):r.Pos(-this.tempButton.width,60+this.list.Length*(this.tempButton.height+6)+this._offset),this.bList[t]=r;var o=new NPanel(this.w,this.h,this.panelType);return o.Hide(),this.allP.Add(o),this.list[t]=o,this.LoadXY(),o},e.prototype.AddTabPro=function(t,e,i,n,r){void 0===i&&(i=null),void 0===n&&(n=0),void 0===r&&(r=0),null==this.proList&&(this.proList=new Listx),null==this.proFuncList&&(this.proFuncList=new Listx),null==this.tabFuncList&&(this.tabFuncList=new Listx);var o=this.AddTab(t,n,r);this.proList[t]=o,this.proFuncList[t]=e,i&&(this.tabFuncList[t]=i),this.selectKey=""},e.PutPosition=function(t,e,i,n,r){for(var o=0;o<r.length;o++)null!=r[o]&&(r[o].x=t+i*o,r[o].y=e+n*o)},e.prototype.LoadXY=function(){if(1==this.mode){var t=[];this.list.Each(function(e){t.push(e)}),e.PutPosition(0,32,this.w,0,t)}},e.prototype.Select=function(t){this.SelectKey(this.list.GetName(t))},Object.defineProperty(e.prototype,"selectIndex",{get:function(){var t=this.list.GetIndex(this.selectKey);return t.Max(0)},enumerable:!0,configurable:!0}),e.prototype.SelectKey=function(t){var e=this;if(this.list.Exists(t)){var i=!1;this.selectKey!=t&&(i=!0);var n=!1;if(this.proList&&this.proList.Exists(t)&&(this.proList[t].loaded||(n=this.proFuncList[t](this.proList[t]),n||(this.proList[t].loaded=!0))),!n){if(this.selectKey=t,0==this.mode&&(this.list.Each(function(t){t.Hide()}),this.list[t].Show()),this.bList.Each(function(t){t.Off()}),0==this.mode&&this.list[t].Show(),1==this.mode){var r=0;this.list.EachKey(function(i){return i==t?(ActLite.To(e.allP,{x:-r*e.w},400),!0):void r++})}this.bList[t].On()}n||i&&(this.OnTabChange&&NForm.LazyCall(function(){e.OnTabChange(e.list.GetIndex(t))}),this.tabFuncList&&this.tabFuncList.Exists(t)&&NForm.LazyCall(function(){e.tabFuncList[t]()}))}},e.defaultPanelType=11,e}(Sx);__reflect(NTabPanel.prototype,"NTabPanel"),window.NTabPanel=NTabPanel;var NText=function(t){function e(i,n,r,o,s,a,l,h){void 0===s&&(s=-1),void 0===a&&(a=null),void 0===l&&(l=null),void 0===h&&(h=20);var c=t.call(this)||this;return c._key=i,c.func=a,c.completeFunc=l,40>s&&(s=40),c.w=o,c.h=s,c.bg=e.bgRender(),c.bg.width=o+10,c.bg.height=s,c.Add(c.bg),c.textFieldp=new Sx,c.Add(c.textFieldp),c.textField=new egret.TextField,c.textField.type=egret.TextFieldType.INPUT,c.textField.width=o,c.textField.height=s,c.textField.size=h,c.textField.maxChars=r,c.textField.textColor=e.color,c.textFieldp.Add(c.textField,0,(s-h)/4),a&&(c.textField.addEventListener(egret.TextEvent.CHANGE,a,c),c.textField.addEventListener(egret.Event.CHANGE,a,c)),l&&(c.textField.addEventListener(egret.TextEvent.FOCUS_OUT,l,c),c.textField.addEventListener(egret.Event.FOCUS_OUT,l,c)),c.textField.addEventListener(egret.TextEvent.FOCUS_IN,function(){Msg.Call("TextFieldFocusIn",null)},c),c.textField.addEventListener(egret.Event.FOCUS_IN,function(){Msg.Call("TextFieldFocusIn",null)},c),c.textField.addEventListener(egret.TextEvent.FOCUS_OUT,function(){Msg.Call("TextFieldFocusOut",null)},c),c.textField.addEventListener(egret.Event.FOCUS_OUT,function(){Msg.Call("TextFieldFocusOut",null)},c),Strx.IsFull(c._key)&&(NColorText.ExsistStyle(0)?c.keyTextField=new NColorText(Lang.PT(c._key)+"：",!0,h,0):c.keyTextField=new NLabel(Lang.PT(c._key)+"：",16777215,!0,h),c.keyTextField.y=(s-h)/2-1,c.Add(c.keyTextField)),c.val=n,c.OnPos(function(){c.SetTextFieldPos()}),c.addEventListenerSx(egret.Event.ADDED_TO_STAGE,c.SetTextFieldPos),c}return __extends(e,t),e.prototype.SetTextFieldPos=function(t){var e=this;void 0===t&&(t=null),this.parent&&NForm.LazyCall(function(){if(!e.disposed){var t=0;e.keyTextField&&(t=e.keyTextField.width),e.bg.x=t+8,e.bg.y=-4,e.textFieldp.x=t+16,e.textFieldp.y=3}}.bind(this))},Object.defineProperty(e.prototype,"val",{get:function(){return this.textField.text},set:function(t){null==t&&(t=""),this._val=t,this.textField.text=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiline",{get:function(){return this.textField.multiline},set:function(t){this.textField.multiline=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPassword",{set:function(t){this.textField.displayAsPassword=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"holdPlace",{set:function(t){null==this.holdPlaceLabel&&(this.holdPlaceLabel=new NLabel("",11184810,!1,this.textField.size-2),this.holdPlaceLabel.alpha=.3,this.textFieldp.Add(this.holdPlaceLabel,this.textField.x+1,(this.h-this.holdPlaceLabel.height)/2-2),this.val.IsFull()&&this.holdPlaceLabel.Hide(),this.textField.addEventListener(egret.TextEvent.CHANGE,this.HandleHoldPlace,this),this.textField.addEventListener(egret.Event.CHANGE,this.HandleHoldPlace,this)),this.holdPlaceLabel.val=t},enumerable:!0,configurable:!0}),e.prototype.HandleHoldPlace=function(t){this.val.IsFull()?this.holdPlaceLabel.Hide():this.holdPlaceLabel.Show()},e.prototype.Dispose=function(){this.func&&(this.textField.removeEventListener(egret.TextEvent.CHANGE,this.func,this),this.textField.removeEventListener(egret.Event.CHANGE,this.func,this)),this.completeFunc&&(this.textField.removeEventListener(egret.TextEvent.FOCUS_OUT,this.completeFunc,this),this.textField.removeEventListener(egret.Event.FOCUS_OUT,this.completeFunc,this)),this.textField.removeEventListener(egret.TextEvent.CHANGE,this.HandleHoldPlace,this),this.textField.removeEventListener(egret.Event.CHANGE,this.HandleHoldPlace,this),this.func=null,this.completeFunc=null,t.prototype.Dispose.call(this)},e.color=0,e}(Sx);__reflect(NText.prototype,"NText"),window.NText=NText;var SocketHttp=function(){function t(){}return t}();__reflect(SocketHttp.prototype,"SocketHttp"),window.SocketHttp=SocketHttp;var SocketLocal=function(){function t(){}return t}();__reflect(SocketLocal.prototype,"SocketLocal"),window.SocketLocal=SocketLocal;var SocketTcp=function(){function t(){}return t}();__reflect(SocketTcp.prototype,"SocketTcp"),window.SocketTcp=SocketTcp;var SocketWs=function(t){function e(e,i,n){var r=t.call(this)||this;return r.sender=e,r.ip=i,r.port=n,r.socket=new egret.WebSocket,r.socket.addEventListener(egret.Event.CONNECT,r.ConnectHandler,r),r.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,r.DataHandler,r),r.socket.addEventListener(egret.Event.CLOSE,r.CloseHandler,r),r}return __extends(e,t),e.prototype.Connect=function(){1==Config.wss?this.socket.connectByUrl("wss://"+this.ip+":"+this.port):this.socket.connect(this.ip,this.port)},e.prototype.Send=function(t,e){void 0===e&&(e=null),this.socket.connected&&(this.socket.writeUTF(t),this.socket.flush())},e.prototype.SendGBK=function(t){},e.prototype.Close=function(){this.socket.close()},e.prototype.ConnectHandler=function(t){var e=new egret.Event(egret.Event.CONNECT);this.dispatchEvent(e)},e.prototype.DataHandler=function(t){try{if(e.net&&e.net.socket&&t.target==e.net.socket.socket&&this.socket.connected){var i=this.socket.readUTF();if(i.length>0){if(-1==i.indexOf("$")){var n=Strx.Decompress(new Uint8Array(egret.Base64Util.decode(i)));i=UTF8.decode(n)}this.sender(i)}}}catch(r){Js.Trace(r)}},e.prototype.CloseHandler=function(t){var e=new egret.Event(egret.Event.CLOSE);this.dispatchEvent(e)},Object.defineProperty(e.prototype,"isConnected",{get:function(){return this.socket.connected},enumerable:!0,configurable:!0}),e}(egret.EventDispatcher);__reflect(SocketWs.prototype,"SocketWs",["ISocket"]),window.SocketWs=SocketWs;